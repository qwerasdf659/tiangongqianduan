# 餐厅积分抽奖系统 - 前端开发综合文档

## 📋 文档说明

本文档整合了项目的架构设计、开发规范、API接口、代码实现等全方位信息，为前端开发提供完整的技术指导。

---

## 🏗️ 一、系统架构全景

### 1.1 技术栈组成

#### 前端架构
- **微信小程序原生框架**：WXML/WXSS/JavaScript
- **基础库版本**：≥ 2.15.0（支持Canvas动画优化）
- **UI组件库**：Vant Weapp 1.10.8
- **兼容性矩阵**：
  - iOS 12+：Flex弹性布局
  - Android 9+：REM响应式
  - 微信客户端 8.0.30+：API动态检测

#### 后端架构
- **服务端**：Node.js v20.10.0 + Express 4.18.2
- **进程管理**：PM2集群模式（4进程负载均衡）
- **网关**：Nginx反向代理（流量分发层）

#### 数据架构
- **核心数据库**：MySQL 8.0（事务型数据存储）
- **缓存系统**：Redis 7.0（抽奖概率池 + 库存缓存）
- **对象存储**：Sealos（用户媒体文件独立隔离存储）
- **备份策略**：每日增量备份 + 每周全量备份

#### 第三方服务
- **短信服务**：腾讯云短信（用户验证码）
- **数据加密**：AES-256（敏感数据传输保护）

### 1.2 部署拓扑
采用分布式分层架构：
1. **流量层**：Nginx负载均衡分发请求至Node.js集群
2. **服务层**：PM2管理4进程Node.js服务（支持横向扩展）
3. **数据层**：MySQL主从同步 + Redis集群
4. **存储层**：Sealos对象存储（媒体文件独立隔离）

---

## 🎨 二、前端开发规范

### 2.1 项目结构

```
/miniprogram
  /pages
    /lottery      # 抽奖主页面 - Canvas转盘+动画效果
    /exchange     # 商品兑换页面 - 2×10网格展示20件商品
    /camera       # 拍照上传页面 - 图片裁剪+积分计算
    /user         # 用户中心 - 积分管理+统计数据
    /merchant     # 商家服务 - 审核管理+统计面板
    /auth         # 认证页面 - 手机号绑定（已封存）
  /utils
    api.js        # 接口请求封装
    auth.js       # 认证与Token管理
    ws.js         # WebSocket封装
    validate.js   # 表单与滑块验证
  /images         # TabBar图标文件目录
  app.js          # 全局配置
  app.json        # 页面路由和TabBar配置
  app.wxss        # 全局样式
```

### 2.2 页面路由配置

```json
{
  "pages": [
    "pages/lottery/lottery",      // 抽奖主页面
    "pages/exchange/exchange",    // 商品兑换页面
    "pages/camera/camera",        // 拍照上传页面
    "pages/user/user",           // 用户中心
    "pages/merchant/merchant",    // 商家服务
    "pages/auth/auth"            // 认证页面（已封存）
  ]
}
```

### 2.3 UI/UX设计规范

#### 色彩体系
- **主交互色**：#FF6B35（抽奖/兑换按钮）
- **辅助色**：#4ECDC4（商品卡片背景）
- **紫色系**：#9C27B0、#673AB7（拍照页面渐变）
- **蓝色系**：#667eea、#764ba2（用户中心、商家页面）
- **禁用态**：全局40%灰度覆盖

#### 交互动效
- **转盘旋转**：cubic-bezier(0.68, -0.55, 0.27, 1.55)曲线
- **商品点击**：卡片缩放动画（0.9倍→1.1倍弹性效果）
- **抽奖结果反馈**：
  - 正常中奖：转盘停止后弹出3秒中奖弹窗 → 自动跳转记录页
  - 差点中奖：指针在中奖区边界±5°范围抖动 → 滑向相邻常规区

#### 动画性能标准
- **动画流畅度**：0%区域停留≤72ms
- **转盘动画时长**：3000ms（5圈+目标角度）
- **缓动函数**：easeOut (1 - Math.pow(1 - progress, 3))

---

## 🎯 三、核心功能模块设计

### 3.1 积分抽奖模块

#### 奖品配置表
| 礼品名称 | 初始概率 | 类别 | 用户感知表现 | 系统行为 |
|---------|---------|------|-------------|----------|
| 八八折券 | 0% | 活动限定 | 指针抖动后滑向相邻区 | 返回NEAR_MISS状态码 |
| 九八折券 | 10% | 常规礼品 | 指针正常停止 | 参与概率计算 |
| 甜品1份 | 30% | 常规礼品 | 指针正常停止 | 参与概率计算 |
| 青菜1份 | 30% | 常规礼品 | 指针正常停止 | 参与概率计算 |
| 虾1份 | 5% | 常规礼品 | 指针正常停止 | 参与概率计算 |
| 花甲1份 | 20% | 常规礼品 | 指针正常停止 | 参与概率计算 |
| 鱿鱼1份 | 5% | 常规礼品 | 指针正常停止 | 参与概率计算 |
| 生腌拼盘 | 0% | 活动限定 | 指针抖动后滑向相邻区 | 返回NEAR_MISS状态码 |

#### 关键技术实现
**动画欺骗优化**：
1. 快速滑向活动区（1500ms）
2. 边界抖动（800ms × 2次）
3. 滑向相邻常规区（1200ms）
4. 视觉增强：指针拖尾效果 + 区域高亮闪烁

**概率计算模型**：
1. 检查10连抽保底（触发则强制返回九八折券）
2. 生成随机数遍历奖品池
3. 命中活动限定品时校验用户资格（当日消费≥500元）
4. 未达标则触发NEAR_MISS动效并降级至相邻奖品

**保底机制**：
- Redis计数用户连续未中奖次数，第10次强制命中九八折券
- 抽中即重置计数

#### Canvas转盘实现
```javascript
// 转盘配置
prizes: [
  { name: '八八折券', angle: 0, color: '#FF6B35', isActivity: true },
  { name: '九八折券', angle: 45, color: '#4ECDC4', isActivity: false },
  { name: '甜品1份', angle: 90, color: '#FFD93D', isActivity: false },
  { name: '青菜1份', angle: 135, color: '#6BCF7F', isActivity: false },
  { name: '虾1份', angle: 180, color: '#FF6B6B', isActivity: false },
  { name: '花甲1份', angle: 225, color: '#4DABF7', isActivity: false },
  { name: '鱿鱼1份', angle: 270, color: '#9775FA', isActivity: false },
  { name: '生腌拼盘', angle: 315, color: '#FFB84D', isActivity: true }
]

// 动画参数
- 转盘尺寸：600rpx × 600rpx
- 动画时长：3000ms
- 旋转圈数：5圈 + 目标角度
- 缓动函数：easeOut
```

### 3.2 商品兑换模块

#### 商品池规则
| 商品名称 | 积分值 | 库存策略 |
|---------|--------|----------|
| 品牌钥匙扣 | 800分 | Redis原子计数 |
| 限定保温杯 | 1200分 | WebSocket实时同步 |
| 定制餐具套装 | 1500分 | 总量恒定20件 |
| 定制围裙 | 2000分 | 库存<1件触发告警 |

#### 关键特性
- **展示逻辑**：兑换页面单页展示全部20件商品（无分页/筛选）
- **排序规则**：按积分值从低到高（800分 → 2000分）
- **布局设计**：2×10网格布局，恰好展示20件商品

#### 库存保障技术
1. Redis原子减库存（DECR命令 + Lua脚本校验）
2. MySQL创建订单 + 行级锁扣减库存
3. MySQL失败 → 异步补偿重试（3次回退策略）
4. 重试失败 → Redis库存回滚 + 人工告警
5. **实时同步**：WebSocket广播库存变更至所有客户端

### 3.3 拍照上传模块

#### 用户端流程
拍照 → 自动裁剪/旋转修正 → 上传待审核池

#### 积分反馈机制
- **弹窗提示**：您本次消费{金额}元，审核通过后可获得{金额×10}积分
- **积分范围**：50-2000分（存储于photo_reviews.points_awarded）
- **图片处理**：自动压缩至1920x1920像素

### 3.4 用户中心模块

#### 功能规则
| 操作类型 | 规则 |
|---------|------|
| 消费积分 | 单日上限5000分 |
| 积分转账 | 积分账户禁止转赠他人 |
| 积分来源 | 抽奖消耗/拍照奖励 |

#### 统计数据展示
- 抽奖次数统计
- 兑换件数统计
- 拍照张数统计
- 积分明细查看

### 3.5 商家服务模块

#### 权限控制
- **功能解锁**：手机号验证 → 服务激活（开通商家权限）
- **未授权态**：全局灰度显示 + 解锁入口按钮

#### 审核处理系统
| 操作 | 响应机制 |
|------|----------|
| 审核通过 | 手动录入对应积分 |
| 驳回 | 显示"审核失败，请联系客服" |

---

## 🔌 四、API接口规范

### 4.1 认证相关接口

#### 发送验证码
```http
POST /api/auth/send-code
Content-Type: application/json

请求参数：
{
  "phone": "13800138000"
}

响应数据：
{
  "code": 0,
  "msg": "验证码已发送",
  "data": {
    "expires_in": 300
  }
}
```

#### 手机号登录/绑定
```http
POST /api/auth/login
Content-Type: application/json

请求参数：
{
  "phone": "13800138000",
  "code": "123456"
}

响应数据：
{
  "code": 0,
  "msg": "登录成功",
  "data": {
    "access_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9...",
    "refresh_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9...",
    "user_info": {
      "user_id": 1001,
      "phone": "13800138000",
      "total_points": 1500,
      "is_merchant": false
    }
  }
}
```

#### Token刷新
```http
POST /api/auth/refresh
Authorization: Bearer {refresh_token}

响应数据：
{
  "code": 0,
  "msg": "Token刷新成功",
  "data": {
    "access_token": "new_access_token",
    "refresh_token": "new_refresh_token"
  }
}
```

### 4.2 抽奖相关接口

#### 获取抽奖配置
```http
GET /api/lottery/config
Authorization: Bearer {access_token}

响应数据：
{
  "code": 0,
  "msg": "success",
  "data": {
    "cost_points": 100,
    "prizes": [
      {
        "id": 1,
        "name": "八八折券",
        "angle": 0,
        "is_activity": true,
        "probability": 0
      }
    ]
  }
}
```

#### 执行抽奖
```http
POST /api/lottery/draw
Content-Type: application/json
Authorization: Bearer {access_token}

请求参数：
{
  "draw_type": "single",  // single/triple/five/ten
  "count": 1
}

响应数据：
{
  "code": 0,
  "msg": "抽奖成功",
  "data": {
    "results": [
      {
        "prize_id": 3,
        "prize_name": "甜品1份",
        "angle": 90,
        "is_near_miss": false,
        "points_deducted": 100
      }
    ],
    "remaining_points": 1400,
    "need_slider_verify": false
  }
}
```

### 4.3 商品兑换接口

#### 获取商品列表
```http
GET /api/exchange/products
Authorization: Bearer {access_token}

响应数据：
{
  "code": 0,
  "msg": "success",
  "data": {
    "products": [
      {
        "id": 1,
        "name": "品牌钥匙扣",
        "image": "https://sealos.example.com/products/keychain.jpg",
        "exchange_points": 800,
        "stock": 15,
        "description": "限量版品牌钥匙扣"
      }
      // 总共20件商品
    ]
  }
}
```

#### 兑换商品
```http
POST /api/exchange/redeem
Content-Type: application/json
Authorization: Bearer {access_token}

请求参数：
{
  "product_id": 1,
  "quantity": 1
}

响应数据：
{
  "code": 0,
  "msg": "兑换成功",
  "data": {
    "order_id": "EX202401151430001",
    "points_deducted": 800,
    "remaining_points": 600,
    "remaining_stock": 14
  }
}
```

### 4.4 拍照上传接口

#### 上传照片
```http
POST /api/photo/upload
Content-Type: multipart/form-data
Authorization: Bearer {access_token}

表单数据：
- file: 图片文件
- amount: 88.50

响应数据：
{
  "code": 0,
  "msg": "上传成功",
  "data": {
    "upload_id": 10001,
    "image_url": "https://sealos.example.com/receipts/2024/01/15/xxx.jpg",
    "points_awarded": 885,
    "status": "pending"
  }
}
```

### 4.5 用户中心接口

#### 获取用户统计
```http
GET /api/user/statistics
Authorization: Bearer {access_token}

响应数据：
{
  "code": 0,
  "msg": "success",
  "data": {
    "lottery_count": 15,
    "exchange_count": 3,
    "upload_count": 8
  }
}
```

#### 获取积分明细
```http
GET /api/user/points-records
Authorization: Bearer {access_token}
Query参数：page=1&page_size=20

响应数据：
{
  "code": 0,
  "msg": "success",
  "data": {
    "total": 100,
    "list": [
      {
        "id": 1,
        "title": "抽奖消耗",
        "time": "2024-01-15 14:30",
        "points": 100,
        "type": "expense",
        "balance": 1400
      }
    ]
  }
}
```

### 4.6 商家服务接口

#### 商家认证
```http
POST /api/merchant/auth
Authorization: Bearer {access_token}

响应数据：
{
  "code": 0,
  "msg": "认证成功",
  "data": {
    "merchant_id": 2001,
    "activated_at": "2024-01-15 14:30:00"
  }
}
```

#### 获取审核统计
```http
GET /api/merchant/statistics
Authorization: Bearer {access_token}

响应数据：
{
  "code": 0,
  "msg": "success",
  "data": {
    "pending_count": 12,
    "today_approved": 8,
    "today_rejected": 3
  }
}
```

#### 审核操作
```http
POST /api/merchant/review
Content-Type: application/json
Authorization: Bearer {access_token}

请求参数：
{
  "review_id": 1,
  "action": "approve",  // approve/reject
  "points": 885,
  "reason": "图片不清晰"
}

响应数据：
{
  "code": 0,
  "msg": "审核完成",
  "data": {
    "review_id": 1,
    "result": "approved"
  }
}
```

---

## 🌐 五、WebSocket实时通信

### 5.1 连接配置
```javascript
// WebSocket连接地址格式
wss://your-websocket-server.com/ws?token={access_token}
```

### 5.2 消息格式

#### 库存变更推送
```json
{
  "type": "stock_update",
  "data": {
    "product_id": 1,
    "stock": 14,
    "timestamp": "2024-01-15 14:30:00"
  }
}
```

#### 心跳包
```json
// 客户端发送
{
  "type": "ping"
}

// 服务端响应
{
  "type": "pong",
  "timestamp": 1705301400000
}
```

### 5.3 重连机制
- 断线后自动重连，采用指数退避算法
- 初始延迟：1秒
- 最大延迟：30秒
- 最大重试次数：10次

---

## 🗄️ 六、数据库字段映射

### 6.1 核心数据表

#### users 表
| 字段名 | 类型 | 说明 | 前端使用 |
|--------|------|------|----------|
| user_id | INT | 用户ID | 全局使用 |
| mobile | VARCHAR(11) | 手机号 | 显示脱敏 |
| total_points | INT | 总积分 | 用户中心显示 |
| is_merchant | BOOLEAN | 商家标识 | 权限控制 |
| created_at | TIMESTAMP | 注册时间 | - |

#### lottery_settings 表
| 字段名 | 类型 | 说明 | 前端使用 |
|--------|------|------|----------|
| prize_id | INT | 奖品ID | 抽奖结果匹配 |
| prize_name | VARCHAR | 奖品名称 | 显示奖品 |
| prize_probability | DECIMAL | 概率 | - |
| is_activity | BOOLEAN | 活动限定 | 触发特殊动效 |

#### commodity_pool 表
| 字段名 | 类型 | 说明 | 前端使用 |
|--------|------|------|----------|
| commodity_id | INT | 商品ID | 兑换请求 |
| name | VARCHAR | 商品名称 | 列表显示 |
| exchange_points | INT | 兑换积分 | 积分计算 |
| stock | INT | 库存 | 实时更新 |

#### photo_reviews 表
| 字段名 | 类型 | 说明 | 前端使用 |
|--------|------|------|----------|
| review_id | INT | 审核ID | 审核操作 |
| user_id | INT | 用户ID | - |
| photo_url | VARCHAR | 照片URL | 图片显示 |
| amount | DECIMAL | 消费金额 | 积分计算 |
| points_awarded | INT | 奖励积分 | 显示预计积分 |
| status | ENUM | 审核状态 | 状态显示 |

---

## 🔧 七、环境配置

### 7.1 基础配置
```javascript
// app.js - 全局配置
globalData: {
  baseUrl: 'https://your-backend-api.com',  // TODO: 替换实际API地址
  wsUrl: 'wss://your-websocket-server.com',  // TODO: 替换WebSocket地址
  sealosConfig: {
    endpoint: 'https://your-sealos-endpoint.com',  // TODO: Sealos地址
    bucket: 'restaurant-points-system'  // TODO: 存储桶名称
  }
}
```

### 7.2 TabBar配置

#### 当前开发配置（5个页面）
```json
"tabBar": {
  "color": "#999999",
  "selectedColor": "#FF6B35",
  "backgroundColor": "#ffffff",
  "list": [
    {
      "pagePath": "pages/lottery/lottery",
      "text": "抽奖",
      "iconPath": "images/lottery.png",
      "selectedIconPath": "images/lottery-active.png"
    },
    {
      "pagePath": "pages/exchange/exchange",
      "text": "兑换"
    },
    {
      "pagePath": "pages/camera/camera",
      "text": "拍照"
    },
    {
      "pagePath": "pages/user/user",
      "text": "我的"
    },
    {
      "pagePath": "pages/merchant/merchant",
      "text": "商家"
    }
  ]
}
```

#### 生产配置（3个页面）
```json
"tabBar": {
  "color": "#999999",
  "selectedColor": "#FF6B35",
  "backgroundColor": "#ffffff",
  "list": [
    {
      "pagePath": "pages/lottery/lottery",
      "text": "抽奖",
      "iconPath": "images/lottery.png",
      "selectedIconPath": "images/lottery-active.png"
    },
    {
      "pagePath": "pages/exchange/exchange", 
      "text": "兑换",
      "iconPath": "images/exchange.png",
      "selectedIconPath": "images/exchange-active.png"
    },
    {
      "pagePath": "pages/user/user",
      "text": "我的",
      "iconPath": "images/user.png",
      "selectedIconPath": "images/user-active.png"
    }
  ]
}
```

### 7.3 图标文件需求

#### 所需图标清单
- lottery.png / lottery-active.png（抽奖图标）✅ 已完成
- exchange.png / exchange-active.png（兑换图标）⏳ 待制作
- camera.png / camera-active.png（拍照图标）⏳ 待制作
- user.png / user-active.png（用户图标）⏳ 待制作
- merchant.png / merchant-active.png（商家图标）⏳ 待制作

#### 图标规格
- **尺寸**：81x81像素（推荐）或162x162像素（高清）
- **格式**：PNG格式，支持透明背景
- **颜色**：未激活态 #999999，激活态 #FF6B35
- **大小**：<40KB（微信小程序限制）

### 7.4 Sealos对象存储配置

#### 存储桶结构
```
restaurant-points-system/
├── products/          # 商品图片
│   ├── keychain.jpg
│   ├── cup.jpg
│   └── ...
├── receipts/          # 用户上传小票
│   ├── 2024/
│   │   ├── 01/
│   │   │   ├── 15/
│   │   │   │   └── xxx.jpg
│   └── thumbs/        # 缩略图
└── avatars/           # 用户头像（预留）
```

#### 上传配置
```javascript
const uploadConfig = {
  maxSize: 10 * 1024 * 1024,  // 10MB
  allowTypes: ['image/jpeg', 'image/png', 'image/jpg'],
  compress: {
    quality: 0.8,
    maxWidth: 1920,
    maxHeight: 1920
  }
};
```

---

## 🔐 八、安全机制

### 8.1 认证体系

#### JWT双令牌认证
- **Access Token**：有效期2小时
- **Refresh Token**：有效期7天
- **自动刷新机制**：Token过期时自动调用刷新接口

#### 权限控制
```javascript
// 开发环境：跳过认证检查
checkAuthStatus() {
  return true  // 便于开发测试
}

// 生产环境：严格权限控制
checkAuthStatus() {
  const app = getApp()
  if (app.globalData.needAuth) {
    // 强制手机号绑定
  }
  return true
}
```

### 8.2 请求安全
- **请求头**：Authorization: Bearer {access_token}
- **数据加密**：AES-256加密敏感数据
- **防刷机制**：
  - 单IP限制：60次/分钟
  - 用户限制：3次抽奖/分钟
  - 触发滑块验证

### 8.3 商家权限
- **权限标识**：users.is_merchant字段
- **开发模式**：所有用户可访问商家功能
- **生产模式**：仅认证商家可访问

---

## 📊 九、性能指标与监控

### 9.1 性能标准
- **日均请求**：50万+
- **事务响应**：99.99% <150ms
- **动画流畅度**：0%区域停留≤72ms
- **Canvas渲染**：60FPS稳定

### 9.2 关键监控点
- **转盘动画性能**：requestAnimationFrame监控
- **WebSocket连接状态**：实时库存同步
- **图片上传速度**：Sealos存储响应时间
- **API响应时间**：各接口耗时统计

---

## 🚀 十、错误处理与调试

### 10.1 错误码规范
| 错误码 | 说明 | 处理方式 |
|--------|------|----------|
| 0 | 成功 | - |
| 1001 | 参数错误 | 提示用户检查输入 |
| 1002 | 未登录/Token过期 | 自动刷新Token |
| 1003 | 权限不足 | 提示无权限 |
| 2001 | 积分不足 | 显示积分不足提示 |
| 2002 | 库存不足 | 禁用兑换按钮 |
| 2003 | 超过单日消耗上限 | 显示限制提示 |
| 3001 | 需要滑块验证 | 弹出滑块验证 |
| 5001 | 服务器错误 | 提示系统繁忙 |

### 10.2 调试支持
- **Mock数据**：代码中包含完整模拟数据
- **日志输出**：关键操作有console.log输出
- **降级机制**：API失败时使用本地逻辑

### 10.3 开发工具
- **搜索Mock点**：搜索 `// 模拟数据` 找到所有Mock点
- **TODO标记**：搜索 `// TODO:` 找到需要对接的地方
- **注释恢复**：生产环境时取消注释恢复功能

---

## 📋 十一、上线前检查清单

### 11.1 配置检查
- [ ] 修改app.js中的baseUrl为生产环境地址
- [ ] 修改WebSocket连接地址
- [ ] 配置Sealos对象存储参数
- [ ] 移除所有Mock数据和TODO注释

### 11.2 功能检查
- [ ] 测试Token自动刷新机制
- [ ] 测试WebSocket断线重连
- [ ] 测试图片上传和显示
- [ ] 验证所有API接口联通性
- [ ] 检查错误处理和用户提示
- [ ] 性能测试（特别是Canvas动画）

### 11.3 权限控制恢复
- [ ] 恢复所有页面的 `checkAuthStatus()` 函数
- [ ] 恢复 `app.js` 中的全局认证检查
- [ ] 恢复商家功能的权限判断逻辑
- [ ] 调整模拟用户数据中的 `is_merchant` 字段

### 11.4 图标和资源
- [ ] 确认所需图标文件已制作完成
- [ ] 恢复 `app.json` 中的完整 tabBar 配置
- [ ] 测试底部导航栏图标显示和切换效果
- [ ] 验证图标在不同设备上的清晰度
- [ ] 清理临时文件和开发文档

### 11.5 TabBar配置切换
- [ ] 决定生产环境是否包含商家页面在TabBar
- [ ] 如需隐藏商家功能，改为用户中心内跳转
- [ ] 测试普通用户和商家用户的不同体验

---

## 🎯 十二、系统核心价值

### 12.1 商业闭环设计
- **双通道积分消耗**：
  - 概率消耗（抽奖）
  - 确定性消耗（兑换20件限量商品）
- **高价值锚点**：2000分定制围裙等稀缺商品

### 12.2 技术突破
- **动态概率热更新**：≤50ms生效
- **实时库存同步**：WebSocket维持20件商品状态
- **动效体验升级**：量化边界抖动（±5°）提升情感化反馈

### 12.3 创新亮点
1. **动效情感化设计**：
   - 量化"差点中奖"边界（±5°）
   - 滑移过渡消除跳区生硬感

2. **双维度控制**：
   - 概率热更新（≤50ms）
   - 库存WebSocket秒级同步

3. **严格限制体系**：
   - 20件礼品总量恒定
   - 单日积分消耗上限5000分

---

## 📚 十三、开发指南

### 13.1 快速开始
1. **克隆项目**：获取完整代码
2. **安装依赖**：确保Vant Weapp正确引入
3. **配置环境**：修改app.js中的API地址
4. **启动调试**：所有页面已包含Mock数据

### 13.2 页面开发顺序建议
1. **抽奖页面**：✅ 已完成（包含完整Canvas转盘）
2. **兑换页面**：✅ 已完成（20件商品网格布局）
3. **拍照页面**：✅ 已完成（图片裁剪+积分计算）
4. **用户中心**：✅ 已完成（统计数据+积分管理）
5. **商家服务**：✅ 已完成（审核管理+权限控制）

### 13.3 常见问题解决
- **图标不显示**：检查images目录和app.json配置
- **API调用失败**：使用Mock数据保证页面正常
- **Canvas不渲染**：检查基础库版本≥2.15.0
- **WebSocket断线**：实现自动重连机制

---

## 📝 十四、更新日志

### v1.0.0 (2024-12-19)
- ✅ 完成5个主体功能页面开发
- ✅ 实现完整的Canvas转盘抽奖功能
- ✅ 建立WebSocket实时库存同步
- ✅ 封存手机号绑定功能（便于开发测试）
- ✅ 扩展TabBar支持所有功能页面访问
- ✅ 建立开发/生产环境权限控制机制

### 技术债务
- ⏳ 补全TabBar图标文件（4/5已完成）
- ⏳ 完善API接口对接
- ⏳ 性能优化和压力测试

---

**文档维护者**：前端开发团队  
**最后更新**：2024年12月19日  
**文档版本**：v1.0.0  

---

> 💡 **温馨提示**：本文档整合了项目的架构设计、开发规范、API接口、代码实现等全方位信息。建议开发团队根据实际进度及时更新相关内容。 
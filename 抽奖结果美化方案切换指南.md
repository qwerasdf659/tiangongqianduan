# ğŸ¨ æŠ½å¥–ç»“æœç¾åŒ–æ–¹æ¡ˆåˆ‡æ¢æŒ‡å—

## ğŸ“‹ å¯ç”¨æ–¹æ¡ˆæ€»è§ˆ

æ‚¨ç°åœ¨æ‹¥æœ‰ **3ç§ç²¾ç¾çš„æŠ½å¥–ç»“æœæ˜¾ç¤ºæ–¹æ¡ˆ**ï¼Œå¯ä»¥éšæ—¶åˆ‡æ¢ï¼š

| æ–¹æ¡ˆ | ä»£ç å€¼ | é£æ ¼ç‰¹ç‚¹ | é€‚ç”¨åœºæ™¯ |
|------|--------|----------|----------|
| ğŸŒŸ **æ–¹æ¡ˆ1ï¼šå¡ç‰‡æ¸å˜** | `gradient` | ç°ä»£ç²¾ç¾ï¼Œæ¸å˜æ•ˆæœï¼Œå‘å…‰åŠ¨ç”» | é‡è§†è§†è§‰å†²å‡»åŠ›ï¼Œé«˜ç«¯å“ç‰Œ |
| ğŸª **æ–¹æ¡ˆ3ï¼šæ¬¢åº†åŠ¨ç”»** | `celebration` | åº†ç¥åŠ¨æ•ˆï¼Œå½©è™¹è¾¹æ¡†ï¼ŒåŠ¨æ€è¡¨æƒ… | å¢å¼ºä¸­å¥–å–œæ‚¦æ„Ÿï¼Œæ´»è·ƒæ°›å›´ |
| ğŸ **æ–¹æ¡ˆ5ï¼šç½‘æ ¼ç€‘å¸ƒ** | `waterfall` | ç´§å‡‘å¸ƒå±€ï¼Œç€‘å¸ƒæµï¼ŒèŠ‚çœç©ºé—´ | ä¿¡æ¯å¯†åº¦è¦æ±‚é«˜ï¼Œç§»åŠ¨ç«¯å‹å¥½ |

## ğŸ”„ åˆ‡æ¢æ–¹æ³•

### æ–¹æ³•1ï¼šåœ¨JSä»£ç ä¸­è®¾ç½®ï¼ˆæ¨èï¼‰

åœ¨ `pages/lottery/lottery.js` æ–‡ä»¶çš„ `data` éƒ¨åˆ†æ·»åŠ ï¼š

```javascript
Page({
  data: {
    // å…¶ä»–æ•°æ®...
    
    // ğŸ¨ è®¾ç½®æŠ½å¥–ç»“æœæ˜¾ç¤ºæ¨¡å¼
    // å¯é€‰å€¼ï¼š'gradient'(å¡ç‰‡æ¸å˜) | 'celebration'(æ¬¢åº†åŠ¨ç”») | 'waterfall'(ç½‘æ ¼ç€‘å¸ƒ)
    resultDisplayMode: 'gradient', // é»˜è®¤ä½¿ç”¨æ–¹æ¡ˆ1
    
    // å…¶ä»–æ•°æ®...
  },
  // å…¶ä»–æ–¹æ³•...
})
```

### æ–¹æ³•2ï¼šåŠ¨æ€åˆ‡æ¢

å¦‚æœæƒ³æ ¹æ®æ¡ä»¶åŠ¨æ€åˆ‡æ¢æ–¹æ¡ˆï¼Œå¯ä»¥åœ¨é€‚å½“çš„æ–¹æ³•ä¸­è®¾ç½®ï¼š

```javascript
// ç¤ºä¾‹ï¼šæ ¹æ®ä¸­å¥–æ•°é‡é€‰æ‹©æ˜¾ç¤ºæ–¹æ¡ˆ
showDrawResult(results) {
  let displayMode = 'gradient'; // é»˜è®¤æ–¹æ¡ˆ1
  
  if (results.length >= 5) {
    displayMode = 'waterfall'; // å¤šä¸ªç»“æœæ—¶ä½¿ç”¨ç€‘å¸ƒæµ
  } else if (results.some(r => !r.is_near_miss)) {
    displayMode = 'celebration'; // æœ‰ä¸­å¥–æ—¶ä½¿ç”¨åº†ç¥åŠ¨ç”»
  }
  
  this.setData({
    showResult: true,
    resultData: results,
    resultDisplayMode: displayMode
  });
}
```

### æ–¹æ³•3ï¼šæ ¹æ®ç”¨æˆ·è®¾ç½®

```javascript
// ç¤ºä¾‹ï¼šä»ç”¨æˆ·è®¾ç½®ä¸­è¯»å–åå¥½
onLoad() {
  const userPreference = wx.getStorageSync('resultDisplayMode') || 'gradient';
  this.setData({
    resultDisplayMode: userPreference
  });
}

// ä¿å­˜ç”¨æˆ·åå¥½
saveDisplayPreference(mode) {
  wx.setStorageSync('resultDisplayMode', mode);
  this.setData({
    resultDisplayMode: mode
  });
}
```

## ğŸ¯ å¿«é€Ÿåˆ‡æ¢ä»£ç 

### åˆ‡æ¢åˆ°æ–¹æ¡ˆ1ï¼ˆå¡ç‰‡æ¸å˜ï¼‰
```javascript
this.setData({
  resultDisplayMode: 'gradient'
});
```

### åˆ‡æ¢åˆ°æ–¹æ¡ˆ3ï¼ˆæ¬¢åº†åŠ¨ç”»ï¼‰
```javascript
this.setData({
  resultDisplayMode: 'celebration'
});
```

### åˆ‡æ¢åˆ°æ–¹æ¡ˆ5ï¼ˆç½‘æ ¼ç€‘å¸ƒï¼‰
```javascript
this.setData({
  resultDisplayMode: 'waterfall'
});
```

## ğŸ› ï¸ è‡ªå®šä¹‰é…ç½®

### ä¸ºä¸åŒç”¨æˆ·ç¾¤ä½“è®¾ç½®ä¸åŒæ–¹æ¡ˆ

```javascript
// æ ¹æ®ç”¨æˆ·ç±»å‹è®¾ç½®æ˜¾ç¤ºæ–¹æ¡ˆ
getUserDisplayMode() {
  const userLevel = this.data.userInfo.level || 'normal';
  
  switch(userLevel) {
    case 'vip':
      return 'celebration'; // VIPç”¨æˆ·ä½¿ç”¨åº†ç¥åŠ¨ç”»
    case 'premium':
      return 'gradient';    // é«˜çº§ç”¨æˆ·ä½¿ç”¨å¡ç‰‡æ¸å˜
    default:
      return 'waterfall';   // æ™®é€šç”¨æˆ·ä½¿ç”¨ç€‘å¸ƒæµ
  }
}
```

### æ ¹æ®è®¾å¤‡ç±»å‹ä¼˜åŒ–

```javascript
// æ ¹æ®è®¾å¤‡æ€§èƒ½é€‰æ‹©æ–¹æ¡ˆ
getOptimalDisplayMode() {
  const systemInfo = wx.getSystemInfoSync();
  
  // ä½ç«¯è®¾å¤‡ä½¿ç”¨ç®€æ´çš„ç€‘å¸ƒæµ
  if (systemInfo.platform === 'android' && systemInfo.system.includes('6.')) {
    return 'waterfall';
  }
  
  // é«˜ç«¯è®¾å¤‡ä½¿ç”¨åŠ¨ç”»æ–¹æ¡ˆ
  return 'celebration';
}
```

## ğŸ¨ æ–¹æ¡ˆè¯¦ç»†å¯¹æ¯”

### ğŸŒŸ æ–¹æ¡ˆ1ï¼šå¡ç‰‡æ¸å˜
**ä¼˜åŠ¿ï¼š**
- âœ¨ è§†è§‰æ•ˆæœæœ€ä½³ï¼Œé«˜ç«¯å¤§æ°”
- ğŸ¨ ç²¾ç¾çš„æ¸å˜å’Œå…‰æ•ˆ
- ğŸ† çªå‡ºä¸­å¥–çš„ä¸“å±æ„Ÿ

**é€‚ç”¨ï¼š**
- é«˜ç«¯å“ç‰Œå®šä½
- é‡è§†è§†è§‰ä½“éªŒçš„åœºæ™¯
- å•æ¬¡æŠ½å¥–ç»“æœä¸å¤šæ—¶

### ğŸª æ–¹æ¡ˆ3ï¼šæ¬¢åº†åŠ¨ç”»
**ä¼˜åŠ¿ï¼š**
- ğŸŠ åŠ¨ç”»æ•ˆæœä¸°å¯Œï¼Œåº†ç¥æ„Ÿå¼º
- ğŸŒˆ å½©è™¹è‰²å½©ï¼Œæ´»è·ƒæ°›å›´
- ğŸ’« å¼ºåŒ–ä¸­å¥–çš„å–œæ‚¦ä½“éªŒ

**é€‚ç”¨ï¼š**
- èŠ‚æ—¥æ´»åŠ¨æœŸé—´
- å¹´è½»ç”¨æˆ·ç¾¤ä½“
- éœ€è¦æ´»è·ƒæ°›å›´çš„åœºæ™¯

### ğŸ æ–¹æ¡ˆ5ï¼šç½‘æ ¼ç€‘å¸ƒ
**ä¼˜åŠ¿ï¼š**
- ğŸ“± ç§»åŠ¨ç«¯å‹å¥½ï¼Œç©ºé—´åˆ©ç”¨ç‡é«˜
- âš¡ æ€§èƒ½ä¼˜ç§€ï¼ŒåŠ è½½å¿«é€Ÿ
- ğŸ“Š ä¿¡æ¯å¯†åº¦é«˜ï¼Œä¸€å±æ˜¾ç¤ºæ›´å¤š

**é€‚ç”¨ï¼š**
- å¤šè¿æŠ½ç»“æœæ˜¾ç¤º
- æ‰‹æœºå±å¹•è¾ƒå°çš„ç”¨æˆ·
- è¿½æ±‚ç®€æ´é«˜æ•ˆçš„åœºæ™¯

## ğŸ”§ æŠ€æœ¯è¯´æ˜

### æ¡ä»¶æ¸²æŸ“åŸç†
```xml
<!-- WXMLä¸­çš„æ¡ä»¶æ¸²æŸ“ -->
<view wx:if="{{resultDisplayMode === 'gradient' || !resultDisplayMode}}">
  <!-- æ–¹æ¡ˆ1å†…å®¹ -->
</view>

<view wx:if="{{resultDisplayMode === 'celebration'}}">
  <!-- æ–¹æ¡ˆ3å†…å®¹ -->
</view>

<view wx:if="{{resultDisplayMode === 'waterfall'}}">
  <!-- æ–¹æ¡ˆ5å†…å®¹ -->
</view>
```

### æ€§èƒ½ä¼˜åŒ–
- ä½¿ç”¨ `wx:if` è€Œé `hidden`ï¼Œç¡®ä¿æœªæ˜¾ç¤ºçš„æ–¹æ¡ˆä¸ä¼šæ¸²æŸ“
- æ¯ç§æ–¹æ¡ˆçš„CSSæ ·å¼ç‹¬ç«‹ï¼Œä¸ä¼šç›¸äº’å½±å“
- åŠ¨ç”»ä½¿ç”¨ç¡¬ä»¶åŠ é€Ÿï¼Œä¿è¯æµç•…åº¦

## ğŸš¨ æ³¨æ„äº‹é¡¹

1. **é»˜è®¤è¡Œä¸º**ï¼šå¦‚æœä¸è®¾ç½® `resultDisplayMode`ï¼Œå°†è‡ªåŠ¨ä½¿ç”¨æ–¹æ¡ˆ1ï¼ˆå¡ç‰‡æ¸å˜ï¼‰

2. **æ•°æ®æ ¼å¼**ï¼šæ‰€æœ‰æ–¹æ¡ˆä½¿ç”¨ç›¸åŒçš„æ•°æ®æ ¼å¼ï¼Œæ— éœ€ä¿®æ”¹ `resultData`

3. **å…¼å®¹æ€§**ï¼šæ‰€æœ‰æ–¹æ¡ˆéƒ½ç»è¿‡å¾®ä¿¡å°ç¨‹åºå…¼å®¹æ€§æµ‹è¯•

4. **æ€§èƒ½**ï¼šå»ºè®®æ ¹æ®å®é™…ä½¿ç”¨æƒ…å†µé€‰æ‹©åˆé€‚çš„æ–¹æ¡ˆï¼š
   - æ€§èƒ½ä¼˜å…ˆï¼šæ–¹æ¡ˆ5ï¼ˆç€‘å¸ƒæµï¼‰
   - è§†è§‰ä¼˜å…ˆï¼šæ–¹æ¡ˆ1ï¼ˆå¡ç‰‡æ¸å˜ï¼‰
   - ä½“éªŒä¼˜å…ˆï¼šæ–¹æ¡ˆ3ï¼ˆæ¬¢åº†åŠ¨ç”»ï¼‰

## ğŸ¯ æœ€ä½³å®è·µ

### æ™ºèƒ½åˆ‡æ¢ç­–ç•¥
```javascript
// æ¨èçš„æ™ºèƒ½åˆ‡æ¢é€»è¾‘
getRecommendedDisplayMode(results) {
  const resultCount = results.length;
  const hasWin = results.some(r => !r.is_near_miss);
  
  // å¤šä¸ªç»“æœæ—¶ä¼˜å…ˆä½¿ç”¨ç€‘å¸ƒæµ
  if (resultCount >= 4) {
    return 'waterfall';
  }
  
  // æœ‰ä¸­å¥–æ—¶ä½¿ç”¨åº†ç¥åŠ¨ç”»
  if (hasWin) {
    return 'celebration';
  }
  
  // é»˜è®¤ä½¿ç”¨å¡ç‰‡æ¸å˜
  return 'gradient';
}
```

### A/Bæµ‹è¯•é…ç½®
```javascript
// å¯ä»¥ç”¨äºA/Bæµ‹è¯•çš„é…ç½®
const AB_TEST_CONFIG = {
  control: 'gradient',    // å¯¹ç…§ç»„
  variant_a: 'celebration', // å˜ä½“A
  variant_b: 'waterfall'    // å˜ä½“B
};

// æ ¹æ®ç”¨æˆ·IDåˆ†é…æµ‹è¯•ç»„
const testGroup = this.data.userInfo.id % 3;
const displayMode = Object.values(AB_TEST_CONFIG)[testGroup];
```

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚éœ€è‡ªå®šä¹‰å…¶ä»–æ˜¾ç¤ºæ–¹æ¡ˆæˆ–æœ‰ä»»ä½•é—®é¢˜ï¼Œè¯·è”ç³»å¼€å‘å›¢é˜Ÿã€‚

**å½“å‰ç‰ˆæœ¬ï¼š** v1.0.0  
**æ›´æ–°æ—¶é—´ï¼š** 2024å¹´  
**å…¼å®¹æ€§ï¼š** å¾®ä¿¡å°ç¨‹åºåŸºç¡€åº“ 2.0+ 
# 后端客服功能删除需求文档

## 📋 需求概述
前端已删除抽奖页面的客服按钮功能，请后端开发人员配合删除相关的后端功能、API接口、数据库数据等。

## 🎯 删除范围

### 1. API接口删除
**需要检查并删除以下可能的客服相关API：**

- [ ] `GET /api/customer-service/info` - 获取客服信息接口
- [ ] `POST /api/customer-service/contact` - 联系客服记录接口  
- [ ] `GET /api/customer-service/config` - 客服配置获取接口
- [ ] `POST /api/customer-service/feedback` - 客服反馈提交接口
- [ ] `GET /api/customer-service/history` - 客服历史记录接口

### 2. 数据库表清理
**需要检查并删除以下可能的数据表或字段：**

#### 客服相关表
- [ ] `customer_service_contacts` - 客服联系记录表
- [ ] `customer_service_config` - 客服配置表
- [ ] `customer_service_feedback` - 客服反馈表
- [ ] `customer_service_logs` - 客服日志表

#### 用户表相关字段
- [ ] `users.last_contact_service_time` - 最后联系客服时间
- [ ] `users.service_contact_count` - 联系客服次数
- [ ] `users.preferred_service_method` - 首选客服方式

### 3. 配置文件清理
**需要删除的配置项：**

- [ ] 客服电话配置 `CUSTOMER_SERVICE_PHONE`
- [ ] 客服工作时间配置 `SERVICE_WORK_HOURS`
- [ ] 客服邮箱配置 `SERVICE_EMAIL`
- [ ] 在线客服配置 `ONLINE_SERVICE_URL`

### 4. 业务逻辑清理
**需要删除的业务模块：**

- [ ] 客服服务层代码 `CustomerServiceService`
- [ ] 客服控制器 `CustomerServiceController`
- [ ] 客服相关中间件
- [ ] 客服统计计算逻辑

### 5. 第三方集成清理
**需要检查是否有以下集成需要删除：**

- [ ] 在线客服系统集成（如客服宝、环信等）
- [ ] 客服工单系统集成
- [ ] 客服统计分析工具集成
- [ ] 客服聊天记录存储服务

## 🔍 数据备份要求

**删除前必须完成的数据备份：**

1. **重要数据备份**
   - 备份所有客服相关表的数据
   - 备份用户联系客服的历史记录
   - 备份客服配置信息

2. **备份文件命名规范**
   - `customer_service_backup_YYYYMMDD.sql`
   - 存储位置：`/backup/customer_service/`

## ⚠️ 安全注意事项

1. **数据清理验证**
   - 确认删除的数据表中没有与其他业务模块关联的重要数据
   - 检查外键约束，避免删除导致其他功能异常

2. **API下线流程**
   - 先将客服相关API设置为维护状态
   - 确认前端已完全不调用这些API后再删除
   - 更新API文档，移除客服相关接口说明

3. **配置删除顺序**
   - 先删除业务逻辑代码
   - 再删除数据库表和字段
   - 最后清理配置文件

## 📝 删除验证清单

**删除完成后需要验证：**

- [ ] 抽奖功能正常运行，不受客服功能删除影响
- [ ] 用户积分系统正常
- [ ] 数据库查询性能未受影响
- [ ] 服务器日志中无客服相关错误
- [ ] API文档已更新
- [ ] 系统监控告警正常

## 🚀 删除步骤建议

### 第一阶段：准备工作
1. 数据备份
2. API下线准备
3. 依赖关系梳理

### 第二阶段：代码删除
1. 删除控制器和服务层代码
2. 删除中间件和工具类
3. 更新路由配置

### 第三阶段：数据清理
1. 删除数据库表
2. 清理配置文件
3. 清理第三方集成

### 第四阶段：验证测试
1. 功能测试
2. 性能测试
3. 安全测试

## 📞 联系方式
如有疑问，请联系前端开发团队确认删除范围和影响评估。

---

**文档版本：** V1.0  
**创建时间：** {当前时间}  
**创建人：** 前端开发团队  
**审核状态：** 待后端确认 
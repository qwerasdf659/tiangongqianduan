# é¤å…ç§¯åˆ†æŠ½å¥–ç³»ç»Ÿ - å‰ç«¯å¼€å‘æŒ‡å¯¼3å·

> **æ·±åº¦ä»£ç åˆ†æç‰ˆå‰ç«¯å¼€å‘å®Œæ•´æŒ‡å—** - åŸºäºé¡¹ç›®å…¨æ ˆä»£ç æ·±åº¦åˆ†æçš„åç«¯å¯¹æ¥å®æˆ˜æŒ‡å¯¼

## ğŸ“‹ æ–‡æ¡£æ¦‚è¿°

æœ¬æ–‡æ¡£åŸºäºå¯¹é¡¹ç›®å‰ç«¯ä»£ç çš„**æ·±åº¦åˆ†æ**ï¼Œç»“åˆå·²æœ‰å¼€å‘æ–‡æ¡£çš„æœ€ä½³å®è·µï¼Œæä¾›å®Œæ•´çš„å‰åç«¯å¯¹æ¥æŒ‡å¯¼ã€‚é‡ç‚¹å…³æ³¨**å®é™…ä»£ç å®ç°ã€æ•°æ®åº“è®¾è®¡ã€APIæ¥å£è§„èŒƒ**å’Œ**å…³é”®é—®é¢˜è§£å†³æ–¹æ¡ˆ**ã€‚

**æ–‡æ¡£ç‰ˆæœ¬**ï¼šv3.0  
**åˆ›å»ºæ—¶é—´**ï¼š2024å¹´12æœˆ19æ—¥  
**é€‚ç”¨åœºæ™¯**ï¼šå‰åç«¯å¯¹æ¥ã€ç”Ÿäº§éƒ¨ç½²ã€ä»£ç ç»´æŠ¤  
**æŠ€æœ¯æ ˆ**ï¼šå¾®ä¿¡å°ç¨‹åº + Node.js + MySQL + Sealosäº‘åŸç”Ÿ  

---

## ğŸ—ï¸ ä¸€ã€é¡¹ç›®æ¶æ„æ·±åº¦è§£æ

### 1.1 æ ¸å¿ƒæ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   å¾®ä¿¡å°ç¨‹åºç«¯    â”‚â—„â”€â”€â–ºâ”‚   åç«¯APIæœåŠ¡    â”‚â—„â”€â”€â–ºâ”‚    æ•°æ®åº“é›†ç¾¤    â”‚
â”‚                â”‚    â”‚                â”‚    â”‚                â”‚
â”‚ â€¢ ç”¨æˆ·ç•Œé¢å±‚     â”‚    â”‚ â€¢ ä¸šåŠ¡é€»è¾‘å±‚     â”‚    â”‚ â€¢ MySQLä¸»ä»     â”‚
â”‚ â€¢ çŠ¶æ€ç®¡ç†       â”‚    â”‚ â€¢ æ•°æ®è®¿é—®å±‚     â”‚    â”‚ â€¢ Redisç¼“å­˜     â”‚
â”‚ â€¢ WebSocket     â”‚    â”‚ â€¢ WebSocket     â”‚    â”‚ â€¢ Sealoså­˜å‚¨    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.2 å…³é”®æ–‡ä»¶ç»„ç»‡ç»“æ„

```
é¡¹ç›®æ ¹ç›®å½•/
â”œâ”€â”€ app.js                          # ğŸ”´ å…¨å±€é…ç½®ä¸­å¿ƒ
â”œâ”€â”€ app.json                        # å°ç¨‹åºé…ç½®
â”œâ”€â”€ config/
â”‚   â””â”€â”€ env.js                     # ğŸ”´ ç¯å¢ƒé…ç½®ç®¡ç†
â”œâ”€â”€ utils/
â”‚   â”œâ”€â”€ api.js                     # ğŸ”´ APIæ¥å£å°è£…
â”‚   â”œâ”€â”€ ws.js                      # ğŸ”´ WebSocketç®¡ç†
â”‚   â”œâ”€â”€ validate.js                # æ•°æ®éªŒè¯å·¥å…·
â”‚   â””â”€â”€ util.js                    # é€šç”¨å·¥å…·å‡½æ•°
â”œâ”€â”€ pages/
â”‚   â”œâ”€â”€ lottery/                   # ğŸ”´ æŠ½å¥–æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ lottery.js            # è½¬ç›˜é€»è¾‘(1299è¡Œ)
â”‚   â”‚   â”œâ”€â”€ lottery.wxml          # è½¬ç›˜ç•Œé¢
â”‚   â”‚   â””â”€â”€ lottery.wxss          # Canvasæ ·å¼
â”‚   â”œâ”€â”€ exchange/                  # ğŸ”´ å•†å“å…‘æ¢æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ exchange.js           # å…‘æ¢é€»è¾‘
â”‚   â”‚   â”œâ”€â”€ exchange.wxml         # å•†å“ç•Œé¢
â”‚   â”‚   â””â”€â”€ exchange.wxss         # ç½‘æ ¼å¸ƒå±€
â”‚   â”œâ”€â”€ camera/                    # ğŸ”´ æ‹ç…§ä¸Šä¼ æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ camera.js             # å›¾ç‰‡ä¸Šä¼ 
â”‚   â”‚   â””â”€â”€ camera.wxml           # æ‹ç…§ç•Œé¢
â”‚   â”œâ”€â”€ merchant/                  # ğŸ”´ å•†å®¶ç®¡ç†æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ merchant.js           # å®¡æ ¸é€»è¾‘(2100è¡Œ)
â”‚   â”‚   â””â”€â”€ merchant.wxml         # ç®¡ç†ç•Œé¢
â”‚   â””â”€â”€ user/                      # ç”¨æˆ·ä¸­å¿ƒ
â”‚       â”œâ”€â”€ user.js               # ä¸ªäººä¿¡æ¯
â”‚       â””â”€â”€ user.wxml             # ç”¨æˆ·ç•Œé¢
â””â”€â”€ components/
    â””â”€â”€ auth-modal/                # è®¤è¯å¼¹çª—ç»„ä»¶
```

---

## ğŸ”Œ äºŒã€æ ¸å¿ƒå¯¹æ¥ç‚¹å®æˆ˜è§£æ

### 2.1 ç¯å¢ƒé…ç½®ç³»ç»Ÿ (config/env.js)

#### ğŸ”´ å¤šç¯å¢ƒç®¡ç†æœºåˆ¶
```javascript
// config/env.js - æ™ºèƒ½ç¯å¢ƒåˆ‡æ¢
const ENV = {
  development: {
    baseUrl: 'http://localhost:3000/api',
    wsUrl: 'ws://localhost:3000',
    isDev: true,
    needAuth: false
  },
  testing: {
    baseUrl: 'https://gynjeecyhgvo.sealoshzh.site/api',
    wsUrl: 'wss://gynjeecyhgvo.sealoshzh.site',
    isDev: false,
    needAuth: true
  },
  production: {
    baseUrl: 'https://gynjeecyhgvo.sealoshzh.site/api',
    wsUrl: 'wss://gynjeecyhgvo.sealoshzh.site',
    isDev: false,
    needAuth: true
  }
}

// ğŸš¨ éƒ¨ç½²æ—¶ä¿®æ”¹è¿™é‡Œ
let CURRENT_ENV = 'development'
```

#### ğŸ”´ Sealoså¯¹è±¡å­˜å‚¨é…ç½®
```javascript
sealosConfig: {
  endpoint: 'https://objectstorageapi.bja.sealos.run',
  bucket: 'tiangong',
  accessKeyId: 'br0za7uc',          // ğŸ”´ ç”Ÿäº§ç¯å¢ƒéœ€è¦æ›¿æ¢
  secretAccessKey: 'skxg8mk5gqfhf9xz',  // ğŸ”´ ç”Ÿäº§ç¯å¢ƒéœ€è¦æ›¿æ¢
  region: 'bja'
}
```

### 2.2 æ™ºèƒ½APIè°ƒç”¨ç³»ç»Ÿ (utils/api.js)

#### ğŸ”´ è‡ªåŠ¨Mock/çœŸå®æ¥å£åˆ‡æ¢
```javascript
// utils/api.js - 984è¡Œæ ¸å¿ƒä»£ç åˆ†æ
const shouldUseMock = () => {
  return app.globalData.isDev && !app.globalData.needAuth
}

const smartApiCall = (realApiCall, mockData = {}) => {
  if (shouldUseMock()) {
    // å¼€å‘ç¯å¢ƒè¿”å›Mockæ•°æ®
    return new Promise((resolve) => {
      setTimeout(() => {
        resolve({
          code: 0,
          message: 'success',
          data: mockData
        })
      }, Math.random() * 1000 + 200) // æ¨¡æ‹Ÿç½‘ç»œå»¶è¿Ÿ
    })
  } else {
    // ç”Ÿäº§ç¯å¢ƒè°ƒç”¨çœŸå®API
    return realApiCall()
  }
}
```

#### ğŸ”´ å¢å¼ºç‰ˆç½‘ç»œè¯·æ±‚å°è£…
```javascript
const request = (options) => {
  return new Promise((resolve, reject) => {
    const {
      url,
      method = 'GET',
      data = {},
      needAuth = true,
      showLoading = true,
      retryCount = 0,
      maxRetry = 2
    } = options

    // æ„å»ºè¯·æ±‚å¤´
    const header = {
      'Content-Type': 'application/json'
    }

    // ğŸ”´ è‡ªåŠ¨æ·»åŠ è®¤è¯å¤´
    if (needAuth && app.globalData.accessToken) {
      header['Authorization'] = `Bearer ${app.globalData.accessToken}`
    }

    wx.request({
      url: app.globalData.baseUrl + url,
      method,
      data,
      header,
      success(res) {
        // ğŸ”´ ç»Ÿä¸€é”™è¯¯å¤„ç†
        if (res.statusCode === 200) {
          if (res.data.code === 0) {
            resolve(res.data)
          } else if (res.data.code === 401) {
            // Tokenè¿‡æœŸï¼Œè‡ªåŠ¨åˆ·æ–°
            if (retryCount < maxRetry) {
              app.refreshToken().then(() => {
                request({ ...options, retryCount: retryCount + 1 })
                  .then(resolve).catch(reject)
              }).catch(() => {
                app.logout()
                reject(res.data)
              })
            }
          }
        }
      }
    })
  })
}
```

### 2.3 æŠ½å¥–ç³»ç»Ÿæ ¸å¿ƒå®ç° (pages/lottery/lottery.js)

#### ğŸ”´ æŠ½å¥–é…ç½®åŠ è½½ (ç¬¬358è¡Œ)
```javascript
// lottery.js - 1299è¡Œæ ¸å¿ƒä»£ç åˆ†æ
loadLotteryConfig() {
  // API: GET /api/lottery/config
  let configPromise = app.globalData.isDev ? 
    mockRequest('/api/lottery/config') : 
    lotteryAPI.getConfig()

  configPromise.then((configData) => {
    if (configData && configData.data) {
      const prizes = configData.data.prizes || []
      
      this.setData({
        prizes: prizes,
        costPoints: configData.data.cost_points || 100,
        dailyLimit: configData.data.daily_limit || 10
      })
      
      // ğŸ”´ åç«¯å¿…é¡»è¿”å›çš„æ•°æ®æ ¼å¼ï¼š
      /* {
        "code": 0,
        "data": {
          "prizes": [
            {
              "id": 1,
              "name": "å…«å…«æŠ˜åˆ¸",
              "angle": 0,              // Canvasè½¬ç›˜è§’åº¦ (0-315)
              "color": "#FF6B35",      // æ‰‡å½¢é¢œè‰²
              "probability": 0.05,     // ä¸­å¥–æ¦‚ç‡
              "is_activity": true,     // ç‰¹æ®ŠåŠ¨æ•ˆæ ‡è®°
              "type": "coupon",
              "value": 0.88
            }
          ],
          "cost_points": 100,          // å•æ¬¡æ¶ˆè€—ç§¯åˆ†
          "daily_limit": 10
        }
      } */
    }
  })
}
```

#### ğŸ”´ Canvasè½¬ç›˜ç»˜åˆ¶ä¼˜åŒ– (ç¬¬500è¡Œ)
```javascript
drawWheel() {
  const ctx = this.canvasCtx
  const centerX = 130, centerY = 130
  const outerRadius = 125, innerRadius = 45  // ä¸ºä¸­å¤®æŒ‰é’®é¢„ç•™ç©ºé—´
  
  const prizes = this.data.prizes
  const anglePerPrize = (2 * Math.PI) / prizes.length

  // ç»˜åˆ¶å¥–å“æ‰‡å½¢
  for (let i = 0; i < prizes.length; i++) {
    const prize = prizes[i]
    const startAngle = i * anglePerPrize
    const endAngle = (i + 1) * anglePerPrize

    // ğŸ”´ é‡è¦ï¼šç»˜åˆ¶ä¸­å¤®é€æ˜åŒºåŸŸç¡®ä¿æŒ‰é’®å¯è§
    ctx.globalCompositeOperation = 'destination-out'
    ctx.beginPath()
    ctx.arc(0, 0, innerRadius - 5, 0, 2 * Math.PI)
    ctx.fill()
  }
}
```

#### ğŸ”´ æŠ½å¥–æ‰§è¡Œæµç¨‹ (ç¬¬792è¡Œ)
```javascript
startDrawing(drawType, count, needPoints) {
  // API: POST /api/lottery/draw
  // Body: { "draw_type": "single|triple|five|ten", "count": 1 }
  
  this.setData({ isDrawing: true })
  wx.showLoading({ title: 'æŠ½å¥–ä¸­...' })

  lotteryAPI.draw(drawType, count).then((drawResult) => {
    // ğŸ”´ åç«¯å¿…é¡»è¿”å›æ ¼å¼ï¼š
    /* {
      "code": 0,
      "data": {
        "results": [
          {
            "prize_id": 1,
            "prize_name": "å…«å…«æŠ˜åˆ¸",
            "angle": 42.5,          // æœ€ç»ˆåœæ­¢è§’åº¦
            "is_near_miss": false,  // æ˜¯å¦å·®ç‚¹ä¸­å¥–
            "prize_value": 0.88
          }
        ],
        "remaining_points": 1400,   // å‰©ä½™ç§¯åˆ†
        "today_draw_count": 3       // ä»Šæ—¥æŠ½å¥–æ¬¡æ•°
      }
    } */
    
    return this.playAnimation(drawResult.data.results[0])
  })
}
```

### 2.4 å•†å“å…‘æ¢ç³»ç»Ÿ (pages/exchange/exchange.js)

#### ğŸ”´ å®æ—¶åº“å­˜åŒæ­¥ (ç¬¬334è¡Œ)
```javascript
// exchange.js - WebSocketåº“å­˜æ›´æ–°
connectWebSocket() {
  const wsManager = app.globalData.wsManager
  
  // ğŸ”´ ç›‘å¬åº“å­˜æ›´æ–°æ¨é€
  wsManager.on('stock_update', (data) => {
    const { product_id, stock } = data.data
    this.updateProductStock(product_id, stock)
    
    wx.showToast({
      title: `åº“å­˜å·²æ›´æ–°: ${product_id}`,
      icon: 'none'
    })
  })
}

updateProductStock(productId, newStock) {
  const products = this.data.products
  const productIndex = products.findIndex(p => p.id === productId)
  
  if (productIndex !== -1) {
    products[productIndex].stock = newStock
    this.setData({ products })
  }
}
```

#### ğŸ”´ å•†å“å…‘æ¢æ‰§è¡Œ (ç¬¬433è¡Œ)
```javascript
performExchange(product) {
  // API: POST /api/exchange/redeem
  // Body: { "product_id": 1, "quantity": 1 }
  
  exchangeAPI.redeem(product.id, 1).then((result) => {
    // ğŸ”´ åç«¯å¤„ç†è¦æ±‚ï¼š
    // 1. æ‰£å‡ç”¨æˆ·ç§¯åˆ†
    // 2. å‡å°‘å•†å“åº“å­˜
    // 3. è®°å½•å…‘æ¢è®°å½•
    // 4. é€šè¿‡WebSocketæ¨é€åº“å­˜æ›´æ–°ç»™æ‰€æœ‰ç”¨æˆ·
    
    const newPoints = result.data.remaining_points
    this.setData({ totalPoints: newPoints })
    
    // æ›´æ–°å…¨å±€ç§¯åˆ†
    app.globalData.userInfo.total_points = newPoints
  })
}
```

### 2.5 æ‹ç…§ä¸Šä¼ ç³»ç»Ÿ (pages/camera/camera.js)

#### ğŸ”´ å›¾ç‰‡ä¸Šä¼ åˆ°Sealos (ç¬¬255è¡Œ)
```javascript
onSubmitUpload() {
  if (!this.data.selectedImage) return
  
  this.setData({ uploading: true })
  
  // API: POST /api/photo/upload (multipart/form-data)
  photoAPI.upload(this.data.selectedImage.tempPath).then((uploadResult) => {
    // ğŸ”´ åç«¯å¤„ç†æµç¨‹ï¼š
    // 1. æ¥æ”¶å›¾ç‰‡æ–‡ä»¶
    // 2. ä¸Šä¼ åˆ°Sealoså¯¹è±¡å­˜å‚¨
    // 3. å¯é€‰ï¼šè°ƒç”¨OCRè¯†åˆ«å°ç¥¨å†…å®¹
    // 4. åˆ›å»ºå®¡æ ¸è®°å½• (pendingçŠ¶æ€)
    // 5. è¿”å›ä¸Šä¼ ç»“æœ
    
    /* åç«¯è¿”å›æ ¼å¼ï¼š
    {
      "code": 0,
      "data": {
        "upload_id": "UP123456789",
        "image_url": "https://objectstorageapi.bja.sealos.run/bucket/image.jpg",
        "estimated_amount": 58.50,    // AIè¯†åˆ«é‡‘é¢(å¯é€‰)
        "review_status": "pending",   // pending|approved|rejected
        "created_at": "2024-12-19T14:30:00Z"
      }
    } */
  })
}
```

### 2.6 å•†å®¶å®¡æ ¸ç³»ç»Ÿ (pages/merchant/merchant.js)

#### ğŸ”´ å¾…å®¡æ ¸åˆ—è¡¨è·å– (ç¬¬285è¡Œ)
```javascript
loadPendingList() {
  // API: GET /api/merchant/pending-reviews?page=1&size=20
  merchantAPI.getPendingReviews().then(reviews => {
    /* åç«¯è¿”å›æ ¼å¼ï¼š
    {
      "code": 0,
      "data": {
        "reviews": [
          {
            "upload_id": "UP123456789",
            "user_phone": "138****8000",
            "image_url": "å›¾ç‰‡åœ°å€",
            "amount": 58.50,              // æ¶ˆè´¹é‡‘é¢
            "expected_points": 585,       // å»ºè®®ç§¯åˆ†
            "upload_time": "2024-12-19T14:30:00Z",
            "status": "pending"
          }
        ],
        "total": 50,
        "has_more": true
      }
    } */
  })
}
```

#### ğŸ”´ å®¡æ ¸æ‰§è¡Œ (ç¬¬520è¡Œ)
```javascript
onConfirmReview() {
  const { currentReview, reviewAction, reviewPoints } = this.data
  
  // API: POST /api/merchant/review
  merchantAPI.review(
    currentReview.upload_id, 
    reviewAction, 
    parseInt(reviewPoints), 
    this.data.reviewReason
  ).then((result) => {
    // ğŸ”´ åç«¯å¤„ç†è¦æ±‚ï¼š
    // 1. æ›´æ–°å®¡æ ¸è®°å½•çŠ¶æ€
    // 2. å¦‚æœé€šè¿‡ï¼šå¢åŠ ç”¨æˆ·ç§¯åˆ†
    // 3. è®°å½•ç§¯åˆ†å˜åŠ¨æ—¥å¿—
    // 4. é€šè¿‡WebSocketæ¨é€å®¡æ ¸ç»“æœç»™ç”¨æˆ·
    
    this.setData({ showReviewModal: false })
    this.loadData() // åˆ·æ–°æ•°æ®
  })
}
```

---

## ğŸ—„ï¸ ä¸‰ã€æ•°æ®åº“è®¾è®¡å®Œæ•´æ˜ å°„

### 3.1 æ ¸å¿ƒæ•°æ®è¡¨è®¾è®¡

#### ç”¨æˆ·è¡¨ (users)
```sql
CREATE TABLE users (
  user_id INT PRIMARY KEY AUTO_INCREMENT,
  mobile VARCHAR(11) UNIQUE NOT NULL,           -- ğŸ”´ å‰ç«¯è„±æ•æ˜¾ç¤º 138****8000
  total_points INT DEFAULT 0,                   -- ğŸ”´ å®æ—¶åŒæ­¥åˆ°å‰ç«¯
  is_merchant BOOLEAN DEFAULT FALSE,            -- ğŸ”´ æ§åˆ¶å•†å®¶åŠŸèƒ½æƒé™
  nickname VARCHAR(50),                         -- ç”¨æˆ·æ˜µç§°
  avatar VARCHAR(255),                          -- å¤´åƒURL
  wx_openid VARCHAR(100),                       -- å¾®ä¿¡OpenID
  last_login TIMESTAMP,
  status ENUM('active', 'banned') DEFAULT 'active',
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  
  INDEX idx_mobile (mobile),
  INDEX idx_openid (wx_openid)
);
```

#### æŠ½å¥–é…ç½®è¡¨ (lottery_prizes)
```sql
CREATE TABLE lottery_prizes (
  prize_id INT PRIMARY KEY AUTO_INCREMENT,
  prize_name VARCHAR(100) NOT NULL,             -- ğŸ”´ å‰ç«¯è½¬ç›˜æ˜¾ç¤º
  prize_type ENUM('points', 'coupon', 'physical', 'empty'),
  prize_value DECIMAL(10,2),
  angle INT NOT NULL,                           -- ğŸ”´ Canvasè§’åº¦ (0,45,90,135,180,225,270,315)
  color VARCHAR(7) NOT NULL,                    -- ğŸ”´ æ‰‡å½¢é¢œè‰² #FF6B35
  probability DECIMAL(6,4) NOT NULL,            -- ğŸ”´ ä¸­å¥–æ¦‚ç‡ 0.0500
  is_activity BOOLEAN DEFAULT FALSE,            -- ğŸ”´ ç‰¹æ®ŠåŠ¨æ•ˆæ ‡è®°
  cost_points INT DEFAULT 100,                  -- ğŸ”´ å•æ¬¡æ¶ˆè€—ç§¯åˆ†
  status ENUM('active', 'inactive') DEFAULT 'active',
  
  INDEX idx_status_probability (status, probability)
);
```

#### å•†å“è¡¨ (products)
```sql
CREATE TABLE products (
  commodity_id INT PRIMARY KEY AUTO_INCREMENT,
  name VARCHAR(100) NOT NULL,                   -- ğŸ”´ å‰ç«¯å•†å“åç§°
  description TEXT,                             -- å•†å“æè¿°
  category VARCHAR(50) NOT NULL,                -- ğŸ”´ å‰ç«¯åˆ†ç±»ç­›é€‰
  exchange_points INT NOT NULL,                 -- ğŸ”´ å…‘æ¢ç§¯åˆ†
  stock INT NOT NULL,                           -- ğŸ”´ åº“å­˜ (WebSocketå®æ—¶åŒæ­¥)
  image VARCHAR(255),                           -- å•†å“å›¾ç‰‡URL
  status ENUM('active', 'inactive', 'sold_out'),
  is_hot BOOLEAN DEFAULT FALSE,                 -- ğŸ”´ çƒ­é—¨æ ‡è¯†
  sort_order INT DEFAULT 0,                     -- ğŸ”´ æ’åºæƒé‡
  sales_count INT DEFAULT 0,                    -- é”€é‡ç»Ÿè®¡
  
  INDEX idx_category_status (category, status),
  INDEX idx_points (exchange_points),
  INDEX idx_sort (sort_order DESC)
);
```

#### ä¸Šä¼ å®¡æ ¸è¡¨ (upload_reviews)
```sql
CREATE TABLE upload_reviews (
  upload_id VARCHAR(50) PRIMARY KEY,            -- ğŸ”´ å‰ç«¯å”¯ä¸€æ ‡è¯† UP123456789
  user_id INT NOT NULL,
  image_url VARCHAR(500) NOT NULL,              -- Sealoså­˜å‚¨URL
  amount DECIMAL(10,2),                         -- æ¶ˆè´¹é‡‘é¢
  estimated_amount DECIMAL(10,2),               -- AIè¯†åˆ«é‡‘é¢
  points_awarded INT DEFAULT 0,                 -- ğŸ”´ å¥–åŠ±ç§¯åˆ†
  review_status ENUM('pending', 'approved', 'rejected') DEFAULT 'pending',
  reviewer_id INT,                              -- å®¡æ ¸äººID
  review_reason TEXT,                           -- å®¡æ ¸è¯´æ˜
  review_time TIMESTAMP NULL,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  
  FOREIGN KEY (user_id) REFERENCES users(user_id),
  INDEX idx_status_time (review_status, created_at),
  INDEX idx_user_id (user_id)
);
```

### 3.2 å…³é”®å­—æ®µæ˜ å°„å…³ç³»

| å‰ç«¯å˜é‡ | æ•°æ®åº“å­—æ®µ | æ•°æ®ç±»å‹ | è¯´æ˜ | å¯¹æ¥è¦ç‚¹ |
|---------|-----------|---------|------|----------|
| `userInfo.user_id` | `users.user_id` | INT | ç”¨æˆ·ID | ğŸ”´ JWT tokenä¸­åŒ…å« |
| `userInfo.phone` | `users.mobile` | VARCHAR(11) | æ‰‹æœºå· | ğŸ”´ å‰ç«¯æ˜¾ç¤ºéœ€è„±æ• |
| `totalPoints` | `users.total_points` | INT | ç”¨æˆ·ç§¯åˆ† | ğŸ”´ å®æ—¶åŒæ­¥ï¼ŒWebSocketæ¨é€ |
| `userInfo.is_merchant` | `users.is_merchant` | BOOLEAN | å•†å®¶æƒé™ | ğŸ”´ æ§åˆ¶é¡µé¢åŠŸèƒ½æ˜¾ç¤º |
| `prizes[].angle` | `lottery_prizes.angle` | INT | è½¬ç›˜è§’åº¦ | ğŸ”´ Canvasç»˜åˆ¶å¿…é¡» |
| `prizes[].color` | `lottery_prizes.color` | VARCHAR(7) | æ‰‡å½¢é¢œè‰² | ğŸ”´ åå…­è¿›åˆ¶è‰²å€¼ |
| `product.stock` | `products.stock` | INT | å•†å“åº“å­˜ | ğŸ”´ WebSocketå®æ—¶åŒæ­¥ |
| `upload.upload_id` | `upload_reviews.upload_id` | VARCHAR(50) | ä¸Šä¼ ID | ğŸ”´ å®¡æ ¸æµç¨‹æ ‡è¯† |

---

## ğŸŒ å››ã€WebSocketå®æ—¶é€šä¿¡ç³»ç»Ÿ

### 4.1 è¿æ¥å»ºç«‹ä¸è®¤è¯ (utils/ws.js)

#### ğŸ”´ WebSocketè¿æ¥ç®¡ç†
```javascript
// utils/ws.js - 557è¡Œæ ¸å¿ƒä»£ç åˆ†æ
class WSManager {
  constructor() {
    this.ws = null
    this.isConnected = false
    this.reconnectCount = 0
    this.maxReconnectCount = 5
    this.heartbeatInterval = 30000  // 30ç§’å¿ƒè·³
    this.messageQueue = []
  }

  connect(url = null) {
    const wsUrl = url || this.buildWebSocketUrl()
    
    this.ws = wx.connectSocket({
      url: wsUrl,
      header: {
        'Authorization': `Bearer ${getApp().globalData.accessToken}`
      }
    })
    
    this.setupEventHandlers()
  }

  // ğŸ”´ æ„å»ºWebSocketè¿æ¥URL
  buildWebSocketUrl() {
    const app = getApp()
    const baseWsUrl = app.globalData.wsUrl
    const token = app.globalData.accessToken
    const clientType = 'miniprogram'
    
    return `${baseWsUrl}/ws?token=${token}&client_type=${clientType}`
  }
}
```

### 4.2 æ¶ˆæ¯å¤„ç†æœºåˆ¶

#### ğŸ”´ ç§¯åˆ†æ›´æ–°æ¨é€å¤„ç†
```javascript
handlePointsUpdate(payload) {
  const { user_id, total_points, change_points, reason } = payload
  
  console.log('ğŸ’° æ”¶åˆ°ç§¯åˆ†æ›´æ–°:', {
    userId: user_id,
    totalPoints: total_points,
    changePoints: change_points,
    reason
  })
  
  // ğŸ”´ æ›´æ–°å…¨å±€ç”¨æˆ·ç§¯åˆ†
  const app = getApp()
  if (app.globalData.userInfo && app.globalData.userInfo.user_id === user_id) {
    app.globalData.userInfo.total_points = total_points
    
    // æ˜¾ç¤ºç§¯åˆ†å˜åŠ¨æç¤º
    const title = change_points > 0 ? `+${change_points}ç§¯åˆ†` : `${change_points}ç§¯åˆ†`
    wx.showToast({
      title: `${title} - ${reason}`,
      icon: 'none',
      duration: 2000
    })
    
    // é€šçŸ¥æ‰€æœ‰é¡µé¢æ›´æ–°ç§¯åˆ†æ˜¾ç¤º
    app.notifyAllPages('updatePoints', { totalPoints: total_points })
  }
}
```

#### ğŸ”´ åº“å­˜æ›´æ–°æ¨é€å¤„ç†
```javascript
handleStockUpdate(payload) {
  const { product_id, stock, product_name } = payload
  
  console.log('ğŸ“¦ åº“å­˜æ›´æ–°:', {
    productId: product_id,
    newStock: stock,
    productName: product_name
  })
  
  // ğŸ”´ é€šçŸ¥å…‘æ¢é¡µé¢æ›´æ–°åº“å­˜
  this.emit('stock_update', {
    data: { product_id, stock, product_name }
  })
  
  // åº“å­˜é¢„è­¦æç¤º
  if (stock <= 5 && stock > 0) {
    wx.showToast({
      title: `${product_name} åº“å­˜ä¸è¶³`,
      icon: 'none'
    })
  } else if (stock === 0) {
    wx.showToast({
      title: `${product_name} å·²å”®ç½„`,
      icon: 'none'
    })
  }
}
```

### 4.3 æ ‡å‡†æ¶ˆæ¯æ ¼å¼

#### ğŸ”´ åç«¯æ¨é€æ¶ˆæ¯æ ¼å¼è§„èŒƒ
```javascript
// ç§¯åˆ†å˜æ›´æ¨é€
{
  "type": "points_update",
  "data": {
    "user_id": 123,
    "total_points": 1400,           // ğŸ”´ æœ€æ–°ç§¯åˆ†æ€»æ•°
    "change_points": -100,          // å˜åŒ–æ•°é‡ (æ­£æ•°å¢åŠ ï¼Œè´Ÿæ•°å‡å°‘)
    "reason": "lottery_draw",       // å˜åŒ–åŸå› 
    "timestamp": "2024-12-19T14:30:00.000Z"
  }
}

// åº“å­˜å˜æ›´æ¨é€
{
  "type": "stock_update",
  "data": {
    "product_id": 1,
    "stock": 99,                    // ğŸ”´ æ–°åº“å­˜æ•°é‡
    "product_name": "æ˜Ÿå·´å…‹åˆ¸",
    "timestamp": "2024-12-19T14:30:00.000Z"
  }
}

// å®¡æ ¸ç»“æœæ¨é€
{
  "type": "review_result",
  "data": {
    "upload_id": "UP123456789",
    "status": "approved|rejected",
    "points_awarded": 585,          // ğŸ”´ è·å¾—ç§¯åˆ† (é€šè¿‡æ—¶)
    "review_reason": "å®¡æ ¸é€šè¿‡",
    "timestamp": "2024-12-19T14:30:00.000Z"
  }
}
```

---

## âš™ï¸ äº”ã€éƒ¨ç½²é…ç½®ä¸ç¯å¢ƒç®¡ç†

### 5.1 å¼€å‘ç¯å¢ƒé…ç½®

#### ğŸ”´ æœ¬åœ°å¼€å‘é…ç½®
```javascript
// config/env.js - å¼€å‘ç¯å¢ƒ
development: {
  baseUrl: 'http://localhost:3000/api',
  wsUrl: 'ws://localhost:3000',
  isDev: true,
  needAuth: false,                  // ğŸ”´ è·³è¿‡è®¤è¯ï¼Œä½¿ç”¨Mockæ•°æ®
  sealosConfig: {
    // å¼€å‘ç¯å¢ƒå¯ä½¿ç”¨æµ‹è¯•é…ç½®
  }
}
```

### 5.2 ç”Ÿäº§ç¯å¢ƒé…ç½®

#### ğŸ”´ ç”Ÿäº§éƒ¨ç½²é…ç½®
```javascript
// config/env.js - ç”Ÿäº§ç¯å¢ƒ
production: {
  baseUrl: 'https://gynjeecyhgvo.sealoshzh.site/api',
  wsUrl: 'wss://gynjeecyhgvo.sealoshzh.site',
  isDev: false,
  needAuth: true,                   // ğŸ”´ å¼ºåˆ¶è®¤è¯
  sealosConfig: {
    endpoint: 'https://objectstorageapi.bja.sealos.run',
    bucket: 'tiangong',
    accessKeyId: 'YOUR_PROD_KEY',   // ğŸ”´ ç”Ÿäº§å¯†é’¥
    secretAccessKey: 'YOUR_PROD_SECRET'
  }
}
```

### 5.3 éƒ¨ç½²æ£€æŸ¥æ¸…å•

#### ğŸ” é…ç½®éªŒè¯
- [ ] `config/env.js` ä¸­ `CURRENT_ENV` è®¾ç½®ä¸º `production`
- [ ] `app.js` ä¸­ç¯å¢ƒé…ç½®æ­£ç¡®åŠ è½½
- [ ] APIåœ°å€æŒ‡å‘ç”Ÿäº§æœåŠ¡å™¨
- [ ] Sealoså­˜å‚¨é…ç½®å®Œæ•´ä¸”æœ‰æ•ˆ
- [ ] WebSocketåœ°å€ä½¿ç”¨ `wss://` åè®®

#### ğŸ” åŠŸèƒ½éªŒè¯
- [ ] ç”¨æˆ·ç™»å½•è®¤è¯æµç¨‹æ­£å¸¸
- [ ] æŠ½å¥–è½¬ç›˜åŠ¨ç”»è¿è¡Œæ­£å¸¸
- [ ] å•†å“å…‘æ¢åº“å­˜åŒæ­¥æ­£å¸¸
- [ ] å›¾ç‰‡ä¸Šä¼ åˆ°SealosæˆåŠŸ
- [ ] å•†å®¶å®¡æ ¸åŠŸèƒ½æ­£å¸¸
- [ ] WebSocketè¿æ¥ç¨³å®šä¸”æ¨é€æ­£å¸¸

---

## ğŸš¨ å…­ã€å…³é”®é—®é¢˜è§£å†³æ–¹æ¡ˆ

### 6.1 å·²è§£å†³çš„æ ¸å¿ƒé—®é¢˜

#### âœ… Canvaså…¼å®¹æ€§é—®é¢˜
**ç°è±¡**ï¼šå¾®ä¿¡å°ç¨‹åºä¸­CanvasåŠ¨ç”»å¡é¡¿  
**è§£å†³**ï¼šä¼˜åŒ–ç»˜åˆ¶é¢‘ç‡å’Œä½¿ç”¨setTimeoutæ›¿ä»£requestAnimationFrame
```javascript
// lottery.js ç¬¬962è¡Œä¼˜åŒ–æ–¹æ¡ˆ
const animate = () => {
  setTimeout(() => {
    if (Math.floor(elapsed / frameDuration) % 3 === 0) {
      this.drawWheel() // æ¯3å¸§ç»˜åˆ¶ä¸€æ¬¡ï¼Œå‡å°‘å¡é¡¿
    }
    if (progress < 1) {
      animate()
    }
  }, frameDuration)
}
```

#### âœ… çœŸæœºæŒ‰é’®æ˜¾ç¤ºé—®é¢˜
**ç°è±¡**ï¼šè½¬ç›˜ä¸­å¤®æŒ‰é’®åœ¨çœŸæœºä¸Šä¸æ˜¾ç¤º  
**è§£å†³**ï¼šå¼ºåˆ¶æ ·å¼ä¼˜å…ˆçº§å’Œz-indexå±‚çº§ç®¡ç†
```css
/* lottery.wxss - å¼ºåˆ¶æ˜¾ç¤ºæ ·å¼ */
.center-draw-button {
  width: 80px !important;
  height: 80px !important;
  z-index: 999999 !important;
  pointer-events: auto !important;
  -webkit-transform: translateZ(0) !important;
  transform: translateZ(0) !important;
}
```

#### âœ… WebSocketè¿æ¥ç¨³å®šæ€§
**ç°è±¡**ï¼šWebSocketé¢‘ç¹æ–­è¿é‡è¿  
**è§£å†³**ï¼šå®ç°æŒ‡æ•°é€€é¿é‡è¿å’Œå¿ƒè·³ä¿æ´»æœºåˆ¶
```javascript
// utils/ws.js å¿ƒè·³æœºåˆ¶
startHeartbeat() {
  this.heartbeatTimer = setInterval(() => {
    if (this.isConnected) {
      this.send({
        type: 'ping',
        data: { client_time: new Date().toISOString() }
      })
    }
  }, 30000) // 30ç§’å¿ƒè·³
}
```

### 6.2 æ€§èƒ½ä¼˜åŒ–è¦ç‚¹

#### ğŸ”´ å‰ç«¯æ€§èƒ½ä¼˜åŒ–
```javascript
// 1. å›¾ç‰‡æ‡’åŠ è½½
const lazyLoadImages = () => {
  const images = document.querySelectorAll('image[data-src]')
  // ä½¿ç”¨IntersectionObserverä¼˜åŒ–å›¾ç‰‡åŠ è½½
}

// 2. æ•°æ®ç¼“å­˜ç®¡ç†
const cacheManager = {
  cache: new Map(),
  set(key, data, ttl = 300000) { // 5åˆ†é’Ÿç¼“å­˜
    this.cache.set(key, {
      data,
      expires: Date.now() + ttl
    })
  }
}

// 3. é˜²æŠ–èŠ‚æµ
const throttle = (func, delay) => {
  let timeoutId
  return (...args) => {
    clearTimeout(timeoutId)
    timeoutId = setTimeout(() => func.apply(this, args), delay)
  }
}
```

---

## ğŸ“Š ä¸ƒã€å®Œæ•´APIæ¥å£æ¸…å•

### 7.1 è®¤è¯æ¨¡å—
| æ¥å£ | æ–¹æ³• | è·¯å¾„ | å®ç°æ–‡ä»¶ | è¯´æ˜ |
|------|------|------|----------|------|
| å‘é€éªŒè¯ç  | POST | `/api/auth/send-code` | api.js:253 | æ‰‹æœºéªŒè¯ç å‘é€ |
| ç™»å½•æ³¨å†Œ | POST | `/api/auth/login` | api.js:276 | æ‰‹æœºå·ç™»å½•/æ³¨å†Œ |
| åˆ·æ–°Token | POST | `/api/auth/refresh` | api.js:309 | Tokenç»­æœŸ |
| éªŒè¯Token | GET | `/api/auth/verify` | api.js:332 | Tokenæœ‰æ•ˆæ€§æ£€æŸ¥ |

### 7.2 æŠ½å¥–æ¨¡å—
| æ¥å£ | æ–¹æ³• | è·¯å¾„ | å®ç°æ–‡ä»¶ | è¯´æ˜ |
|------|------|------|----------|------|
| æŠ½å¥–é…ç½® | GET | `/api/lottery/config` | lottery.js:358 | è·å–å¥–å“é…ç½® |
| æ‰§è¡ŒæŠ½å¥– | POST | `/api/lottery/draw` | lottery.js:792 | æ‰§è¡ŒæŠ½å¥–æ“ä½œ |
| æŠ½å¥–è®°å½• | GET | `/api/lottery/records` | api.js:434 | æŠ½å¥–å†å²è®°å½• |

### 7.3 å•†å“å…‘æ¢æ¨¡å—
| æ¥å£ | æ–¹æ³• | è·¯å¾„ | å®ç°æ–‡ä»¶ | è¯´æ˜ |
|------|------|------|----------|------|
| å•†å“åˆ—è¡¨ | GET | `/api/exchange/products` | exchange.js:65 | è·å–å•†å“åˆ—è¡¨ |
| å•†å“å…‘æ¢ | POST | `/api/exchange/redeem` | exchange.js:433 | æ‰§è¡Œå•†å“å…‘æ¢ |
| å…‘æ¢è®°å½• | GET | `/api/exchange/records` | api.js:593 | å…‘æ¢å†å²è®°å½• |

### 7.4 ä¸Šä¼ å®¡æ ¸æ¨¡å—
| æ¥å£ | æ–¹æ³• | è·¯å¾„ | å®ç°æ–‡ä»¶ | è¯´æ˜ |
|------|------|------|----------|------|
| å›¾ç‰‡ä¸Šä¼  | POST | `/api/photo/upload` | camera.js:255 | ä¸Šä¼ å°ç¥¨å›¾ç‰‡ |
| ä¸Šä¼ è®°å½• | GET | `/api/photo/records` | camera.js:542 | ä¸Šä¼ å†å²è®°å½• |

### 7.5 å•†å®¶ç®¡ç†æ¨¡å—
| æ¥å£ | æ–¹æ³• | è·¯å¾„ | å®ç°æ–‡ä»¶ | è¯´æ˜ |
|------|------|------|----------|------|
| ç”³è¯·æƒé™ | POST | `/api/merchant/apply` | merchant.js:372 | ç”³è¯·å•†å®¶æƒé™ |
| å¾…å®¡æ ¸åˆ—è¡¨ | GET | `/api/merchant/pending-reviews` | merchant.js:285 | è·å–å¾…å®¡æ ¸åˆ—è¡¨ |
| æ‰§è¡Œå®¡æ ¸ | POST | `/api/merchant/review` | merchant.js:520 | å®¡æ ¸å°ç¥¨ä¸Šä¼  |
| æ‰¹é‡å®¡æ ¸ | POST | `/api/merchant/batch-review` | api.js:952 | æ‰¹é‡å®¡æ ¸æ“ä½œ |

---

## ğŸ¯ å…«ã€å¼€å‘å®æ–½æŒ‡å—

### 8.1 åç«¯å¼€å‘ä¼˜å…ˆçº§

#### ğŸ”´ ç¬¬ä¸€é˜¶æ®µï¼šåŸºç¡€æœåŠ¡ (1-2å‘¨)
1. **ç”¨æˆ·è®¤è¯ç³»ç»Ÿ**
   - JWT Tokenç®¡ç†
   - æ‰‹æœºéªŒè¯ç å‘é€/éªŒè¯
   - ç”¨æˆ·æ³¨å†Œ/ç™»å½•é€»è¾‘
   - æƒé™éªŒè¯ä¸­é—´ä»¶

2. **æ•°æ®åº“è®¾è®¡**
   - åˆ›å»º8å¼ æ ¸å¿ƒæ•°æ®è¡¨
   - å»ºç«‹ç´¢å¼•å’Œå¤–é”®å…³ç³»
   - æ•°æ®åˆå§‹åŒ–è„šæœ¬

#### ğŸŸ¡ ç¬¬äºŒé˜¶æ®µï¼šæ ¸å¿ƒä¸šåŠ¡ (2-3å‘¨)
1. **æŠ½å¥–ç³»ç»Ÿ**
   - æŠ½å¥–é…ç½®ç®¡ç†
   - æŠ½å¥–ç®—æ³•å®ç°
   - ç§¯åˆ†æ‰£å‡é€»è¾‘

2. **å•†å“å…‘æ¢ç³»ç»Ÿ**
   - å•†å“CRUDæ“ä½œ
   - åº“å­˜ç®¡ç†
   - å…‘æ¢æµç¨‹å®ç°

#### ğŸŸ¢ ç¬¬ä¸‰é˜¶æ®µï¼šé«˜çº§åŠŸèƒ½ (1-2å‘¨)
1. **WebSocketå®æ—¶é€šä¿¡**
   - ç§¯åˆ†å˜æ›´æ¨é€
   - åº“å­˜æ›´æ–°æ¨é€
   - å®¡æ ¸ç»“æœæ¨é€

2. **æ–‡ä»¶ä¸Šä¼ ä¸å®¡æ ¸**
   - Sealoså¯¹è±¡å­˜å‚¨é›†æˆ
   - å•†å®¶å®¡æ ¸æµç¨‹
   - OCRè¯†åˆ«é›†æˆï¼ˆå¯é€‰ï¼‰

### 8.2 æµ‹è¯•éªŒè¯æ¸…å•

#### ğŸ”§ æ¥å£æµ‹è¯•
```bash
# 1. ç”¨æˆ·è®¤è¯æµ‹è¯•
curl -X POST $API_BASE/auth/login \
  -H "Content-Type: application/json" \
  -d '{"phone":"13800138000","code":"123456"}'

# 2. æŠ½å¥–é…ç½®æµ‹è¯•
curl -X GET $API_BASE/lottery/config \
  -H "Authorization: Bearer $TOKEN"

# 3. å•†å“åˆ—è¡¨æµ‹è¯•
curl -X GET $API_BASE/exchange/products \
  -H "Authorization: Bearer $TOKEN"
```

#### ğŸ”§ WebSocketæµ‹è¯•
```javascript
// WebSocketè¿æ¥æµ‹è¯•
const ws = new WebSocket('wss://your-domain.com/ws?token=your_token')
ws.onmessage = (event) => {
  const data = JSON.parse(event.data)
  console.log('æ”¶åˆ°æ¨é€:', data)
}
```

### 8.3 ç›‘æ§ä¸ç»´æŠ¤

#### ğŸ“Š å…³é”®ç›‘æ§æŒ‡æ ‡
- **æ¥å£å“åº”æ—¶é—´**: < 500ms
- **WebSocketè¿æ¥ç¨³å®šæ€§**: > 95%
- **é”™è¯¯ç‡**: < 1%
- **æ•°æ®åº“æŸ¥è¯¢æ€§èƒ½**: < 100ms

#### ğŸ“Š æ—¥å¿—è®°å½•è¦æ±‚
```javascript
// åç«¯æ—¥å¿—æ ¼å¼ç¤ºä¾‹
{
  "timestamp": "2024-12-19T14:30:00.000Z",
  "level": "info",
  "module": "lottery",
  "action": "draw",
  "user_id": 123,
  "data": {
    "draw_type": "single",
    "result": "prize_1",
    "points_cost": 100
  }
}
```

---

## ğŸ“ ä¹ã€æŠ€æœ¯æ”¯æŒä¸æ–‡æ¡£ç»´æŠ¤

### 9.1 æ–‡æ¡£æ›´æ–°è®¡åˆ’
- **æ¯å‘¨æ›´æ–°**ï¼šAPIæ¥å£å˜æ›´ã€bugä¿®å¤
- **ç‰ˆæœ¬å‘å¸ƒ**ï¼šé‡å¤§åŠŸèƒ½æ›´æ–°ã€æ¶æ„è°ƒæ•´
- **ç´§æ€¥æ›´æ–°**ï¼šå®‰å…¨æ¼æ´ã€ä¸¥é‡bugä¿®å¤

### 9.2 æŠ€æœ¯æ ˆè¯´æ˜
- **å‰ç«¯**ï¼šå¾®ä¿¡å°ç¨‹åºã€Canvasã€WebSocket
- **åç«¯**ï¼šNode.js/Expressã€JWTè®¤è¯ã€WebSocket
- **æ•°æ®åº“**ï¼šMySQL 8.0ã€Redisç¼“å­˜
- **å­˜å‚¨**ï¼šSealoså¯¹è±¡å­˜å‚¨
- **éƒ¨ç½²**ï¼šSealosäº‘åŸç”Ÿå¹³å°

### 9.3 æ€§èƒ½åŸºå‡†
- **é¡µé¢åŠ è½½æ—¶é—´**: < 2ç§’
- **APIå“åº”æ—¶é—´**: < 500ms
- **å›¾ç‰‡ä¸Šä¼ é€Ÿåº¦**: < 10ç§’
- **WebSocketå»¶è¿Ÿ**: < 100ms

---

## ğŸ‰ åã€æ€»ç»“ä¸åç»­è§„åˆ’

### âœ… æ–‡æ¡£ç‰¹è‰²
1. **åŸºäºçœŸå®ä»£ç **ï¼šæ‰€æœ‰ç¤ºä¾‹æ¥è‡ªé¡¹ç›®å®é™…ä»£ç 
2. **å®Œæ•´å¯¹æ¥æ–¹æ¡ˆ**ï¼šæ¶µç›–å‰åç«¯å…¨é“¾è·¯å¯¹æ¥
3. **é—®é¢˜å¯¼å‘**ï¼šé‡ç‚¹è§£å†³å®é™…å¼€å‘ä¸­çš„ç—›ç‚¹
4. **å¯æ‰§è¡Œæ€§å¼º**ï¼šæä¾›å…·ä½“çš„ä»£ç ç¤ºä¾‹å’Œé…ç½®

### ğŸš€ å®æ–½å»ºè®®
1. **ç«‹å³å¯åŠ¨åŸºç¡€æœåŠ¡å¼€å‘**
2. **ä¼˜å…ˆå®ç°æ ¸å¿ƒåŠŸèƒ½**
3. **åˆ†é˜¶æ®µæµ‹è¯•éªŒè¯**
4. **æŒç»­ç›‘æ§å’Œä¼˜åŒ–**

### ğŸ“ˆ æˆåŠŸæŒ‡æ ‡
- âœ… æ‰€æœ‰APIæ¥å£æ­£å¸¸å“åº”
- âœ… WebSocketæ¨é€å®æ—¶æœ‰æ•ˆ
- âœ… å›¾ç‰‡ä¸Šä¼ åˆ°SealosæˆåŠŸ
- âœ… æ•°æ®åº“æ“ä½œæ€§èƒ½è‰¯å¥½
- âœ… å‰ç«¯åŠŸèƒ½å®Œæ•´å¯ç”¨

> **ğŸ’¡ æ ¸å¿ƒä»·å€¼**ï¼šæœ¬æ–‡æ¡£åŸºäºå¯¹é¡¹ç›®å‰ç«¯ä»£ç çš„æ·±åº¦åˆ†æï¼Œç»“åˆå®é™…å¼€å‘ç»éªŒï¼Œæä¾›äº†å®Œæ•´çš„å‰åç«¯å¯¹æ¥è§£å†³æ–¹æ¡ˆã€‚æ‰€æœ‰æŠ€æœ¯æ–¹æ¡ˆéƒ½ç»è¿‡å®é™…éªŒè¯ï¼Œå¯ç›´æ¥ç”¨äºç”Ÿäº§ç¯å¢ƒéƒ¨ç½²ã€‚

---

**æ–‡æ¡£ç»´æŠ¤è€…**ï¼šå‰ç«¯å¼€å‘å›¢é˜Ÿ  
**æœ€åæ›´æ–°**ï¼š2024å¹´12æœˆ19æ—¥  
**ç‰ˆæœ¬å·**ï¼šv3.0-stable 
---
description: 
globs: 
alwaysApply: true
---
# ğŸ” å¤©å·¥é¡¹ç›®å®‰å…¨ä¸è´¨é‡æ ‡å‡†è§„èŒƒ - æ ¸å¿ƒå®‰å…¨è§„åˆ™é›†

## ğŸš¨ æ ¸å¿ƒå®‰å…¨åŸåˆ™ - è¿ååˆ™ç«‹å³åœæ­¢å¼€å‘

### 1. ğŸ” æ•°æ®å®‰å…¨æ ¸å¿ƒè§„åˆ™ï¼ˆæœ€é«˜ä¼˜å…ˆçº§ï¼‰

#### ç»å¯¹ç¦æ­¢å‰ç«¯ç¡¬ç¼–ç æ•æ„Ÿä¸šåŠ¡æ•°æ®
```javascript
// âŒ ä¸¥ç¦ï¼šå‰ç«¯ç¡¬ç¼–ç å¥–å“é…ç½®
const PRIZES = [
  { name: 'å¥–å“1', probability: 10 },
  { name: 'å¥–å“2', probability: 20 }
]

// âŒ ä¸¥ç¦ï¼šå‰ç«¯ç¡¬ç¼–ç å•†å“ä»·æ ¼
const PRODUCTS = [
  { id: 1, name: 'å•†å“1', price: 100 }
]

// âŒ ä¸¥ç¦ï¼šå‰ç«¯è®¡ç®—ä¸šåŠ¡é€»è¾‘
const probability = Math.random() * 100
const userPermission = user.role === 'admin'
```

#### ç»å¯¹ç¦æ­¢ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®æ›¿ä»£åç«¯API
```javascript
// âŒ ä¸¥ç¦ï¼šMockæ•°æ®å‡½æ•°
const mockRequest = () => { /* å‡æ•°æ® */ }
const shouldUseMock = () => true
const smartApiCall = (real, mock) => mock

// âŒ ä¸¥ç¦ï¼šsetTimeoutæ¨¡æ‹Ÿå¼‚æ­¥
setTimeout(() => {
  callback({ data: mockData })
}, 1000)
```

#### å¼ºåˆ¶åç«¯ä¾èµ–æ£€æŸ¥ä¸é”™è¯¯å¤„ç†
```javascript
// âœ… æ­£ç¡®ï¼šçœŸå®APIè°ƒç”¨ + å®Œæ•´é”™è¯¯å¤„ç†
api.getData().then(result => {
  if (result.code === 0) {
    this.setData({ data: result.data })
  } else {
    throw new Error('âš ï¸ åç«¯æœåŠ¡å¼‚å¸¸ï¼š' + result.msg)
  }
}).catch(error => {
  wx.showModal({
    title: 'ğŸš¨ åç«¯æœåŠ¡é—®é¢˜',
    content: `æ— æ³•è·å–æ•°æ®ï¼\n\nå¯èƒ½åŸå› ï¼š\n1. åç«¯APIæœåŠ¡æœªå¯åŠ¨\n2. æ¥å£å¼‚å¸¸\n3. æ•°æ®åº“è¿æ¥é—®é¢˜\n\nè¯·ç«‹å³æ£€æŸ¥åç«¯æœåŠ¡çŠ¶æ€ï¼`
  })
})
```

### 2. ğŸ› ï¸ æ–¹æ³•è°ƒç”¨å®‰å…¨è§„èŒƒ

#### å¯¼å…¥å‡½æ•°è°ƒç”¨é”™è¯¯é˜²æŠ¤
```javascript
// âŒ ç¦æ­¢ï¼šå°†å¯¼å…¥å‡½æ•°å½“ä½œå¯¹è±¡æ–¹æ³•è°ƒç”¨
const { getTechnicalConfig } = require('./config')
// é”™è¯¯è°ƒç”¨
this.getTechnicalConfig()  // TypeError: this.getTechnicalConfig is not a function

// âœ… æ­£ç¡®ï¼šç›´æ¥è°ƒç”¨å¯¼å…¥å‡½æ•°ï¼Œæ·»åŠ è¯¦ç»†æ³¨é‡Š
const config = getTechnicalConfig()  // è·å–æŠ€æœ¯é…ç½®ä¿¡æ¯
const isValid = validateForm(formData)  // éªŒè¯ç”¨æˆ·è¾“å…¥è¡¨å•æ•°æ®
const displayDate = formatDate(timestamp)  // æ ¼å¼åŒ–æ—¶é—´æˆ³
```

#### æ¨¡å—å¯¼å…¥ä¸€è‡´æ€§æ£€æŸ¥
```javascript
// âœ… ç»Ÿä¸€å¯¼å…¥è·¯å¾„å’Œé”™è¯¯å¤„ç†
const { validateForm } = require('../../utils/validate')
const { formatDate } = require('../../utils/util')

// å¼ºåˆ¶æ•°æ®å­˜åœ¨æ€§æ£€æŸ¥ï¼šæ‰€æœ‰æŸ¥è¯¢å‰å¿…é¡»éªŒè¯æ•°æ®æ˜¯å¦å­˜åœ¨
if (!app.globalData) {
  console.error('ğŸš¨ å…¨å±€æ•°æ®æœªåˆå§‹åŒ–')
  return
}

if (!app.globalData.userInfo) {
  wx.navigateTo({ url: '/pages/auth/auth' })
  return
}
```

### 3. ğŸ”’ å¯¹è±¡å±æ€§å®‰å…¨è®¿é—®è§„èŒƒ

#### æ·±å±‚å±æ€§è®¿é—®é˜²æŠ¤
```javascript
// âŒ ç¦æ­¢ï¼šä¸å®‰å…¨çš„å±æ€§è®¿é—®
app.globalData.config.isDev  // å¯èƒ½ä¸ºundefined
user.profile.avatar.url      // å¤šå±‚çº§è®¿é—®é£é™©

// âœ… æ­£ç¡®ï¼šæä¾›åå¤‡å€¼å’Œå®‰å…¨æ£€æŸ¥
const config = app.globalData.config || app.globalData || { isDev: true }
const isDev = config.isDev || false

const avatarUrl = user?.profile?.avatar?.url || '/images/default-avatar.png'

// âœ… æ·±åº¦æ€è€ƒé¡¹ç›®ä»£ç é€»è¾‘ï¼Œç¡®ä¿æ•°æ®å®‰å…¨è®¿é—®
const userInfo = app.globalData.userInfo
if (userInfo && userInfo.profile) {
  const avatar = userInfo.profile.avatar || '/images/default-avatar.png'
}
```

### 4. ğŸ¨ å¾®ä¿¡å°ç¨‹åºAPIå…¼å®¹æ€§æ£€æŸ¥ç³»ç»Ÿ

#### Canvas APIå…¼å®¹æ€§åŒé‡æ£€æŸ¥
```javascript
// âœ… ç»Ÿä¸€å…¼å®¹æ€§æ£€æŸ¥å·¥å…· (utils/compatibility-check.js)
const checkCanvasAPI = (ctx) => {
  return {
    createLinearGradient: typeof ctx.createLinearGradient === 'function',
    createRadialGradient: typeof ctx.createRadialGradient === 'function',
    quadraticCurveTo: typeof ctx.quadraticCurveTo === 'function',
    bezierCurveTo: typeof ctx.bezierCurveTo === 'function',
    setLineDash: typeof ctx.setLineDash === 'function',
    filter: 'filter' in ctx
  }
}

// âœ… æ³¨æ„ç¼–å†™çš„ä»£ç ç¬¦åˆå¾®ä¿¡å°ç¨‹åºå¼€å‘æ ‡å‡†ï¼Œè€ƒè™‘APIå…¼å®¹æ€§
if (compatibility.createLinearGradient && typeof ctx.createLinearGradient === 'function') {
  try {
    const gradient = ctx.createLinearGradient(0, 0, 100, 0)
    gradient.addColorStop(0, '#ff0000')
    gradient.addColorStop(1, '#00ff00')
    ctx.fillStyle = gradient
  } catch (error) {
    console.warn('çº¿æ€§æ¸å˜ä¸æ”¯æŒï¼Œä½¿ç”¨é™çº§æ–¹æ¡ˆ:', error)
    ctx.fillStyle = '#ff0000'
  }
} else {
  ctx.fillStyle = '#ff0000'
}
```

#### æ™ºèƒ½é™çº§ç­–ç•¥
```javascript
// âœ… æ ¹æ®å…¼å®¹æ€§æ£€æŸ¥ç»“æœæ™ºèƒ½é€‰æ‹©ç­–ç•¥
const drawWithCompatibility = (ctx, compatibility) => {
  if (compatibility.createRadialGradient && compatibility.quadraticCurveTo) {
    drawAdvancedStyle(ctx)  // é«˜çº§ç»˜åˆ¶ï¼šæ¸å˜ + æ›²çº¿ï¼Œè§†è§‰ç¾æ„Ÿ 95%+
  } else if (compatibility.createLinearGradient) {
    drawMediumStyle(ctx)    // ä¸­çº§ç»˜åˆ¶ï¼šçº¿æ€§æ¸å˜ï¼Œè§†è§‰ç¾æ„Ÿ 80%+
  } else {
    drawBasicStyle(ctx)     // åŸºç¡€ç»˜åˆ¶ï¼šçº¯è‰²å¡«å……ï¼Œè§†è§‰ç¾æ„Ÿ 60%+ï¼Œç¡®ä¿100%å…¼å®¹æ€§
  }
}
```

### 5. ğŸš€ ä¸‰å±‚é”™è¯¯å¤„ç†ä¸æ™ºèƒ½é™çº§æœºåˆ¶

#### å®Œæ•´é”™è¯¯å¤„ç†æ¨¡å¼
```javascript
// âœ… ç¬¬ä¸€å±‚ï¼šåŠŸèƒ½æ£€æŸ¥
if (!compatibility.targetAPI) {
  console.warn('APIä¸æ”¯æŒï¼Œä½¿ç”¨é™çº§æ–¹æ¡ˆ')
  return fallbackMethod()
}

// âœ… ç¬¬äºŒå±‚ï¼šç±»å‹æ£€æŸ¥
if (typeof ctx.targetAPI !== 'function') {
  console.warn('APIç±»å‹å¼‚å¸¸ï¼Œä½¿ç”¨é™çº§æ–¹æ¡ˆ')
  return fallbackMethod()
}

// âœ… ç¬¬ä¸‰å±‚ï¼šè¿è¡Œæ—¶é”™è¯¯æ•è·
try {
  return ctx.targetAPI(...args)
} catch (error) {
  console.error('APIè°ƒç”¨å¤±è´¥:', error)
  return fallbackMethod()
}
```

#### å¢å¼ºé”™è¯¯å¤„ç†ä¸è§£å†³å»ºè®®
```javascript
// âœ… æä¾›æ˜ç¡®çš„é”™è¯¯ä¿¡æ¯å’Œè§£å†³å»ºè®®
const handleError = (error, context) => {
  const errorMap = {
    'TypeError': 'ç±»å‹é”™è¯¯ - è¯·æ£€æŸ¥å˜é‡ç±»å‹å’Œæ–¹æ³•è°ƒç”¨',
    'ReferenceError': 'å¼•ç”¨é”™è¯¯ - è¯·æ£€æŸ¥å˜é‡æ˜¯å¦å·²å®šä¹‰',
    'Canvas API Error': 'Canvas APIä¸å…¼å®¹ - å·²å¯ç”¨é™çº§æ–¹æ¡ˆ'
  }
  
  const errorType = error.name || 'Unknown'
  const suggestion = errorMap[errorType] || 'è¯·æ£€æŸ¥ä»£ç é€»è¾‘å’Œç¯å¢ƒå…¼å®¹æ€§'
  
  console.error(`ğŸš¨ ${context}å‘ç”Ÿé”™è¯¯:`, error)
  console.warn(`ğŸ’¡ å»ºè®®è§£å†³æ–¹æ¡ˆ: ${suggestion}`)
  
  wx.showToast({
    title: 'åŠŸèƒ½æš‚æ—¶ä¸å¯ç”¨',
    icon: 'none',
    duration: 2000
  })
}
```

### 6. ğŸ“ ä»£ç æ³¨é‡Šä¸æ–‡æ¡£è§„èŒƒ

#### è¯¦ç»†ä»£ç æ³¨é‡Šæ ‡å‡†
```javascript
// âœ… ä»£ç è¦æœ‰è¯¦ç»†æ³¨é‡Š - ä¸ºæ‰€æœ‰å‡½æ•°è°ƒç”¨æ·»åŠ è¯¦ç»†æ³¨é‡Š
// ğŸ”´ å¿…é¡»ä»åç«¯è·å–ï¼Œä¸¥ç¦å‰ç«¯ç¡¬ç¼–ç 
// ğŸš¨ æ ¸å¿ƒå®‰å…¨æ•°æ®ï¼Œä¸å…è®¸å‰ç«¯æ¨¡æ‹Ÿ
// âš ï¸ åç«¯æœåŠ¡å¼‚å¸¸æ—¶çš„é”™è¯¯å¤„ç†
// âœ… æ­£ç¡®çš„åç«¯APIè°ƒç”¨æ–¹å¼

// è·å–æŠ½å¥–é…ç½®ä¿¡æ¯ï¼ŒåŒ…å«å¥–å“åˆ—è¡¨å’Œæ¶ˆè€—ç§¯åˆ†
lotteryAPI.getConfig().then(result => {
  if (result.code === 0) {
    this.setData({ 
      prizes: result.data.prizes,        // å¥–å“åˆ—è¡¨
      costPoints: result.data.cost_points // æŠ½å¥–æ¶ˆè€—ç§¯åˆ†
    })
  } else {
    throw new Error('è·å–æŠ½å¥–é…ç½®å¤±è´¥')
  }
}).catch(error => {
  wx.showModal({
    title: 'âš ï¸ åç«¯æœåŠ¡å¼‚å¸¸', 
    content: 'æ— æ³•è·å–æŠ½å¥–é…ç½®ï¼è¯·æ£€æŸ¥åç«¯APIæœåŠ¡ã€‚'
  })
})
```

### 7. ğŸ” Mockæ•°æ®å®‰å…¨æ£€æµ‹ä¸é˜²æŠ¤

#### Mockæ•°æ®æ£€æµ‹å™¨ - å®Œå–„ç‰ˆ
```javascript
// ğŸ”´ Mockæ•°æ®æ£€æµ‹å™¨
class MockDataDetector {
    constructor() {
        this.mockKeywords = [
            'mock', 'Mock', 'MOCK', 'fake', 'Fake', 'FAKE',
            'test', 'Test', 'TEST', 'demo', 'Demo', 'DEMO',
            'sample', 'Sample', 'SAMPLE', 'dummy', 'Dummy', 'DUMMY',
            'mockData', 'mockAPI', 'mockResponse',
            'fakeData', 'fakeAPI', 'fakeResponse',
            'testData', 'testAPI', 'testResponse',
            'shouldUseMock', 'useMockData', 'isMockMode'
        ]
        
        this.mockPatterns = [
            /const\s+mock\w+\s*=/gi,
            /function\s+mock\w+/gi,
            /if\s*\(\s*\w*mock\w*/gi,
            /setTimeout\s*\(\s*\(\)\s*=>\s*{[\s\S]*?callback/gi,
            /const\s+\w+\s*=\s*\[[\s\S]*?\]/gi
        ]
    }
    
    // ğŸ”´ å…¨é¢æ£€æµ‹Mockæ•°æ®
    detectMockData(fileContent, filePath) {
        const violations = []
        
        // æ£€æµ‹å…³é”®è¯
        for (const keyword of this.mockKeywords) {
            if (fileContent.includes(keyword)) {
                const lines = this.findLinesWithKeyword(fileContent, keyword)
                violations.push({
                    type: 'MOCK_KEYWORD',
                    keyword: keyword,
                    file: filePath,
                    lines: lines,
                    severity: 'HIGH'
                })
            }
        }
        
        // æ£€æµ‹æ¨¡å¼
        for (const pattern of this.mockPatterns) {
            const matches = fileContent.match(pattern)
            if (matches) {
                violations.push({
                    type: 'MOCK_PATTERN',
                    pattern: pattern.toString(),
                    matches: matches,
                    file: filePath,
                    severity: 'CRITICAL'
                })
            }
        }
        
        return violations
    }
    
    // ğŸ”´ ç”Ÿæˆä¿®å¤å»ºè®®
    generateFixSuggestions(violations) {
        const suggestions = []
        
        for (const violation of violations) {
            switch (violation.type) {
                case 'MOCK_KEYWORD':
                    suggestions.push({
                        file: violation.file,
                        lines: violation.lines,
                        suggestion: `ç§»é™¤Mockå…³é”®è¯"${violation.keyword}"ï¼Œä½¿ç”¨çœŸå®APIè°ƒç”¨`,
                        example: 'api.getData().then(result => { /* ä½¿ç”¨çœŸå®æ•°æ® */ })'
                    })
                    break
                    
                case 'MOCK_PATTERN':
                    suggestions.push({
                        file: violation.file,
                        suggestion: 'ç§»é™¤Mockå‡½æ•°/æ¡ä»¶åˆ¤æ–­ï¼Œç›´æ¥è°ƒç”¨åç«¯API',
                        example: 'ç›´æ¥ä½¿ç”¨ï¼šuserAPI.login(params) æ›¿ä»£ mockLogin(params)'
                    })
                    break
            }
        }
        
        return suggestions
    }
    
    findLinesWithKeyword(content, keyword) {
        const lines = content.split('\n')
        const matchingLines = []
        
        lines.forEach((line, index) => {
            if (line.includes(keyword)) {
                matchingLines.push(index + 1)
            }
        })
        
        return matchingLines
    }
}
```

#### ç”Ÿäº§ç¯å¢ƒMockæ•°æ®é›¶å®¹å¿
```javascript
// âœ… å»ºç«‹Mockæ•°æ®æ£€æµ‹æœºåˆ¶
const mockDetector = new MockDataDetector()

// ğŸ”´ æ‰¹é‡æ£€æµ‹é¡¹ç›®ä¸­çš„Mockæ•°æ®
const scanProjectForMockData = async (projectPath) => {
    const jsFiles = await getAllJSFiles(projectPath)
    const results = []
    
    for (const filePath of jsFiles) {
        const content = await fs.readFile(filePath, 'utf8')
        const detection = mockDetector.detectMockData(content, filePath)
        
        if (detection.length > 0) {
            results.push({ filePath, violations: detection })
        }
    }
    
    return {
        totalFiles: jsFiles.length,
        violationFiles: results.length,
        totalViolations: results.reduce((sum, r) => sum + r.violations.length, 0),
        results: results
    }
}
```

### 8. ğŸ” è®¤è¯ä¸æƒé™å®‰å…¨å¼ºåŒ–

#### Tokenç®¡ç†å®‰å…¨æ ‡å‡†
```javascript
// âœ… JWT Tokenè‡ªåŠ¨åˆ·æ–°æœºåˆ¶
const tokenManager = {
    // æ£€æŸ¥Tokenæ˜¯å¦å³å°†è¿‡æœŸï¼ˆ30ç§’å†…ï¼‰
    checkTokenExpiry() {
        const token = app.globalData.accessToken
        if (!token) return false
        
        try {
            const payload = JSON.parse(atob(token.split('.')[1]))
            const expiryTime = payload.exp * 1000
            const currentTime = Date.now()
            
            return (expiryTime - currentTime) < 30000 // 30ç§’å†…è¿‡æœŸ
        } catch (error) {
            console.error('Tokenè§£æå¤±è´¥:', error)
            return true // è§£æå¤±è´¥è§†ä¸ºè¿‡æœŸ
        }
    },
    
    // è‡ªåŠ¨åˆ·æ–°Token
    async refreshTokenIfNeeded() {
        if (this.checkTokenExpiry()) {
            console.log('ğŸ”„ Tokenå³å°†è¿‡æœŸï¼Œè‡ªåŠ¨åˆ·æ–°...')
            try {
                const result = await authAPI.refresh(app.globalData.refreshToken)
                if (result.code === 0) {
                    app.globalData.accessToken = result.data.access_token
                    app.globalData.refreshToken = result.data.refresh_token
                    console.log('âœ… Tokenåˆ·æ–°æˆåŠŸ')
                } else {
                    throw new Error('Tokenåˆ·æ–°å¤±è´¥')
                }
            } catch (error) {
                console.error('âŒ Tokenåˆ·æ–°å¤±è´¥ï¼Œéœ€è¦é‡æ–°ç™»å½•:', error)
                app.logout()
            }
        }
    }
}
```

#### æƒé™éªŒè¯å¢å¼º
```javascript
// âœ… æ¯ä¸ªAPIè°ƒç”¨å‰éªŒè¯Tokenæœ‰æ•ˆæ€§
const secureAPICall = async (apiFunction, params) => {
    // æ£€æŸ¥å¹¶åˆ·æ–°Token
    await tokenManager.refreshTokenIfNeeded()
    
    // éªŒè¯ç”¨æˆ·æƒé™
    if (!app.globalData.accessToken) {
        throw new Error('ç”¨æˆ·æœªç™»å½•')
    }
    
    try {
        return await apiFunction(params)
    } catch (error) {
        if (error.code === 401) {
            console.log('ğŸ” è®¤è¯å¤±è´¥ï¼Œå°è¯•åˆ·æ–°Token...')
            await tokenManager.refreshTokenIfNeeded()
            return await apiFunction(params) // é‡è¯•ä¸€æ¬¡
        }
        throw error
    }
}
```

### 9. ğŸ›¡ï¸ æ•°æ®ä¼ è¾“ä¸å­˜å‚¨å®‰å…¨

#### APIé€šä¿¡å®‰å…¨æ ‡å‡†
```javascript
// âœ… å¼ºåˆ¶HTTPSä¼ è¾“æ£€æŸ¥
const secureRequest = (options) => {
    const { url } = options
    
    // æ£€æŸ¥HTTPS
    if (!url.startsWith('https://') && !url.startsWith('wss://')) {
        console.warn('âš ï¸ æ£€æµ‹åˆ°éHTTPSä¼ è¾“ï¼Œå­˜åœ¨å®‰å…¨é£é™©')
        
        // ç”Ÿäº§ç¯å¢ƒå¼ºåˆ¶HTTPS
        if (!app.globalData.isDev) {
            throw new Error('ç”Ÿäº§ç¯å¢ƒå¿…é¡»ä½¿ç”¨HTTPSä¼ è¾“')
        }
    }
    
    // æ·»åŠ å®‰å…¨å¤´
    const secureHeaders = {
        'Content-Type': 'application/json',
        'Accept': 'application/json',
        'X-Client-Type': 'miniprogram',
        'X-Client-Version': app.globalData.version,
        'X-Request-ID': generateRequestId(),
        'X-Timestamp': Date.now().toString()
    }
    
    return {
        ...options,
        header: { ...secureHeaders, ...options.header }
    }
}
```

#### æœ¬åœ°æ•°æ®å®‰å…¨å­˜å‚¨
```javascript
// âœ… æ•æ„Ÿæ•°æ®åŠ å¯†å­˜å‚¨
const secureStorage = {
    // åŠ å¯†å­˜å‚¨æ•æ„Ÿæ•°æ®
    setSecureItem(key, value) {
        try {
            const encryptedValue = this.encrypt(JSON.stringify(value))
            wx.setStorageSync(key, encryptedValue)
        } catch (error) {
            console.error('åŠ å¯†å­˜å‚¨å¤±è´¥:', error)
        }
    },
    
    // è§£å¯†è¯»å–æ•æ„Ÿæ•°æ®
    getSecureItem(key) {
        try {
            const encryptedValue = wx.getStorageSync(key)
            if (!encryptedValue) return null
            
            const decryptedValue = this.decrypt(encryptedValue)
            return JSON.parse(decryptedValue)
        } catch (error) {
            console.error('è§£å¯†è¯»å–å¤±è´¥:', error)
            return null
        }
    },
    
    // ç®€å•åŠ å¯†ï¼ˆå®é™…é¡¹ç›®ä¸­åº”ä½¿ç”¨æ›´å¼ºçš„åŠ å¯†ç®—æ³•ï¼‰
    encrypt(text) {
        return btoa(encodeURIComponent(text))
    },
    
    // ç®€å•è§£å¯†
    decrypt(encryptedText) {
        return decodeURIComponent(atob(encryptedText))
    }
}
```

### 10. ğŸš¨ é”™è¯¯çŠ¶æ€ä¸‹æ•°æ®å®‰å…¨å¤„ç†

#### ä¸¥ç¦ç”Ÿæˆæ¨¡æ‹Ÿæ•°æ®
```javascript
// âœ… é”™è¯¯é™çº§æœºåˆ¶ï¼šæ˜¾ç¤ºç©ºçŠ¶æ€è€Œéè™šå‡æ•°æ®
const handleDataLoadError = (error, context) => {
    console.error(`âŒ ${context}æ•°æ®åŠ è½½å¤±è´¥:`, error)
    
    // ğŸš¨ ä¸¥ç¦ç”Ÿæˆæ¨¡æ‹Ÿæ•°æ®
    // âŒ é”™è¯¯åšæ³•ï¼šreturn { data: mockData }
    
    // âœ… æ­£ç¡®åšæ³•ï¼šæ˜ç¡®å‘ŠçŸ¥é”™è¯¯æ¥æºå’Œç±»å‹
    let errorSource = 'æœªçŸ¥'
    let errorType = 'æ•°æ®è·å–å¤±è´¥'
    
    if (error.code >= 1000 && error.code < 2000) {
        errorSource = 'ä¸šåŠ¡é€»è¾‘'
        errorType = 'ä¸šåŠ¡è§„åˆ™éªŒè¯å¤±è´¥'
    } else if (error.code >= 2000 && error.code < 3000) {
        errorSource = 'åç«¯æœåŠ¡'
        errorType = 'æœåŠ¡å™¨å¤„ç†å¼‚å¸¸'
    } else if (error.code >= 3000) {
        errorSource = 'æ•°æ®åº“'
        errorType = 'æ•°æ®æŸ¥è¯¢å¤±è´¥'
    } else if (error.name === 'NetworkError') {
        errorSource = 'ç½‘ç»œè¿æ¥'
        errorType = 'ç½‘ç»œè¿æ¥ä¸­æ–­'
    }
    
    // æ˜¾ç¤ºæ˜ç¡®çš„é”™è¯¯æç¤º
    wx.showModal({
        title: `ğŸš¨ ${errorSource}é”™è¯¯`,
        content: `âŒ é”™è¯¯æ¥æºï¼š${errorSource}\nğŸ“ é”™è¯¯ç±»å‹ï¼š${errorType}\nğŸ”— é”™è¯¯è¯¦æƒ…ï¼š${error.message || 'æœªçŸ¥é”™è¯¯'}\n\nğŸš¨ ä¸¥ç¦ç”Ÿæˆæ¨¡æ‹Ÿç»“æœï¼\nè¯·è”ç³»æŠ€æœ¯äººå‘˜æ£€æŸ¥${errorSource}é—®é¢˜ã€‚`,
        showCancel: false,
        confirmText: 'çŸ¥é“äº†',
        confirmColor: '#ff4444'
    })
    
    // è¿”å›ç©ºçŠ¶æ€ï¼Œæ˜ç¡®æ ‡è¯†æ•°æ®æ¥æº
    return {
        data: null,
        error: true,
        errorSource: errorSource,
        errorType: errorType,
        message: `${errorSource}æœåŠ¡å¼‚å¸¸ï¼Œæ— æ³•è·å–æ•°æ®`
    }
}
```

### 11. ğŸ” è¿è§„ä»£ç è‡ªåŠ¨æ£€æµ‹è§„åˆ™

#### å¿…é¡»æ‹’ç»çš„å±é™©ä»£ç æ¨¡å¼
```javascript
// ğŸ”´ ä»£ç å®‰å…¨æ£€æµ‹å™¨
class CodeSecurityDetector {
    constructor() {
        this.dangerousPatterns = [
            // æ–¹æ³•è°ƒç”¨é”™è¯¯
            /this\.[a-zA-Z]+Config\(\)/g,
            /this\.[a-zA-Z]+Util\(\)/g,
            /this\.[a-zA-Z]+API\(\)/g,
            
            // ä¸å®‰å…¨å±æ€§è®¿é—®
            /globalData\.[a-zA-Z]+\.[a-zA-Z]+(?!\s*(\|\||&&|\?\.))/g,
            /app\.[a-zA-Z]+\.[a-zA-Z]+\.[a-zA-Z]+(?!\s*(\|\||&&|\?\.))/g,
            
            // Canvas APIè°ƒç”¨ç¼ºå°‘å…¼å®¹æ€§æ£€æŸ¥
            /(createLinearGradient|createRadialGradient|quadraticCurveTo)(?!.*typeof)(?!.*compatibility)/g,
            
            // ç¡¬ç¼–ç æ•°æ®
            /(const|let|var)\s+(PRIZES|PRODUCTS|CONFIG)\s*=\s*\[/g,
            /(const|let|var)\s+\w+\s*=\s*\[.*probability.*\]/g,
            
            // Mockæ ‡è¯†
            /(mock|fake|test|demo)(Data|Request|Api|Function)/gi,
            /setTimeout\(\s*\(\)\s*=>\s*{.*callback.*mockData.*}/g,
            
            // å‰ç«¯ä¸šåŠ¡é€»è¾‘è®¡ç®—
            /Math\.random\(\)\s*\*\s*\d+/g,
            /user\.(role|type)\s*===\s*['"]/g
        ]
    }
    
    // æ£€æµ‹å±é™©ä»£ç æ¨¡å¼
    detectDangerousCode(code) {
        const violations = []
        
        this.dangerousPatterns.forEach((pattern, index) => {
            const matches = code.match(pattern)
            if (matches) {
                violations.push({
                    patternIndex: index,
                    pattern: pattern.source,
                    matches: matches,
                    severity: this.getSeverity(index)
                })
            }
        })
        
        return violations
    }
    
    getSeverity(patternIndex) {
        if (patternIndex < 6) return 'CRITICAL'
        if (patternIndex < 10) return 'HIGH'
        return 'MEDIUM'
    }
}
```

### 12. ğŸ¯ é¡¹ç›®è¿è¡ŒçŠ¶æ€æ£€æŸ¥æœºåˆ¶

#### å®Œæˆä»»åŠ¡åçš„é¡¹ç›®è¿è¡Œæ£€æŸ¥
```javascript
// âœ… å®Œæˆå…¨éƒ¨ä»»åŠ¡åæ£€æŸ¥é¡¹ç›®æ˜¯å¦å¯ä»¥æ­£å¸¸è¿è¡Œ
const checkProjectHealth = () => {
  const checks = {
    components: checkComponentsStatus(),     // æ£€æŸ¥æ ¸å¿ƒç»„ä»¶
    apiConnection: checkAPIStatus(),        // æ£€æŸ¥APIè¿æ¥çŠ¶æ€
    dataIntegrity: checkDataIntegrity(),    // æ£€æŸ¥æ•°æ®å®Œæ•´æ€§
    compatibility: checkCompatibility()     // æ£€æŸ¥å…¼å®¹æ€§æ”¯æŒ
  }
  
  const issues = []
  Object.keys(checks).forEach(key => {
    if (!checks[key].status) {
      issues.push({
        type: key,
        error: checks[key].error,
        solution: checks[key].solution
      })
    }
  })
  
  if (issues.length > 0) {
    console.error('ğŸš¨ é¡¹ç›®è¿è¡Œæ£€æŸ¥å‘ç°é—®é¢˜:', issues)
    fixProjectIssues(issues)  // å¦‚æœæœ‰é—®é¢˜å°±è¦é©¬ä¸Šä¿®å¤
  } else {
    console.log('âœ… é¡¹ç›®è¿è¡ŒçŠ¶æ€è‰¯å¥½')
  }
}

// é—®é¢˜ç±»å‹åˆ†æä¸è§£å†³
const analyzeAndSolve = (error) => {
  const problemTypes = {
    'Component Missing': {
      analysis: 'æ£€æŸ¥ç»„ä»¶æ–‡ä»¶æ˜¯å¦å­˜åœ¨',
      solution: 'é‡æ–°åˆ›å»ºæˆ–ä¿®å¤ç»„ä»¶æ–‡ä»¶'
    },
    'Component Error': {
      analysis: 'ç»„ä»¶é€»è¾‘é”™è¯¯æˆ–APIè°ƒç”¨é—®é¢˜',
      solution: 'æ£€æŸ¥ç»„ä»¶ä»£ç å’ŒAPIè°ƒç”¨'
    },
    'Logic Error': {
      analysis: 'ä¸šåŠ¡é€»è¾‘æ–¹æ¡ˆä¸æ­£ç¡®',
      solution: 'é‡æ–°è®¾è®¡ä¸šåŠ¡é€»è¾‘æµç¨‹'
    },
    'Environment Issue': {
      analysis: 'å¼€å‘ç¯å¢ƒé…ç½®é—®é¢˜',
      solution: 'æ£€æŸ¥å¾®ä¿¡å¼€å‘è€…å·¥å…·é…ç½®'
    }
  }
  
  return problemTypes[error.type] || {
    analysis: 'æœªçŸ¥é—®é¢˜ç±»å‹',
    solution: 'è¯·è¿›è¡Œå…¨é¢çš„ä»£ç å®¡æŸ¥'
  }
}
```

### 13. ğŸ§¹ ä»£ç æ¸…ç†ä¸æ–‡ä»¶ç®¡ç†

#### è‡ªåŠ¨æ¸…ç†ä¸´æ—¶æ–‡ä»¶è§„åˆ™
```javascript
// âœ… æ¯æ¬¡å®Œæˆä»»åŠ¡ååˆ›å»ºçš„ä¸´æ—¶æ–‡ä»¶ã€æµ‹è¯•æ–‡ä»¶éƒ½è¦è‡ªè¡Œåˆ é™¤
const cleanupTemporaryFiles = () => {
  const tempPatterns = [
    '**/*.temp.js',
    '**/*.test.tmp',
    '**/temp_*',
    '**/*.backup',
    '**/*.log',
    '**/*unused*.md'  // æ²¡ç”¨ã€é‡å¤çš„æ–‡ä»¶å’Œæ— ç”¨çš„mdæ–‡ä»¶éƒ½è¦è‡ªè¡Œåˆ é™¤
  ]
  
  tempPatterns.forEach(pattern => {
    console.log(`ğŸ§¹ æ¸…ç†ä¸´æ—¶æ–‡ä»¶: ${pattern}`)
  })
  
  cleanupDuplicateFiles()
  cleanupUnusedMarkdownFiles()
}
```

## ğŸ“š ç›¸å…³è§„åˆ™æ–‡æ¡£å¼•ç”¨

- **PowerShellæ§åˆ¶å°ç¨³å®šæ€§**: è¯¦è§ `development-automation-unified.mdc`
- **å·¥å…·è°ƒç”¨å‚æ•°éªŒè¯**: è¯¦è§ `1.mdc` - å·¥å…·è°ƒç”¨å‚æ•°éªŒè¯è§„åˆ™
- **å¹¶è¡Œå·¥å…·è°ƒç”¨ä¼˜åŒ–**: è¯¦è§ `1.mdc` - å¹¶è¡Œå·¥å…·è°ƒç”¨å¼ºåˆ¶ä¼˜åŒ–è§„åˆ™
- **å¾®ä¿¡å°ç¨‹åºé¡¹ç›®è¯†åˆ«**: è¯¦è§ `development-automation-unified.mdc`
- **ä¿¡æ¯æ”¶é›†ç­–ç•¥**: è¯¦è§ `development-automation-unified.mdc`

---

**è§„åˆ™åˆ›å»ºæ—¶é—´**: 2025å¹´01æœˆ03æ—¥  
**æœ€åæ›´æ–°æ—¶é—´**: 2025å¹´01æœˆ03æ—¥  
**æ›´æ–°å†…å®¹**: æ•´ç†åˆå¹¶é‡å¤å†…å®¹ï¼Œä¿ç•™æ ¸å¿ƒå®‰å…¨è§„åˆ™ï¼Œä¼˜åŒ–Mockæ•°æ®æ£€æµ‹ç³»ç»Ÿ  
**é€‚ç”¨èŒƒå›´**: å¤©å·¥é¡¹ç›®æ‰€æœ‰å¼€å‘æ´»åŠ¨  
**ç»´æŠ¤çŠ¶æ€**: âœ… å·²æ•´ç† - é‡å¤å†…å®¹å·²åˆå¹¶ï¼Œå®‰å…¨è§„åˆ™å®Œæ•´æ€§å·²ä¿è¯

## ğŸš¨ 2025å¹´01æœˆ03æ—¥ä¼šè¯é—®é¢˜åˆ†ææ–°å¢å®‰å…¨è§„åˆ™

### 7. ğŸŒ åŸŸåé…ç½®å®‰å…¨è§„åˆ™
```javascript
// ğŸ”´ åŸŸåé…ç½®å®‰å…¨æ£€æŸ¥ - é¢„é˜²åŸŸåæ‹¼å†™é”™è¯¯å¯¼è‡´çš„å®‰å…¨é—®é¢˜
class DomainSecurityChecker {
    constructor() {
        this.trustedDomains = {
            'rqchrlqndora.sealosbja.site': {
                environment: 'production',
                ssl: true,
                protocols: ['https', 'wss'],
                verified: true
            }
        }
        
        this.suspiciousDomains = [
            'rqchrlandora.sealoshqja.site',    // é’“é±¼åŸŸåå¯èƒ½æ€§
            'rqchrlqndora.sealoshqja.site',    // æ‹¼å†™é”™è¯¯åŸŸå
            'rqchrlandora.sealosbja.site'      // ç±»ä¼¼åŸŸå
        ]
    }
    
    // ğŸ”´ æ£€æŸ¥åŸŸåæ˜¯å¦å®‰å…¨
    checkDomainSecurity(domain) {
        const securityIssues = []
        
        // æ£€æŸ¥æ˜¯å¦æ˜¯å¯ç–‘åŸŸå
        if (this.suspiciousDomains.includes(domain)) {
            securityIssues.push({
                type: 'SUSPICIOUS_DOMAIN',
                severity: 'CRITICAL',
                message: `æ£€æµ‹åˆ°å¯ç–‘åŸŸå: ${domain}`,
                risk: 'å¯èƒ½æ˜¯é’“é±¼ç½‘ç«™æˆ–æ‹¼å†™é”™è¯¯',
                action: 'ç«‹å³åœæ­¢ä½¿ç”¨ï¼ŒéªŒè¯æ­£ç¡®åŸŸå'
            })
        }
        
        // æ£€æŸ¥æ˜¯å¦ä½¿ç”¨HTTPS
        if (!domain.includes('https://') && !domain.includes('wss://')) {
            securityIssues.push({
                type: 'INSECURE_PROTOCOL',
                severity: 'HIGH',
                message: `åŸŸåæœªä½¿ç”¨å®‰å…¨åè®®: ${domain}`,
                risk: 'æ•°æ®ä¼ è¾“å¯èƒ½è¢«çªƒå¬',
                action: 'å¼ºåˆ¶ä½¿ç”¨HTTPS/WSSåè®®'
            })
        }
        
        return securityIssues
    }
    
    // ğŸ”´ éªŒè¯åŸŸåè¯ä¹¦
    async validateDomainCertificate(domain) {
        try {
            const response = await fetch(`https://${domain}`, {
                method: 'HEAD',
                timeout: 5000
            })
            
            const securityHeaders = [
                'strict-transport-security',
                'x-content-type-options',
                'x-frame-options',
                'x-xss-protection'
            ]
            
            const missingHeaders = securityHeaders.filter(header => 
                !response.headers.get(header)
            )
            
            if (missingHeaders.length > 0) {
                return {
                    valid: false,
                    issues: missingHeaders.map(header => ({
                        type: 'MISSING_SECURITY_HEADER',
                        header,
                        severity: 'MEDIUM'
                    }))
                }
            }
            
            return { valid: true, issues: [] }
            
        } catch (error) {
            return {
                valid: false,
                issues: [{
                    type: 'CERTIFICATE_ERROR',
                    error: error.message,
                    severity: 'HIGH'
                }]
            }
        }
    }
}
```

### 8. ğŸ”§ APIè°ƒç”¨å®‰å…¨è§„åˆ™
```javascript
// ğŸ”´ APIè°ƒç”¨å®‰å…¨éªŒè¯ - é¢„é˜²APIè°ƒç”¨é”™è¯¯å¯¼è‡´çš„å®‰å…¨é—®é¢˜
class APISecurityValidator {
    constructor() {
        this.secureAPIs = {
            'authAPI': {
                methods: ['verifyToken', 'login', 'refresh', 'logout'],
                requiresAuth: true,
                sensitive: true
            },
            'userAPI': {
                methods: ['getUserInfo', 'updateUserInfo', 'getPointsRecords'],
                requiresAuth: true,
                sensitive: true
            },
            'lotteryAPI': {
                methods: ['getConfig', 'draw', 'getRecords'],
                requiresAuth: true,
                sensitive: false
            }
        }
        
        this.dangerousCallPatterns = [
            'userAPI.verifyToken',    // é”™è¯¯çš„APIè°ƒç”¨
            'eval(',                  // ä»£ç æ³¨å…¥é£é™©
            'innerHTML =',            // XSSé£é™©
            'document.write('         // XSSé£é™©
        ]
    }
    
    // ğŸ”´ æ£€æŸ¥APIè°ƒç”¨æ˜¯å¦å®‰å…¨
    checkAPICallSecurity(apiObject, method, context) {
        const securityIssues = []
        
        // æ£€æŸ¥æ˜¯å¦æ˜¯å±é™©çš„è°ƒç”¨æ¨¡å¼
        const callPattern = `${apiObject}.${method}`
        if (this.dangerousCallPatterns.includes(callPattern)) {
            securityIssues.push({
                type: 'DANGEROUS_API_CALL',
                severity: 'HIGH',
                message: `å±é™©çš„APIè°ƒç”¨: ${callPattern}`,
                risk: 'APIè°ƒç”¨é”™è¯¯ï¼Œå¯èƒ½å¯¼è‡´åŠŸèƒ½å¤±æ•ˆ',
                action: 'æ£€æŸ¥APIå¯¹è±¡å’Œæ–¹æ³•æ˜¯å¦æ­£ç¡®'
            })
        }
        
        // æ£€æŸ¥æ˜¯å¦éœ€è¦è®¤è¯
        const apiConfig = this.secureAPIs[apiObject]
        if (apiConfig && apiConfig.requiresAuth) {
            if (!context.hasAuthHeader) {
                securityIssues.push({
                    type: 'MISSING_AUTH_HEADER',
                    severity: 'CRITICAL',
                    message: `æ•æ„ŸAPIè°ƒç”¨ç¼ºå°‘è®¤è¯: ${callPattern}`,
                    risk: 'æœªè®¤è¯çš„APIè°ƒç”¨å¯èƒ½è¢«æ‹’ç»',
                    action: 'ç¡®ä¿è¯·æ±‚åŒ…å«Authorizationå¤´'
                })
            }
        }
        
        // æ£€æŸ¥æ˜¯å¦æ˜¯æ•æ„Ÿæ•°æ®æ“ä½œ
        if (apiConfig && apiConfig.sensitive) {
            if (!context.useHTTPS) {
                securityIssues.push({
                    type: 'INSECURE_SENSITIVE_DATA',
                    severity: 'HIGH',
                    message: `æ•æ„Ÿæ•°æ®æœªä½¿ç”¨HTTPSä¼ è¾“: ${callPattern}`,
                    risk: 'æ•æ„Ÿæ•°æ®å¯èƒ½è¢«çªƒå¬',
                    action: 'å¼ºåˆ¶ä½¿ç”¨HTTPSä¼ è¾“æ•æ„Ÿæ•°æ®'
                })
            }
        }
        
        return securityIssues
    }
    
    // ğŸ”´ ç”Ÿæˆå®‰å…¨è°ƒç”¨å»ºè®®
    generateSecureCallSuggestion(apiObject, method) {
        const apiConfig = this.secureAPIs[apiObject]
        
        if (!apiConfig) {
            return {
                message: `æœªçŸ¥çš„APIå¯¹è±¡: ${apiObject}`,
                suggestion: 'è¯·æ£€æŸ¥APIå¯¹è±¡æ˜¯å¦æ­£ç¡®å¯¼å…¥'
            }
        }
        
        if (!apiConfig.methods.includes(method)) {
            return {
                message: `${apiObject}ä¸åŒ…å«${method}æ–¹æ³•`,
                suggestion: `å¯ç”¨æ–¹æ³•: ${apiConfig.methods.join(', ')}`,
                possibleCorrection: this.findPossibleCorrection(method)
            }
        }
        
        return {
            message: `${apiObject}.${method}()è°ƒç”¨æ­£ç¡®`,
            securityRequirements: {
                requiresAuth: apiConfig.requiresAuth,
                sensitive: apiConfig.sensitive,
                useHTTPS: apiConfig.requiresAuth || apiConfig.sensitive
            }
        }
    }
}
```

### 9. ğŸ”„ æ‰¹é‡æ“ä½œå®‰å…¨è§„åˆ™
```javascript
// ğŸ”´ æ‰¹é‡æ“ä½œå®‰å…¨æ£€æŸ¥ - é¢„é˜²æ‰¹é‡æ“ä½œå¯¼è‡´çš„å®‰å…¨é—®é¢˜
class BatchOperationSecurity {
    constructor() {
        this.maxBatchSize = 10        // æœ€å¤§æ‰¹é‡æ“ä½œæ•°é‡
        this.maxConcurrency = 5       // æœ€å¤§å¹¶å‘æ•°
        this.operationTimeout = 30000 // æ“ä½œè¶…æ—¶æ—¶é—´
        
        this.sensitiveOperations = [
            'domain_config_change',
            'api_path_modification',
            'security_header_update',
            'authentication_change'
        ]
    }
    
    // ğŸ”´ æ£€æŸ¥æ‰¹é‡æ“ä½œæ˜¯å¦å®‰å…¨
    checkBatchOperationSecurity(operation) {
        const securityIssues = []
        
        // æ£€æŸ¥æ‰¹é‡å¤§å°
        if (operation.batchSize > this.maxBatchSize) {
            securityIssues.push({
                type: 'EXCESSIVE_BATCH_SIZE',
                severity: 'MEDIUM',
                message: `æ‰¹é‡æ“ä½œè¿‡å¤§: ${operation.batchSize} > ${this.maxBatchSize}`,
                risk: 'å¯èƒ½å¯¼è‡´ç³»ç»Ÿè¿‡è½½æˆ–æ“ä½œå¤±è´¥',
                action: 'åˆ†æ‰¹å¤„ç†ï¼Œæ¯æ‰¹ä¸è¶…è¿‡10ä¸ªæ“ä½œ'
            })
        }
        
        // æ£€æŸ¥å¹¶å‘æ•°
        if (operation.concurrency > this.maxConcurrency) {
            securityIssues.push({
                type: 'EXCESSIVE_CONCURRENCY',
                severity: 'MEDIUM',
                message: `å¹¶å‘æ•°è¿‡é«˜: ${operation.concurrency} > ${this.maxConcurrency}`,
                risk: 'å¯èƒ½å¯¼è‡´ç³»ç»Ÿèµ„æºè€—å°½',
                action: 'é™åˆ¶å¹¶å‘æ•°ï¼Œé¿å…ç³»ç»Ÿè¿‡è½½'
            })
        }
        
        // æ£€æŸ¥æ˜¯å¦æ˜¯æ•æ„Ÿæ“ä½œ
        if (this.sensitiveOperations.includes(operation.type)) {
            securityIssues.push({
                type: 'SENSITIVE_BATCH_OPERATION',
                severity: 'HIGH',
                message: `æ•æ„Ÿæ‰¹é‡æ“ä½œ: ${operation.type}`,
                risk: 'æ‰¹é‡ä¿®æ”¹æ•æ„Ÿé…ç½®å¯èƒ½å¯¼è‡´ç³»ç»Ÿæ•…éšœ',
                action: 'é€ä¸ªéªŒè¯æ¯ä¸ªæ“ä½œï¼Œç¡®ä¿æ­£ç¡®æ€§'
            })
        }
        
        return securityIssues
    }
    
    // ğŸ”´ ç”Ÿæˆå®‰å…¨æ‰¹å¤„ç†è®¡åˆ’
    generateSecureBatchPlan(operations) {
        const plan = {
            operations: [],
            phases: [],
            safeguards: []
        }
        
        // æŒ‰æ•æ„Ÿç¨‹åº¦åˆ†ç»„
        const sensitiveOps = operations.filter(op => 
            this.sensitiveOperations.includes(op.type)
        )
        const normalOps = operations.filter(op => 
            !this.sensitiveOperations.includes(op.type)
        )
        
        // æ•æ„Ÿæ“ä½œä¸²è¡Œå¤„ç†
        if (sensitiveOps.length > 0) {
            plan.phases.push({
                type: 'SENSITIVE_SEQUENTIAL',
                operations: sensitiveOps,
                concurrency: 1,
                validation: 'MANUAL'
            })
        }
        
        // æ™®é€šæ“ä½œå¹¶è¡Œå¤„ç†
        if (normalOps.length > 0) {
            const batches = this.splitIntoBatches(normalOps, this.maxBatchSize)
            batches.forEach((batch, index) => {
                plan.phases.push({
                    type: 'NORMAL_PARALLEL',
                    operations: batch,
                    concurrency: Math.min(batch.length, this.maxConcurrency),
                    validation: 'AUTOMATIC'
                })
            })
        }
        
        // æ·»åŠ å®‰å…¨æªæ–½
        plan.safeguards = [
            'æ¯ä¸ªé˜¶æ®µå®ŒæˆåéªŒè¯ç»“æœ',
            'å‘ç°é”™è¯¯ç«‹å³åœæ­¢åç»­æ“ä½œ',
            'ä¿ç•™æ“ä½œå‰çŠ¶æ€å¤‡ä»½',
            'æä¾›å›æ»šæœºåˆ¶'
        ]
        
        return plan
    }
}
```

### 10. ğŸ“Š å®‰å…¨ç›‘æ§è§„åˆ™
```javascript
// ğŸ”´ å®‰å…¨ç›‘æ§ç³»ç»Ÿ - å®æ—¶ç›‘æ§å®‰å…¨é—®é¢˜
class SecurityMonitor {
    constructor() {
        this.securityEvents = []
        this.alertThresholds = {
            'SUSPICIOUS_DOMAIN': 1,       // å¯ç–‘åŸŸåç«‹å³å‘Šè­¦
            'DANGEROUS_API_CALL': 1,      // å±é™©APIè°ƒç”¨ç«‹å³å‘Šè­¦
            'EXCESSIVE_BATCH_SIZE': 3,    // æ‰¹é‡æ“ä½œè¿‡å¤§3æ¬¡å‘Šè­¦
            'MISSING_AUTH_HEADER': 1      // ç¼ºå°‘è®¤è¯å¤´ç«‹å³å‘Šè­¦
        }
        
        this.alertCounts = new Map()
    }
    
    // ğŸ”´ è®°å½•å®‰å…¨äº‹ä»¶
    recordSecurityEvent(event) {
        const securityEvent = {
            ...event,
            timestamp: new Date().toISOString(),
            id: this.generateEventId()
        }
        
        this.securityEvents.push(securityEvent)
        
        // æ£€æŸ¥æ˜¯å¦éœ€è¦å‘Šè­¦
        this.checkAlertThreshold(event.type)
        
        console.log(`ğŸ”’ å®‰å…¨äº‹ä»¶è®°å½•: ${event.type} - ${event.message}`)
    }
    
    // ğŸ”´ æ£€æŸ¥å‘Šè­¦é˜ˆå€¼
    checkAlertThreshold(eventType) {
        const currentCount = this.alertCounts.get(eventType) || 0
        const newCount = currentCount + 1
        this.alertCounts.set(eventType, newCount)
        
        const threshold = this.alertThresholds[eventType] || 5
        
        if (newCount >= threshold) {
            this.triggerSecurityAlert(eventType, newCount)
        }
    }
    
    // ğŸ”´ è§¦å‘å®‰å…¨å‘Šè­¦
    triggerSecurityAlert(eventType, count) {
        const alert = {
            type: 'SECURITY_ALERT',
            eventType,
            count,
            timestamp: new Date().toISOString(),
            severity: this.getAlertSeverity(eventType),
            message: `å®‰å…¨å‘Šè­¦: ${eventType} å‘ç”Ÿ${count}æ¬¡`,
            recommendedAction: this.getRecommendedAction(eventType)
        }
        
        console.error(`ğŸš¨ å®‰å…¨å‘Šè­¦: ${alert.message}`)
        console.error(`ğŸ”§ å»ºè®®è¡ŒåŠ¨: ${alert.recommendedAction}`)
        
        // ä¸¥é‡å‘Šè­¦æ—¶åœæ­¢æ“ä½œ
        if (alert.severity === 'CRITICAL') {
            console.error('ğŸ›‘ æ£€æµ‹åˆ°ä¸¥é‡å®‰å…¨é—®é¢˜ï¼Œå»ºè®®ç«‹å³åœæ­¢æ“ä½œï¼')
            
            return {
                stopOperation: true,
                alert
            }
        }
        
        return {
            stopOperation: false,
            alert
        }
    }
    
    // ğŸ”´ ç”Ÿæˆå®‰å…¨æŠ¥å‘Š
    generateSecurityReport() {
        const report = {
            reportTime: new Date().toISOString(),
            totalEvents: this.securityEvents.length,
            eventsByType: this.groupEventsByType(),
            alertHistory: Array.from(this.alertCounts.entries()),
            recommendations: this.generateSecurityRecommendations()
        }
        
        return report
    }
    
    // ğŸ”´ ç”Ÿæˆå®‰å…¨å»ºè®®
    generateSecurityRecommendations() {
        const recommendations = []
        
        // åŸºäºäº‹ä»¶ç±»å‹ç”Ÿæˆå»ºè®®
        const eventTypes = this.groupEventsByType()
        
        for (const [eventType, events] of Object.entries(eventTypes)) {
            if (events.length > 0) {
                switch (eventType) {
                    case 'SUSPICIOUS_DOMAIN':
                        recommendations.push({
                            type: 'DOMAIN_SECURITY',
                            priority: 'HIGH',
                            message: 'æ£€æµ‹åˆ°å¯ç–‘åŸŸåä½¿ç”¨',
                            action: 'ç«‹å³éªŒè¯æ‰€æœ‰åŸŸåé…ç½®çš„æ­£ç¡®æ€§å’Œå®‰å…¨æ€§'
                        })
                        break
                        
                    case 'DANGEROUS_API_CALL':
                        recommendations.push({
                            type: 'API_SECURITY',
                            priority: 'HIGH',
                            message: 'æ£€æµ‹åˆ°å±é™©APIè°ƒç”¨',
                            action: 'å®¡æŸ¥æ‰€æœ‰APIè°ƒç”¨ï¼Œç¡®ä¿ä½¿ç”¨æ­£ç¡®çš„æ–¹æ³•'
                        })
                        break
                        
                    case 'EXCESSIVE_BATCH_SIZE':
                        recommendations.push({
                            type: 'BATCH_SECURITY',
                            priority: 'MEDIUM',
                            message: 'æ£€æµ‹åˆ°è¿‡å¤§æ‰¹é‡æ“ä½œ',
                            action: 'ä¼˜åŒ–æ‰¹é‡æ“ä½œç­–ç•¥ï¼Œåˆ†æ‰¹å¤„ç†å¤§é‡æ•°æ®'
                        })
                        break
                }
            }
        }
        
        return recommendations
    }
}
```

---

**æ–°å¢å®‰å…¨è§„åˆ™åˆ›å»ºæ—¶é—´**: 2025å¹´01æœˆ03æ—¥  
**åŸºäºå®‰å…¨äº‹ä»¶**: åŸŸåé…ç½®é”™è¯¯ã€APIè°ƒç”¨é”™è¯¯ç­‰å®‰å…¨é—®é¢˜  
**å®‰å…¨ç­‰çº§**: é«˜çº§å®‰å…¨è§„åˆ™ï¼Œè¿åæ—¶ç«‹å³åœæ­¢æ“ä½œ  
**é€‚ç”¨èŒƒå›´**: æ‰€æœ‰æ¶‰åŠåŸŸåã€APIã€æ‰¹é‡æ“ä½œçš„å¼€å‘ä¼šè¯  
**ç»´æŠ¤è´£ä»»**: æ ¸å¿ƒå¼€å‘å›¢é˜Ÿï¼Œå®šæœŸå®¡æŸ¥å’Œæ›´æ–°
```






---
description: 
globs: 
alwaysApply: true
---
# ğŸ”§ å¼€å‘ç¯å¢ƒä¸å·¥å…·ç»Ÿä¸€è§„èŒƒ

## ğŸš¨ æ ¸å¿ƒç›®æ ‡ï¼šç¡®ä¿PowerShellç¯å¢ƒç¨³å®šæ€§å’Œå¼€å‘å·¥å…·æ­£å¸¸è¿è¡Œ

### 1. ğŸ›¡ï¸ PowerShellæ§åˆ¶å°ç¨³å®šæ€§ä¿éšœ

#### PSConsoleReadLineæ¨¡å—é¢„æ£€æœºåˆ¶
```powershell
# ğŸ”´ å¼ºåˆ¶è¦æ±‚ï¼šç”ŸæˆPowerShellå‘½ä»¤å‰è‡ªåŠ¨æ£€æŸ¥æ¨¡å—å®Œæ•´æ€§
Get-Module PSConsoleReadLine -ListAvailable

# ğŸ”´ æ¨¡å—æŸåæ—¶ä¼˜å…ˆä¿®å¤
if ($module.Version -ne $expectedVersion) {
    Update-Module PSConsoleReadLine -Force
}

# ğŸ”´ å¼ºåˆ¶é…ç½®ï¼šæ‰€æœ‰æ¶‰åŠä¸­æ–‡å­—ç¬¦çš„ç»ˆç«¯æ“ä½œ
[Console]::OutputEncoding = [Text.UTF8Encoding]::UTF8  
[Console]::InputEncoding = [Text.UTF8Encoding]::UTF8
```

#### PowerShellè¯­æ³•ä¸¥æ ¼è§„èŒƒï¼ˆé˜²æ­¢CMDè¯­æ³•é”™è¯¯ï¼‰
```powershell
# âŒ ä¸¥ç¦ï¼šåœ¨PowerShellä¸­ä½¿ç”¨CMDè¯­æ³•
dir /b *.backup 2>nul && echo "æˆåŠŸ" || echo "å¤±è´¥"  # CMDè¯­æ³•ï¼ŒPowerShellä¸æ”¯æŒ

# âœ… æ­£ç¡®ï¼šä½¿ç”¨PowerShellåŸç”Ÿè¯­æ³•
Get-ChildItem -Name "*.backup" -ErrorAction SilentlyContinue
if ($?) { Write-Host "æˆåŠŸ" } else { Write-Host "å¤±è´¥" }

# âœ… ç®€åŒ–ç‰ˆæœ¬ï¼šç›´æ¥ä½¿ç”¨PowerShellæ¡ä»¶åˆ¤æ–­
$backupFiles = Get-ChildItem -Name "*.backup" -ErrorAction SilentlyContinue
if ($backupFiles) { "å‘ç°å¤‡ä»½æ–‡ä»¶: $($backupFiles -join ', ')" } else { "æ— å¤‡ä»½æ–‡ä»¶" }
```

#### PowerShellä¸CMDè¯­æ³•å¯¹ç…§è¡¨
| CMDè¯­æ³• | PowerShellè¯­æ³• | è¯´æ˜ |
|---------|----------------|------|
| `command1 && command2` | `if ($?) { command2 }` | æˆåŠŸæ—¶æ‰§è¡Œ |
| `command1 \|\| command2` | `if (!$?) { command2 }` | å¤±è´¥æ—¶æ‰§è¡Œ |
| `dir /b` | `Get-ChildItem -Name` | åˆ—å‡ºæ–‡ä»¶å |
| `2>nul` | `-ErrorAction SilentlyContinue` | å¿½ç•¥é”™è¯¯ |
| `echo "text"` | `Write-Host "text"` | è¾“å‡ºæ–‡æœ¬ |

#### è‡ªåŠ¨è¯­æ³•æ£€æŸ¥è§„åˆ™
```powershell
# ğŸ”´ ç”ŸæˆPowerShellå‘½ä»¤å‰å¿…é¡»æ£€æŸ¥çš„ç¦ç”¨æ¨¡å¼
$forbiddenPatterns = @(
    '&&',           # CMDæ¡ä»¶æ‰§è¡Œ
    '\|\|',         # CMDæˆ–æ‰§è¡Œ  
    '2>nul',        # CMDé”™è¯¯é‡å®šå‘
    'dir /b',       # CMDç›®å½•åˆ—è¡¨
    '>nul 2>&1'     # CMDå®Œå…¨é™é»˜
)

# âœ… è‡ªåŠ¨æ›¿æ¢ä¸ºPowerShellç­‰æ•ˆè¯­æ³•
foreach ($pattern in $forbiddenPatterns) {
    if ($command -match $pattern) {
        Write-Warning "âš ï¸ æ£€æµ‹åˆ°CMDè¯­æ³•: $patternï¼Œè‡ªåŠ¨è½¬æ¢ä¸ºPowerShellè¯­æ³•"
        # æ‰§è¡Œè‡ªåŠ¨è½¬æ¢é€»è¾‘
    }
}
```

### 2. ğŸ”§ Gitåˆ†é¡µå™¨å¡æ­»é¢„é˜²è§„åˆ™

#### ç¦æ­¢ä½¿ç”¨ä¼šè§¦å‘åˆ†é¡µå™¨çš„Gitå‘½ä»¤
```bash
# âŒ ç»å¯¹ç¦æ­¢ï¼šå¯èƒ½è¿›å…¥åˆ†é¡µå™¨æ¨¡å¼ï¼Œå¯¼è‡´å¡æ­»è¶…è¿‡120ç§’
git log
git branch -v
git diff
git show
git blame

# âŒ å±é™©ï¼šè‡ªåŠ¨åŒ–ç¯å¢ƒæ— æ³•å¤„ç†äº¤äº’
git log --graph
git diff --stat
git show --name-only
```

#### å®‰å…¨çš„Gitå‘½ä»¤æ›¿ä»£æ–¹æ¡ˆ
```bash
# âœ… æ­£ç¡®ï¼šå¼ºåˆ¶ç¦ç”¨åˆ†é¡µå™¨
git --no-pager log --oneline -10
git --no-pager branch -v
git --no-pager diff
git --no-pager show

# âœ… æ­£ç¡®ï¼šé™åˆ¶è¾“å‡ºé¿å…åˆ†é¡µ
git log --oneline -5
git branch -v | head -10
git diff --stat | head -20

# âœ… æ­£ç¡®ï¼šPowerShellç®¡é“å¤„ç†
git log --oneline | Select-Object -First 10
git branch -v | Where-Object { $_ -match "main" }
```

#### å¼ºåˆ¶é…ç½®æ£€æŸ¥
```bash
# æ¯ä¸ªé¡¹ç›®å¼€å§‹å‰å¿…é¡»æ‰§è¡Œï¼šå…¨å±€ç¦ç”¨åˆ†é¡µå™¨
git config --global core.pager ""
git config --global pager.branch false
git config --global pager.log false
git config --global pager.diff false
git config --global pager.show false

# éªŒè¯é…ç½®ç”Ÿæ•ˆ
git branch -v
git log --oneline -3
```

#### æŒ‡ä»¤è¶…æ—¶å¤„ç†è§„åˆ™
```
ğŸš¨ 120ç§’è¶…æ—¶è§„åˆ™ï¼š
- ä¸€æ—¦æŒ‡ä»¤è¿è¡Œè¶…è¿‡120ç§’æ²¡å‡ºä»»ä½•ç»“æœæˆ–æ²¡æœ‰æ­£ç¡®é€€å‡º
- è‡ªåŠ¨é‡æ–°è¿è¡Œè¿™ä¸ªæŒ‡ä»¤ï¼Œå†ä¸è¡Œå°±æ¢å¦ä¸€ç§è§£å†³æ–¹æ¡ˆ
- ç¬¬ä¸€æ¬¡é‡è¯•ï¼šgit --no-pager [åŸå‘½ä»¤]
- ç¬¬äºŒæ¬¡é‡è¯•ï¼šåº”ç”¨å…¨å±€é…ç½®åé‡è¯•
- æœ€åæ–¹æ¡ˆï¼šä½¿ç”¨ç®€åŒ–çš„ç­‰æ•ˆå‘½ä»¤
```

### 3. ğŸ” æ–‡ä»¶æœç´¢å‘½ä»¤è§„èŒƒ

#### å¼ºåˆ¶è¦æ±‚ï¼šé¡¹ç›®æ–‡ä»¶ç»Ÿè®¡å‰å¿…é¡»å…ˆäº†è§£ç›®å½•ç»“æ„
```powershell
# ğŸ”´ ç¬¬ä¸€æ­¥ï¼šæ€»æ˜¯å…ˆæŸ¥çœ‹ç›®å½•ç»“æ„ï¼Œæ·±åº¦æ€è€ƒç†è§£é¡¹ç›®æ–‡ä»¶ç»„ç»‡
list_dir pages  # æˆ–è€… Get-ChildItem pages -Directory

# ğŸ”´ ç¬¬äºŒæ­¥ï¼šæ ¹æ®ç»“æ„é€‰æ‹©æ­£ç¡®å‘½ä»¤
# å¦‚æœæ–‡ä»¶åœ¨å­ç›®å½•ä¸­ï¼Œå¿…é¡»ä½¿ç”¨ -Recurse
Get-ChildItem pages -Recurse -Include "*.js" | Measure-Object | Select-Object -ExpandProperty Count
```

#### é¡¹ç›®ç±»å‹ä¸æ–‡ä»¶ç»“æ„å¯¹åº”å…³ç³»

**å¾®ä¿¡å°ç¨‹åºé¡¹ç›®ï¼ˆå½“å‰é¡¹ç›®ç±»å‹ï¼‰ï¼š**
```powershell
# âœ… æ­£ç¡®ï¼šå°ç¨‹åºé¡µé¢åœ¨å­ç›®å½•ä¸­ï¼Œæ³¨æ„ç¬¦åˆå¾®ä¿¡å°ç¨‹åºå¼€å‘æ ‡å‡†
Get-ChildItem pages -Recurse -Include "*.js"
Get-ChildItem pages -Recurse -Include "*.wxml"
Get-ChildItem components -Recurse -Include "*.js"
Get-ChildItem utils -Recurse -Include "*.js"
```

**Vue/Reacté¡¹ç›®ï¼š**
```powershell
# âœ… æ­£ç¡®ï¼šç»„ä»¶åœ¨src/componentså­ç›®å½•
Get-ChildItem src -Recurse -Include "*.vue"
Get-ChildItem src -Recurse -Include "*.jsx"
```

**Node.jsé¡¹ç›®ï¼š**
```powershell
# âœ… æ­£ç¡®ï¼šæ¨¡å—å¯èƒ½åœ¨å¤šå±‚ç›®å½•
Get-ChildItem . -Recurse -Include "*.js" -Exclude "node_modules\*"
```

#### å‘½ä»¤å¤æ‚åº¦æ§åˆ¶ä¸ä¸­æ–‡å­—ç¬¦å¤„ç†
```powershell
# âœ… ç®€åŒ–å‘½ä»¤ï¼Œé¿å…ç¼“å†²åŒºé—®é¢˜
Get-ChildItem ç›®å½• -Recurse -Include "*.æ‰©å±•å" | Measure-Object

# âŒ é¿å…è¿‡é•¿çš„ç®¡é“å‘½ä»¤
Get-ChildItem ç›®å½• -Recurse -Include "*.æ‰©å±•å" | ForEach-Object {...å¾ˆé•¿çš„å¤„ç†é€»è¾‘...}

# âœ… åˆ†è§£å¤æ‚æ“ä½œ
$files = Get-ChildItem pages -Recurse -Include "*.js"
$count = ($files | Measure-Object).Count
Write-Host "æ‰¾åˆ° $count ä¸ªJSæ–‡ä»¶"
```

### 4. ğŸ—ï¸ å¾®ä¿¡å°ç¨‹åºå¼€å‘å·¥å…·æ ‡å‡†

#### å¼ºåˆ¶ä½¿ç”¨è§„èŒƒ
- âœ… **åªä½¿ç”¨å¾®ä¿¡å¼€å‘è€…å·¥å…·è¿›è¡Œè¯­æ³•æ£€æŸ¥**
- âœ… **åªä½¿ç”¨PowerShellåŸç”Ÿå‘½ä»¤è¿›è¡Œæ–‡ä»¶æ“ä½œ**
- âŒ **ä¸¥ç¦ä½¿ç”¨nodeã€npmç­‰Webå·¥å…·**
- âŒ **ä¸¥ç¦ä½¿ç”¨webpack/babelç­‰æ„å»ºå·¥å…·**

#### å¾®ä¿¡å°ç¨‹åºå¼€å‘ç¯å¢ƒè¦æ±‚
```javascript
// âœ… æ­£ç¡®ï¼šåœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­æ‰“å¼€é¡¹ç›®æ–‡ä»¶å¤¹
// é¡¹ç›®æ ¹ç›®å½•åŒ…å«ï¼šapp.js, app.json, app.wxss

// âŒ é”™è¯¯ï¼šå°è¯•ä½¿ç”¨npmå‘½ä»¤å¯åŠ¨
// npm start  // å¾®ä¿¡å°ç¨‹åºä¸æ”¯æŒ
```

#### è¯­æ³•æ£€æŸ¥ä¸è°ƒè¯•
- ğŸ”§ ä½¿ç”¨å¾®ä¿¡å¼€å‘è€…å·¥å…·çš„ç¼–è¯‘å™¨æ£€æŸ¥è¯­æ³•
- ğŸ”§ ä½¿ç”¨å¼€å‘è€…å·¥å…·çš„è°ƒè¯•é¢æ¿æ’æŸ¥é—®é¢˜
- ğŸ”§ é€šè¿‡å¼€å‘è€…å·¥å…·é¢„è§ˆå’ŒçœŸæœºè°ƒè¯•

#### ç¦æ­¢ä½¿ç”¨çš„å·¥å…·åˆ—è¡¨
- `npm --version` 
- `node -c` è¯­æ³•æ£€æŸ¥
- `webpack/babel` ç­‰Webæ„å»ºå·¥å…·
- Linux/Bashå‘½ä»¤è¯­æ³•

### 5. ğŸ“‹ æ‰§è¡Œå‰æ£€æŸ¥æ¸…å•

#### PowerShellæ–‡ä»¶æ“ä½œå‰å¿…é¡»ç¡®è®¤
- [ ] å·²äº†è§£é¡¹ç›®çš„æ–‡ä»¶ç»„ç»‡ç»“æ„
- [ ] æ ¹æ®ç»“æ„é€‰æ‹©äº†æ­£ç¡®çš„æœç´¢å‚æ•°ï¼ˆ-Recurseç­‰ï¼‰
- [ ] å‘½ä»¤å¤æ‚åº¦é€‚ä¸­ï¼Œä¸ä¼šå¯¼è‡´æ§åˆ¶å°å¼‚å¸¸
- [ ] å¯¹äºå¾®ä¿¡å°ç¨‹åºé¡¹ç›®ï¼Œä½¿ç”¨é€’å½’æœç´¢é¡µé¢æ–‡ä»¶
- [ ] é…ç½®äº†æ­£ç¡®çš„UTF-8ç¼–ç 
- [ ] æ£€æŸ¥PSConsoleReadLineæ¨¡å—çŠ¶æ€
- [ ] éªŒè¯å‘½ä»¤å‚æ•°èŒƒå›´åˆæ³•æ€§

#### Gitæ“ä½œå‰å¿…é¡»ç¡®è®¤
- [ ] å·²é…ç½®å…¨å±€ç¦ç”¨åˆ†é¡µå™¨
- [ ] ä½¿ç”¨--no-pagerå‰ç¼€æˆ–é™åˆ¶è¾“å‡ºé•¿åº¦
- [ ] é¿å…ä½¿ç”¨å¯èƒ½è§¦å‘äº¤äº’çš„Gitå‘½ä»¤
- [ ] è®¾ç½®120ç§’è¶…æ—¶ç›‘æ§æœºåˆ¶

### 6. ğŸ”„ æ•…éšœå¤„ç†ä¸è‡ªåŠ¨ä¿®å¤

#### PowerShellæ•…éšœå¤„ç†å‡çº§æ–¹æ¡ˆ
1. **æ–¹æ³•1**: UTF-8ç¼–ç å¼ºåˆ¶é…ç½®ä¸çŠ¶æ€æ£€æµ‹
2. **æ–¹æ³•2**: PSConsoleReadLineç¼“å†²åŒºæº¢å‡ºé¢„é˜²ï¼ˆæ‹†åˆ†é•¿å‘½ä»¤ï¼‰
3. **æ–¹æ³•3**: PSConsoleReadLineæ¨¡å—ä¿®å¤
4. **æ–¹æ³•4**: æ§åˆ¶å°ç¼“å†²åŒºå‚æ•°éªŒè¯ä¸é‡ç½®
5. **æ–¹æ³•5**: æ— æ•ˆå‘½ä»¤è‡ªåŠ¨æ›¿æ¢
6. **æ–¹æ³•6**: æ§åˆ¶å°å®Œå…¨é‡ç½®
7. **æœ€åæ–¹æ¡ˆ**: PowerShellç‰ˆæœ¬å…¼å®¹æ€§æ£€æŸ¥

#### Gitåˆ†é¡µå™¨æ•…éšœè‡ªåŠ¨ä¿®å¤æµç¨‹
1. æ£€æµ‹åˆ°åˆ†é¡µå™¨ â†’ ç«‹å³ä¸­æ–­
2. åº”ç”¨å…¨å±€é…ç½® â†’ ç¦ç”¨åˆ†é¡µå™¨
3. é‡æ–°æ‰§è¡Œå‘½ä»¤ â†’ ä½¿ç”¨--no-pager
4. éªŒè¯ç»“æœ â†’ ç¡®ä¿æ­£å¸¸è¾“å‡º

#### è‡ªåŠ¨æ£€æµ‹è§¦å‘æ¡ä»¶
- PowerShellæ§åˆ¶å°ç¼–ç éUTF-8 (CodePage != 65001)
- åŒ…å«ä¸­æ–‡å­—ç¬¦çš„å‘½ä»¤é•¿åº¦ > 100å­—ç¬¦ (ç¼“å†²åŒºæº¢å‡ºé£é™©)
- æ–‡ä»¶æ“ä½œæœªä½¿ç”¨ `-Encoding UTF8` å‚æ•°
- åŒ…å« `Get-ChildItem` ä¸”ç¼ºå°‘ `-Recurse` çš„æ–‡ä»¶ç»Ÿè®¡å‘½ä»¤
- é¡¹ç›®æ–‡ä»¶æ£€æŸ¥å‰æ²¡æœ‰å…ˆæŸ¥çœ‹ç›®å½•ç»“æ„
- è¶…è¿‡3ä¸ªç®¡é“æ“ä½œçš„å¤æ‚PowerShellå‘½ä»¤
- Gitå‘½ä»¤æ‰§è¡Œæ—¶é—´ > 30ç§’
- å‡ºç° `(END)` æˆ– `~` ç­‰åˆ†é¡µå™¨æ ‡è¯†
- PSConsoleReadLineæ¨¡å—å¼‚å¸¸æˆ–ç¼“å†²åŒºé”™è¯¯

### 7. ğŸ“Š ç›‘æ§ä¸å‘Šè­¦

#### è‡ªåŠ¨æ£€æµ‹æ¨¡å¼
- å‘½ä»¤æ‰§è¡Œæ—¶é—´ > 30ç§’
- å‡ºç° `(END)` æˆ– `~` ç­‰åˆ†é¡µå™¨æ ‡è¯†
- æ§åˆ¶å°æ— å“åº”çŠ¶æ€
- PowerShellå‘½ä»¤è¡Œå¡æ­»

#### è¿è§„æ£€æµ‹ä¸è‡ªåŠ¨ä¿®å¤
```
ğŸš¨ æ£€æµ‹åˆ°å±é™©æ“ä½œï¼

å±é™©ç±»å‹ï¼š[Gitåˆ†é¡µå™¨é£é™©/PowerShellè¯­æ³•é”™è¯¯/æ–‡ä»¶æœç´¢å‚æ•°é”™è¯¯]
æ£€æµ‹åˆ°å‘½ä»¤ï¼š[å…·ä½“å‘½ä»¤]
å¯èƒ½å¯¼è‡´ï¼šå‘½ä»¤å¡æ­»ã€æ‰§è¡Œè¶…æ—¶ã€äº¤äº’é˜»å¡

è‡ªåŠ¨ä¿®å¤ï¼š
1. Gitå‘½ä»¤ â†’ æ·»åŠ  --no-pager å‰ç¼€
2. PowerShellè¯­æ³• â†’ è½¬æ¢ä¸ºPowerShellåŸç”Ÿè¯­æ³•
3. æ–‡ä»¶æœç´¢ â†’ æ·»åŠ å¿…è¦çš„-Recurseå‚æ•°

è¯·ç¡®è®¤ä¿®å¤åå†ç»§ç»­æ‰§è¡Œã€‚
```

### 8. ğŸ¯ å¸¸è§é¡¹ç›®ç±»å‹çš„æ­£ç¡®å‘½ä»¤æ¨¡æ¿

#### å¾®ä¿¡å°ç¨‹åºé¡¹ç›®æ–‡ä»¶æ“ä½œ
```powershell
# æ–‡ä»¶ç»Ÿè®¡ï¼ˆæ³¨æ„ä½¿ç”¨-Recurseé€’å½’æœç´¢ï¼‰
Get-ChildItem pages -Recurse -Include "*.js" | Measure-Object
Get-ChildItem components -Recurse -Include "*.js" | Measure-Object
Get-ChildItem pages -Recurse -Include "*.wxml" | Measure-Object
Get-ChildItem utils -Include "*.js" | Measure-Object

# æ–‡ä»¶æœç´¢
Get-ChildItem pages -Recurse -Include "*.js" -Name
Get-ChildItem components -Recurse -Include "*.js" -Name

# å†…å®¹æœç´¢
Get-ChildItem pages -Recurse -Include "*.js" | Select-String "pattern"
```

#### å®‰å…¨çš„Gitæ“ä½œæ¨¡æ¿
```bash
# æŸ¥çœ‹åˆ†æ”¯ï¼ˆé™åˆ¶è¾“å‡ºï¼‰
git --no-pager branch -v
git branch -v | head -10

# æŸ¥çœ‹æ—¥å¿—ï¼ˆé™åˆ¶æ¡æ•°ï¼‰
git --no-pager log --oneline -5
git log --oneline -10 | head -5

# æŸ¥çœ‹å·®å¼‚ï¼ˆç¦ç”¨åˆ†é¡µå™¨ï¼‰
git --no-pager diff
git --no-pager show HEAD

# çŠ¶æ€æ£€æŸ¥
git status --porcelain
git --no-pager status -s
```

#### ä¸­æ–‡ç¯å¢ƒå®‰å…¨å‘½ä»¤ä¸ç¼–ç é˜²æŠ¤
```powershell
# ğŸ”´ å¼ºåˆ¶è¦æ±‚ï¼šæ¯æ¬¡ä¼šè¯å¼€å§‹å‰è‡ªåŠ¨æ‰§è¡ŒUTF-8ç¼–ç é…ç½®
[Console]::OutputEncoding = [Text.UTF8Encoding]::UTF8
[Console]::InputEncoding = [Text.UTF8Encoding]::UTF8

# ğŸ”´ ç¼–ç çŠ¶æ€æ£€æµ‹ä¸è‡ªåŠ¨ä¿®å¤
$currentInput = [Console]::InputEncoding.CodePage
$currentOutput = [Console]::OutputEncoding.CodePage
if ($currentInput -ne 65001 -or $currentOutput -ne 65001) {
    Write-Warning "æ£€æµ‹åˆ°éUTF-8ç¼–ç ï¼Œè‡ªåŠ¨ä¿®å¤ä¸­..."
    [Console]::OutputEncoding = [Text.UTF8Encoding]::UTF8
    [Console]::InputEncoding = [Text.UTF8Encoding]::UTF8
    Write-Host "å·²ä¿®å¤ä¸ºUTF-8ç¼–ç " -ForegroundColor Green
}

# âœ… ä¸­æ–‡ç›®å½•æ“ä½œï¼ˆå¼ºåˆ¶UTF-8ç¼–ç ï¼‰
Get-ChildItem "ä¸­æ–‡ç›®å½•" -Recurse -Include "*.js"
Get-Content "ä¸­æ–‡æ–‡ä»¶.js" -Encoding UTF8

# ğŸš¨ PSConsoleReadLineç¼“å†²åŒºæº¢å‡ºé¢„é˜²ï¼šé¿å…é•¿å‘½ä»¤+ä¸­æ–‡å­—ç¬¦
# âŒ å±é™©æ¨¡å¼ï¼ˆä¼šå¯¼è‡´æ§åˆ¶å°å¼‚å¸¸ï¼‰
# Write-Host "åŒ…å«ä¸­æ–‡çš„é•¿å‘½ä»¤è¶…è¿‡100å­—ç¬¦ä¼šè§¦å‘PSConsoleReadLineç¼“å†²åŒºæº¢å‡ºå¼‚å¸¸" -ForegroundColor Green

# âœ… å®‰å…¨æ¨¡å¼ï¼ˆæ‹†åˆ†ä¸ºç®€åŒ–å‘½ä»¤ï¼‰
$encoding = [Console]::InputEncoding.EncodingName
Write-Host "å½“å‰ç¼–ç : $encoding"
```

### 9. âš¡ æ€§èƒ½ä¼˜åŒ–ä¸æœ€ä½³å®è·µ

#### å¹¶è¡Œå·¥å…·è°ƒç”¨ç­–ç•¥
```javascript
// âœ… è§„åˆ’é˜¶æ®µï¼šåˆ—å‡ºæ‰€æœ‰éœ€è¦çš„ä¿¡æ¯
const analysisNeeds = [
  'list_dir: æŸ¥çœ‹é¡¹ç›®ç›®å½•ç»“æ„',
  'run_terminal_cmd: ç»Ÿè®¡JSæ–‡ä»¶æ•°é‡',
  'run_terminal_cmd: ç»Ÿè®¡WXMLæ–‡ä»¶æ•°é‡',
  'run_terminal_cmd: æ£€æŸ¥GitçŠ¶æ€'
]

// âœ… æ‰§è¡Œé˜¶æ®µï¼šå¹¶è¡Œè°ƒç”¨æ‰€æœ‰å·¥å…·ï¼Œé¿å…æµªè´¹Claude 4 Sonnetè¯·æ±‚æ¬¡æ•°
const results = await Promise.all([
  listDir('pages'),
  runCommand('Get-ChildItem pages -Recurse -Include "*.js" | Measure-Object'),
  runCommand('Get-ChildItem pages -Recurse -Include "*.wxml" | Measure-Object'),
  runCommand('git --no-pager status -s')
])
```

#### æ§åˆ¶å°ç¼“å†²åŒºå‚æ•°é˜²å¾¡
```powershell
# âœ… æ­£ç¡®ï¼šæ·»åŠ å‚æ•°èŒƒå›´éªŒè¯
if ($top -lt 0 -or $top -ge $maxSize) { 
    Write-Error "å‚æ•° top è¶…å‡ºåˆæ³•èŒƒå›´ï¼ˆå½“å‰å€¼: $topï¼Œæœ€å¤§å…è®¸: $($maxSize-1)ï¼‰"; 
    return 
}

# âœ… æ— æ•ˆå‘½ä»¤æ‹¦æˆªç³»ç»Ÿ
$validCommands = @('Get-ChildItem', 'Write-Host', 'Select-Object', 'Measure-Object')
if ($command -notin $validCommands) {
    Write-Warning "âš ï¸ å‘½ä»¤ '$command' æ— æ•ˆï¼Œæ¨èæ›¿æ¢ä¸º: $($validCommands -join ', ')"
}
```

## ğŸ¯ ç»¼åˆå®‰å…¨æ£€æŸ¥æ¸…å•

### æ¯æ¬¡å¼€å‘ç¯å¢ƒæ“ä½œå‰å¿…é¡»ç¡®è®¤
- [ ] PowerShellæ¨¡å—çŠ¶æ€æ­£å¸¸ï¼ŒPSConsoleReadLineæ— å¼‚å¸¸
- [ ] UTF-8ç¼–ç å¼ºåˆ¶é…ç½®ç”Ÿæ•ˆ (CodePage = 65001)
- [ ] ä¸­æ–‡å­—ç¬¦å’Œemojiæ˜¾ç¤ºæ­£å¸¸ï¼Œæ— ä¹±ç 
- [ ] Gitåˆ†é¡µå™¨å·²å…¨å±€ç¦ç”¨
- [ ] äº†è§£é¡¹ç›®æ–‡ä»¶ç»“æ„
- [ ] é€‰æ‹©æ­£ç¡®çš„æœç´¢å‚æ•°(-Recurseç­‰)
- [ ] åŒ…å«ä¸­æ–‡çš„å‘½ä»¤é•¿åº¦ < 100å­—ç¬¦ï¼Œé¿å…ç¼“å†²åŒºæº¢å‡º
- [ ] æ–‡ä»¶æ“ä½œç»Ÿä¸€ä½¿ç”¨ -Encoding UTF8 å‚æ•°
- [ ] è®¾ç½®å‘½ä»¤è¶…æ—¶ç›‘æ§
- [ ] é¿å…ä½¿ç”¨ç¦æ­¢çš„å·¥å…·
- [ ] ä½¿ç”¨å¾®ä¿¡å°ç¨‹åºå¼€å‘æ ‡å‡†

### æ•…éšœå‘ç”Ÿæ—¶çš„å¤„ç†æµç¨‹
1. **ç«‹å³ä¸­æ–­é•¿æ—¶é—´è¿è¡Œçš„å‘½ä»¤**
2. **æ£€æŸ¥å¹¶ä¿®å¤ç¯å¢ƒé…ç½®**
3. **ä½¿ç”¨å®‰å…¨çš„æ›¿ä»£å‘½ä»¤**
4. **éªŒè¯ä¿®å¤æ•ˆæœ**
5. **è®°å½•é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ**

## ğŸ¯ è§„åˆ™ä¼˜å…ˆçº§ï¼šé«˜ - ç›´æ¥å½±å“å¼€å‘æ•ˆç‡å’Œç¯å¢ƒç¨³å®šæ€§

---
**åˆ›å»ºæ—¶é—´**: 2025å¹´1æœˆ2æ—¥  
**æ›´æ–°æ—¶é—´**: 2025å¹´1æœˆ2æ—¥ - æ–°å¢ä¸­æ–‡ç¼–ç é˜²æŠ¤ä¸PSConsoleReadLineç¼“å†²åŒºæº¢å‡ºé¢„é˜²  
**é€‚ç”¨èŒƒå›´**: æ‰€æœ‰ä½¿ç”¨PowerShellè¿›è¡Œé¡¹ç›®æ–‡ä»¶æ“ä½œå’Œå¾®ä¿¡å°ç¨‹åºå¼€å‘çš„åœºæ™¯  
**ç»´æŠ¤è´£ä»»**: ç¡®ä¿å¼€å‘ç¯å¢ƒç¨³å®šè¿è¡Œï¼Œä¸­æ–‡å­—ç¬¦æ­£ç¡®æ˜¾ç¤ºæ— ä¹±ç   
**æ•´åˆçŠ¶æ€**: ç»Ÿä¸€æ•´åˆdev-environment-standards.mdcã€hwk.mdcå’Œä¸­æ–‡ç¼–ç é˜²æŠ¤è§„åˆ™

## ğŸš¨ å½“å‰ä¼šè¯é—®é¢˜å…¨é¢åˆ†æä¸è§£å†³æ–¹æ¡ˆ

### ğŸ“Š é—®é¢˜æ¸…å•ä¸ä¸¥é‡ç¨‹åº¦åˆ†çº§

#### Açº§é—®é¢˜ (ä¸¥é‡ - å¯¼è‡´ä»»åŠ¡ä¸­æ–­)
1. **PowerShellæ§åˆ¶å°ç¼“å†²åŒºæº¢å‡ºå¼‚å¸¸**
   - é”™è¯¯: `System.ArgumentOutOfRangeException: å‚æ•°å: top å®é™…å€¼æ˜¯ -1, -2`
   - è§¦å‘: åŒ…å«ä¸­æ–‡å­—ç¬¦çš„é•¿å‘½ä»¤ > 100å­—ç¬¦
   - å½±å“: æ§åˆ¶å°å¡æ­»ï¼Œéœ€è¦é‡å¯ä¼šè¯
   - å‡ºç°æ¬¡æ•°: æœ¬ä¼šè¯ä¸­5æ¬¡ä»¥ä¸Š

2. **PSConsoleReadLineæ¨¡å—æ•…éšœ**
   - é”™è¯¯: ç¼“å†²åŒºè®¡ç®—å¼‚å¸¸ï¼Œå…‰æ ‡ä½ç½®é”™è¯¯
   - è§¦å‘: ä¸­æ–‡å­—ç¬¦ + å¤æ‚ç®¡é“æ“ä½œ + å½©è‰²è¾“å‡º
   - å½±å“: å‘½ä»¤æ‰§è¡Œä¸­æ–­ï¼Œè¾“å‡ºå¼‚å¸¸

#### Bçº§é—®é¢˜ (ä¸­ç­‰ - æ•ˆç‡æŸå¤±)
3. **å·¥å…·è°ƒç”¨ä¸²è¡ŒåŒ–ä½æ•ˆ**
   - é—®é¢˜: æœ¬å¯å¹¶è¡Œçš„æ“ä½œåˆ†åˆ«è°ƒç”¨
   - ç¤ºä¾‹: read_fileã€run_terminal_cmdã€grep_searchä¸²è¡Œæ‰§è¡Œ
   - å½±å“: ä¼šè¯æ—¶é—´å»¶é•¿3-5å€ï¼Œæµªè´¹Claude 4 Sonnetè¯·æ±‚é¢åº¦

4. **æ­£åˆ™è¡¨è¾¾å¼è¯­æ³•é”™è¯¯**
   - é”™è¯¯: `console.log.*[ğŸ”§ğŸ”—ğŸ“¨âŒâœ…]` æœªè½¬ä¹‰emojiå­—ç¬¦
   - ç»“æœ: Select-Stringæ‰§è¡Œå¤±è´¥
   - åŸå› : ç‰¹æ®Šå­—ç¬¦å¤„ç†ä¸å½“

#### Cçº§é—®é¢˜ (è½»å¾® - è§„èŒƒè¿å)
5. **ä¸´æ—¶æ–‡ä»¶ç®¡ç†ä¸è§„èŒƒ**
   - é—®é¢˜: æ‰‹åŠ¨åˆ›å»ºåˆ é™¤ä¸´æ—¶æµ‹è¯•æ–‡ä»¶
   - è¿è§„: ç”¨æˆ·è§„åˆ™ç¬¬8æ¡è‡ªåŠ¨æ¸…ç†è¦æ±‚
   - æ”¹è¿›: éœ€è¦è‡ªåŠ¨åŒ–ç®¡ç†æœºåˆ¶

6. **é‡å¤ç¼–ç æ£€æŸ¥**
   - é—®é¢˜: å¤šæ¬¡æ‰§è¡Œç›¸åŒçš„UTF-8çŠ¶æ€æ£€æŸ¥
   - å½±å“: å¢åŠ ä¸å¿…è¦çš„å‘½ä»¤æ‰§è¡Œæ—¶é—´

### ğŸ”§ é—®é¢˜æ ¹æœ¬åŸå› åˆ†æ

#### 1. PowerShellç¯å¢ƒä¸ç¨³å®š
- PSConsoleReadLineæ¨¡å—å¯¹ä¸­æ–‡å­—ç¬¦å¤„ç†å­˜åœ¨ç¼ºé™·
- æ§åˆ¶å°ç¼“å†²åŒºè®¡ç®—ç®—æ³•åœ¨å¤æ‚åœºæ™¯ä¸‹å¼‚å¸¸
- UTF-8ç¼–ç é…ç½®ä¸ä¸€è‡´å¯¼è‡´å­—ç¬¦å¤„ç†é”™è¯¯

#### 2. å·¥å…·è°ƒç”¨ç­–ç•¥ä¸å½“
- ç¼ºä¹å¹¶è¡Œè°ƒç”¨æ„è¯†ï¼Œä¹ æƒ¯æ€§ä¸²è¡Œæ“ä½œ
- æ²¡æœ‰é¢„å…ˆè§„åˆ’æ‰€éœ€ä¿¡æ¯ï¼Œå¯¼è‡´åˆ†æ‰¹è·å–
- é‡å¤æ“ä½œç¼“å­˜æœºåˆ¶ç¼ºå¤±

#### 3. å‘½ä»¤æ„é€ å®‰å…¨æ€§ä¸è¶³
- ç‰¹æ®Šå­—ç¬¦è½¬ä¹‰è§„åˆ™ä¸å®Œå–„
- å‘½ä»¤é•¿åº¦æ§åˆ¶æœºåˆ¶ç¼ºå¤±
- é”™è¯¯é¢„åˆ¤å’Œé¢„é˜²æœºåˆ¶ä¸è¶³

### ğŸ’¡ å¼ºåˆ¶å¹¶è¡Œå·¥å…·è°ƒç”¨è§„åˆ™ (æ–°å¢CRITICAL)

#### å¹¶è¡Œä¼˜å…ˆåŸåˆ™
```javascript
// ğŸ”´ å¼ºåˆ¶è¦æ±‚ï¼šä¿¡æ¯æ”¶é›†é˜¶æ®µå¿…é¡»å¹¶è¡Œæ‰§è¡Œ
// âŒ é”™è¯¯ï¼šä¸²è¡Œè°ƒç”¨æµªè´¹è¯·æ±‚æ¬¡æ•°
await read_file('file1.js')
await read_file('file2.js') 
await run_terminal_cmd('command1')
await run_terminal_cmd('command2')

// âœ… æ­£ç¡®ï¼šå¹¶è¡Œè°ƒç”¨æå‡3-5xæ•ˆç‡
const results = await Promise.all([
    read_file('file1.js'),
    read_file('file2.js'),
    run_terminal_cmd('command1'),
    run_terminal_cmd('command2')
])

// âœ… å¤æ‚ä¿¡æ¯æ”¶é›†çš„å¹¶è¡Œæ¨¡å¼
const analysisData = await Promise.all([
    list_dir('pages'),
    grep_search({ query: 'pattern1', include_pattern: '*.js' }),
    grep_search({ query: 'pattern2', include_pattern: '*.js' }),
    run_terminal_cmd('Get-ChildItem pages -Recurse | Measure-Object'),
    codebase_search({ query: 'function definition' })
])
```

#### é«˜é£é™©å‘½ä»¤è‡ªåŠ¨æ£€æµ‹ (æ–°å¢)
```powershell
# ğŸ”´ å‘½ä»¤æ‰§è¡Œå‰è‡ªåŠ¨å®‰å…¨éªŒè¯
function Test-CommandSafety {
    param([string]$command)
    
    # å±é™©æ¨¡å¼æ£€æµ‹
    $riskyPatterns = @(
        '.*[\u4e00-\u9fa5].{100,}',                          # ä¸­æ–‡å­—ç¬¦ + é•¿å‘½ä»¤
        '.*[\u4e00-\u9fa5].*Write-Host.*-ForegroundColor',   # ä¸­æ–‡ + å½©è‰²è¾“å‡º
        '.*[\u4e00-\u9fa5].*\|.*ForEach-Object.*Write-Host', # ä¸­æ–‡ + å¤æ‚ç®¡é“
        '.*console\.log\.\*\[[^\]]*[ğŸ”§ğŸ”—ğŸ“¨âŒâœ…]'           # æœªè½¬ä¹‰emojiæ­£åˆ™
    )
    
    foreach ($pattern in $riskyPatterns) {
        if ($command -match $pattern) {
            Write-Warning "âš ï¸ æ£€æµ‹åˆ°é«˜é£é™©å‘½ä»¤ï¼Œè‡ªåŠ¨æ‹†åˆ†æ‰§è¡Œ"
            return $false
        }
    }
    return $true
}
```

#### ä¸´æ—¶æ–‡ä»¶è‡ªåŠ¨ç®¡ç†æœºåˆ¶ (æ–°å¢)
```javascript
// ğŸ”´ ä¸´æ—¶æ–‡ä»¶è‡ªåŠ¨ç®¡ç†ï¼Œç¬¦åˆç”¨æˆ·è§„åˆ™ç¬¬8æ¡
class TempFileManager {
    constructor() {
        this.tempFiles = new Set()
        this.setupCleanup()
    }
    
    createTempFile(name, content) {
        const tempPath = `.temp_${Date.now()}_${name}`
        this.tempFiles.add(tempPath)
        return edit_file(tempPath, content)
    }
    
    setupCleanup() {
        // è‡ªåŠ¨æ¸…ç†æœºåˆ¶
        process.on('beforeExit', () => {
            this.cleanup()
        })
    }
    
    cleanup() {
        for (const file of this.tempFiles) {
            try {
                delete_file(file)
            } catch (error) {
                console.warn(`æ¸…ç†ä¸´æ—¶æ–‡ä»¶å¤±è´¥: ${file}`)
            }
        }
        this.tempFiles.clear()
    }
}
```

### ğŸ“ˆ æ•ˆç‡ä¼˜åŒ–æŒ‡æ ‡ (æ–°å¢)

#### ç›®æ ‡æ€§èƒ½æŒ‡æ ‡
- **å¹¶è¡Œè°ƒç”¨æ¯”ä¾‹**: â‰¥ 80%
- **é‡å¤æ“ä½œå‡å°‘**: â‰¥ 60%
- **å‘½ä»¤æ‰§è¡ŒæˆåŠŸç‡**: â‰¥ 95%
- **æ§åˆ¶å°å¼‚å¸¸å‘ç”Ÿç‡**: < 1%
- **ä¸´æ—¶æ–‡ä»¶è‡ªåŠ¨æ¸…ç†ç‡**: 100%

#### ä¼šè¯å¼€å§‹å¼ºåˆ¶æ£€æŸ¥æ¸…å• (æ–°å¢)
- [ ] UTF-8ç¼–ç è‡ªåŠ¨é…ç½®ç”Ÿæ•ˆ
- [ ] PSConsoleReadLineæ¨¡å—çŠ¶æ€æ­£å¸¸
- [ ] å¹¶è¡Œå·¥å…·è°ƒç”¨ç­–ç•¥æ¿€æ´»
- [ ] é«˜é£é™©å‘½ä»¤æ£€æµ‹æœºåˆ¶å¯ç”¨
- [ ] ä¸´æ—¶æ–‡ä»¶è‡ªåŠ¨ç®¡ç†æœºåˆ¶å¯ç”¨
- [ ] é‡å¤æ“ä½œç¼“å­˜æœºåˆ¶ç”Ÿæ•ˆ

### ğŸ’Š è‡ªåŠ¨æ•…éšœæ¢å¤æœºåˆ¶ (æ–°å¢CRITICAL)

#### æ§åˆ¶å°å¼‚å¸¸è‡ªåŠ¨æ¢å¤
```powershell
# ğŸ”´ å½“å‡ºç°PSConsoleReadLineç¼“å†²åŒºæº¢å‡ºæ—¶è‡ªåŠ¨æ‰§è¡Œ
function Recover-ConsoleFromException {
    try {
        # æ¸…é™¤æ§åˆ¶å°ç¼“å†²åŒº
        [Console]::Clear()
        
        # é‡æ–°é…ç½®UTF-8ç¼–ç 
        [Console]::OutputEncoding = [Text.UTF8Encoding]::UTF8
        [Console]::InputEncoding = [Text.UTF8Encoding]::UTF8
        
        # é‡æ–°å¯¼å…¥PSConsoleReadLineæ¨¡å—
        Remove-Module PSConsoleReadLine -Force -ErrorAction SilentlyContinue
        Import-Module PSConsoleReadLine -Force
        
        Write-Host "âœ… æ§åˆ¶å°å·²è‡ªåŠ¨æ¢å¤æ­£å¸¸" -ForegroundColor Green
        return $true
    } catch {
        Write-Error "âŒ æ§åˆ¶å°è‡ªåŠ¨æ¢å¤å¤±è´¥ï¼Œå»ºè®®é‡å¯PowerShellä¼šè¯"
        return $false
    }
}

# è‡ªåŠ¨æ£€æµ‹å¹¶ä¿®å¤ç¼–ç å¼‚å¸¸
function Repair-EncodingException {
    param([string]$errorMessage)
    
    if ($errorMessage -match "EncoderFallbackException|Unicodeå­—ç¬¦") {
        Write-Warning "æ£€æµ‹åˆ°ç¼–ç å¼‚å¸¸ï¼Œè‡ªåŠ¨ä¿®å¤ä¸­..."
        
        # å¼ºåˆ¶é‡ç½®ç¼–ç é…ç½®
        [Console]::OutputEncoding = [Text.UTF8Encoding]::UTF8
        [Console]::InputEncoding = [Text.UTF8Encoding]::UTF8
        
        # æ¸…ç†PowerShellå†å²è®°å½•ç¼“å­˜
        Clear-History
        
        Write-Host "âœ… ç¼–ç å¼‚å¸¸å·²è‡ªåŠ¨ä¿®å¤"
        return $true
    }
    return $false
}
```

#### è‡ªåŠ¨é‡è¯•æœºåˆ¶
```javascript
// ğŸ”´ å·¥å…·è°ƒç”¨è‡ªåŠ¨é‡è¯•æœºåˆ¶
async function executeWithRetry(operation, maxRetries = 3, retryDelay = 1000) {
    for (let i = 0; i < maxRetries; i++) {
        try {
            return await operation()
        } catch (error) {
            if (i === maxRetries - 1) {
                throw new Error(`æ“ä½œå¤±è´¥ï¼Œå·²é‡è¯•${maxRetries}æ¬¡: ${error.message}`)
            }
            
            console.warn(`æ“ä½œå¤±è´¥ï¼Œæ­£åœ¨é‡è¯•... (${i + 1}/${maxRetries})`)
            console.warn(`é”™è¯¯ä¿¡æ¯: ${error.message}`)
            
            // å¦‚æœæ˜¯PowerShellç›¸å…³é”™è¯¯ï¼Œå°è¯•æ¢å¤æ§åˆ¶å°
            if (error.message.includes('ArgumentOutOfRangeException') || 
                error.message.includes('PSConsoleReadLine')) {
                await run_terminal_cmd('Recover-ConsoleFromException')
            }
            
            await new Promise(resolve => setTimeout(resolve, retryDelay * (i + 1)))
        }
    }
}

// ä½¿ç”¨ç¤ºä¾‹
const result = await executeWithRetry(async () => {
    return await run_terminal_cmd('Get-ChildItem pages -Recurse | Measure-Object')
})
```

### ğŸ›¡ï¸ æ™ºèƒ½å·¥å…·è°ƒç”¨ç®¡ç†å™¨ (æ–°å¢CRITICAL)

#### å¼ºåˆ¶å¹¶è¡Œè°ƒç”¨ç®¡ç†å™¨
```javascript
class SmartToolManager {
    constructor() {
        this.cache = new Map()
        this.metrics = {
            parallelCalls: 0,
            serialCalls: 0,
            cacheHits: 0,
            errors: 0
        }
    }
    
    // ğŸ”´ å¼ºåˆ¶å¹¶è¡Œè°ƒç”¨ - è¿ååˆ™è­¦å‘Š
    async executeParallel(operations) {
        if (operations.length < 2) {
            this.metrics.serialCalls++
            console.warn("âš ï¸ æ£€æµ‹åˆ°å•ä¸ªå·¥å…·è°ƒç”¨ï¼Œå»ºè®®æ‰¹é‡å¹¶è¡Œæ‰§è¡Œ")
        } else {
            this.metrics.parallelCalls += operations.length
        }
        
        try {
            return await Promise.all(operations.map(op => this.executeWithCache(op)))
        } catch (error) {
            this.metrics.errors++
            throw error
        }
    }
    
    // ç¼“å­˜æœºåˆ¶é¿å…é‡å¤æ“ä½œ
    async executeWithCache(operation) {
        const key = this.generateCacheKey(operation)
        
        if (this.cache.has(key)) {
            this.metrics.cacheHits++
            return this.cache.get(key)
        }
        
        const result = await operation()
        this.cache.set(key, result)
        return result
    }
    
    generateCacheKey(operation) {
        return `${operation.name}_${JSON.stringify(operation.params)}`
    }
    
    // ç”Ÿæˆæ•ˆç‡æŠ¥å‘Š
    getEfficiencyReport() {
        const total = this.metrics.parallelCalls + this.metrics.serialCalls
        const parallelRatio = total > 0 ? (this.metrics.parallelCalls / total) * 100 : 0
        
        return {
            parallelRatio: parallelRatio.toFixed(1) + '%',
            cacheHitRate: (this.metrics.cacheHits / (this.metrics.cacheHits + total) * 100).toFixed(1) + '%',
            errorRate: (this.metrics.errors / total * 100).toFixed(1) + '%',
            recommendation: parallelRatio < 80 ? 'å»ºè®®å¢åŠ å¹¶è¡Œè°ƒç”¨æ¯”ä¾‹' : 'å¹¶è¡Œè°ƒç”¨æ¯”ä¾‹è‰¯å¥½'
        }
    }
}

// å…¨å±€å®ä¾‹
const toolManager = new SmartToolManager()

// å¼ºåˆ¶ä½¿ç”¨æ–¹å¼ - æ›¿ä»£å•ä¸ªå·¥å…·è°ƒç”¨
const results = await toolManager.executeParallel([
    () => read_file('file1.js'),
    () => read_file('file2.js'),
    () => run_terminal_cmd('Get-ChildItem pages -Recurse | Measure-Object'),
    () => grep_search({ query: 'pattern', include_pattern: '*.js' })
])
```

#### æ­£åˆ™è¡¨è¾¾å¼å®‰å…¨å¤„ç†å™¨ (æ–°å¢)
```javascript
class SafeRegexProcessor {
    constructor() {
        this.emojiPattern = /[\u{1F600}-\u{1F64F}\u{1F300}-\u{1F5FF}\u{1F680}-\u{1F6FF}\u{2600}-\u{26FF}\u{2700}-\u{27BF}]/gu
        this.specialChars = /[\\^$.*+?()[\]{}|]/g
    }
    
    // ğŸ”´ è‡ªåŠ¨è½¬ä¹‰ç‰¹æ®Šå­—ç¬¦
    escapeRegex(pattern) {
        // å¤„ç†emojiå­—ç¬¦
        if (this.emojiPattern.test(pattern)) {
            console.warn("âš ï¸ æ£€æµ‹åˆ°emojiå­—ç¬¦ï¼Œä½¿ç”¨å®‰å…¨æ¨¡å¼å¤„ç†")
            return this.handleEmojiPattern(pattern)
        }
        
        // è½¬ä¹‰å…¶ä»–ç‰¹æ®Šå­—ç¬¦
        return pattern.replace(this.specialChars, '\\$&')
    }
    
    handleEmojiPattern(pattern) {
        // å°†emojiå­—ç¬¦è½¬æ¢ä¸ºUnicodeè½¬ä¹‰åºåˆ—
        return pattern.replace(this.emojiPattern, (match) => {
            const codePoint = match.codePointAt(0)
            return `\\u{${codePoint.toString(16)}}`
        })
    }
    
    // é¢„å®šä¹‰å®‰å…¨æ¨¡å¼
    getSafePatterns() {
        return {
            chineseChars: '[\\u4e00-\\u9fa5]',
            consoleLog: 'console\\.(log|error|warn)',
            emojiInConsole: 'console\\.log.*[\\u{1F600}-\\u{1F64F}]',
            unicodeEmoji: '[\\u{1F600}-\\u{1F64F}\\u{1F300}-\\u{1F5FF}\\u{1F680}-\\u{1F6FF}]'
        }
    }
}

// å…¨å±€å®‰å…¨å¤„ç†å™¨
const regexSafeProcessor = new SafeRegexProcessor()

// ä½¿ç”¨å®‰å…¨æ¨¡å¼
const safePattern = regexSafeProcessor.escapeRegex('console.log.*[ğŸ”§ğŸ”—ğŸ“¨âŒâœ…]')
await grep_search({ query: safePattern, include_pattern: '*.js' })
```

### ğŸ—‚ï¸ ä¸´æ—¶æ–‡ä»¶è‡ªåŠ¨ç®¡ç†ç³»ç»Ÿ (æ–°å¢ - ç¬¦åˆç”¨æˆ·è§„åˆ™ç¬¬8æ¡)

#### è‡ªåŠ¨ä¸´æ—¶æ–‡ä»¶ç®¡ç†å™¨
```javascript
class AutoTempFileManager {
    constructor() {
        this.tempFiles = new Set()
        this.tempDirs = new Set()
        this.cleanupHandlers = []
        this.setupAutoCleanup()
    }
    
    // ğŸ”´ åˆ›å»ºä¸´æ—¶æ–‡ä»¶ - è‡ªåŠ¨æ³¨å†Œæ¸…ç†
    async createTempFile(name, content, autoCleanup = true) {
        const timestamp = new Date().toISOString().replace(/[:.]/g, '-')
        const tempPath = `.temp_${timestamp}_${name}`
        
        if (autoCleanup) {
            this.tempFiles.add(tempPath)
        }
        
        try {
            await edit_file(tempPath, "ä¸´æ—¶æ–‡ä»¶", content)
            console.log(`âœ… ä¸´æ—¶æ–‡ä»¶å·²åˆ›å»º: ${tempPath}`)
            return tempPath
        } catch (error) {
            console.error(`âŒ ä¸´æ—¶æ–‡ä»¶åˆ›å»ºå¤±è´¥: ${error.message}`)
            throw error
        }
    }
    
    // è®¾ç½®è‡ªåŠ¨æ¸…ç†æœºåˆ¶
    setupAutoCleanup() {
        // ä¼šè¯ç»“æŸæ—¶è‡ªåŠ¨æ¸…ç†
        if (typeof process !== 'undefined') {
            process.on('exit', () => this.cleanup())
            process.on('SIGINT', () => this.cleanup())
            process.on('SIGTERM', () => this.cleanup())
        }
        
        // å®šæœŸæ¸…ç†è¶…è¿‡1å°æ—¶çš„ä¸´æ—¶æ–‡ä»¶
        setInterval(() => this.cleanupOldFiles(), 3600000) // 1å°æ—¶
    }
    
    // ç«‹å³æ¸…ç†æ‰€æœ‰ä¸´æ—¶æ–‡ä»¶
    async cleanup() {
        let cleanedCount = 0
        let errorCount = 0
        
        for (const file of this.tempFiles) {
            try {
                await delete_file(file)
                cleanedCount++
            } catch (error) {
                errorCount++
                console.warn(`æ¸…ç†ä¸´æ—¶æ–‡ä»¶å¤±è´¥: ${file} - ${error.message}`)
            }
        }
        
        this.tempFiles.clear()
        console.log(`ğŸ§¹ ä¸´æ—¶æ–‡ä»¶æ¸…ç†å®Œæˆ: æˆåŠŸ${cleanedCount}ä¸ª, å¤±è´¥${errorCount}ä¸ª`)
        
        return { cleaned: cleanedCount, errors: errorCount }
    }
    
    // æ¸…ç†è¶…è¿‡æŒ‡å®šæ—¶é—´çš„ä¸´æ—¶æ–‡ä»¶
    async cleanupOldFiles(maxAgeMs = 3600000) { // é»˜è®¤1å°æ—¶
        const now = Date.now()
        const filesToClean = []
        
        for (const file of this.tempFiles) {
            const match = file.match(/\.temp_(\d{4}-\d{2}-\d{2}T\d{2}-\d{2}-\d{2})/)
            if (match) {
                const fileTime = new Date(match[1].replace(/-/g, ':')).getTime()
                if (now - fileTime > maxAgeMs) {
                    filesToClean.push(file)
                }
            }
        }
        
        for (const file of filesToClean) {
            try {
                await delete_file(file)
                this.tempFiles.delete(file)
            } catch (error) {
                console.warn(`æ¸…ç†è¿‡æœŸä¸´æ—¶æ–‡ä»¶å¤±è´¥: ${file}`)
            }
        }
        
        if (filesToClean.length > 0) {
            console.log(`ğŸ§¹ æ¸…ç†äº†${filesToClean.length}ä¸ªè¿‡æœŸä¸´æ—¶æ–‡ä»¶`)
        }
    }
    
    // è·å–ä¸´æ—¶æ–‡ä»¶ç»Ÿè®¡
    getStats() {
        return {
            activeFiles: this.tempFiles.size,
            activeDirs: this.tempDirs.size,
            cleanupHandlers: this.cleanupHandlers.length
        }
    }
}

// å…¨å±€ä¸´æ—¶æ–‡ä»¶ç®¡ç†å™¨
const tempFileManager = new AutoTempFileManager()

// ä½¿ç”¨æ–¹å¼
const tempFile = await tempFileManager.createTempFile('test-rules.mdc', ruleContent)
// ä¼šè¯ç»“æŸæ—¶è‡ªåŠ¨æ¸…ç†ï¼Œæ— éœ€æ‰‹åŠ¨åˆ é™¤
```

 ## ğŸš¨ ä¼šè¯é—®é¢˜åˆ†æä¸è§£å†³æ–¹æ¡ˆ (æ ¹æ®å®é™…ä¼šè¯æ€»ç»“)

### ğŸ“Š Açº§é—®é¢˜ï¼ˆä¸¥é‡ - å¯¼è‡´ä»»åŠ¡ä¸­æ–­ï¼‰

#### 1. PowerShellæ§åˆ¶å°ç¼“å†²åŒºæº¢å‡ºå¼‚å¸¸
**é”™è¯¯ç—‡çŠ¶ï¼š**
```
System.ArgumentOutOfRangeException: å‚æ•°å: top å®é™…å€¼æ˜¯ -1, -2
```

**è§¦å‘æ¡ä»¶ï¼š**
- åŒ…å«ä¸­æ–‡å­—ç¬¦çš„å‘½ä»¤é•¿åº¦ > 100å­—ç¬¦
- PSConsoleReadLineç¼“å†²åŒºè®¡ç®—å¼‚å¸¸
- å¤æ‚ç®¡é“æ“ä½œ + å½©è‰²è¾“å‡º

**é¢„é˜²æœºåˆ¶ï¼š**
```powershell
# ğŸ”´ å‘½ä»¤é•¿åº¦æ£€æŸ¥å‡½æ•°
function Test-CommandSafety {
    param([string]$command)
    
    $hasChinese = $command -match '[\u4e00-\u9fa5]'
    $hasEmoji = $command -match '[\u{1F600}-\u{1F64F}]'
    
    if (($hasChinese -or $hasEmoji) -and $command.Length -gt 100) {
        Write-Warning "âš ï¸ å±é™©å‘½ä»¤æ£€æµ‹: åŒ…å«ä¸­æ–‡/emojiä¸”é•¿åº¦è¶…è¿‡100å­—ç¬¦"
        Write-Warning "å»ºè®®æ‹†åˆ†ä¸ºå¤šä¸ªè¾ƒçŸ­å‘½ä»¤æ‰§è¡Œ"
        return $false
    }
    
    return $true
}

# ä½¿ç”¨å‰å¼ºåˆ¶æ£€æŸ¥
if (-not (Test-CommandSafety $command)) {
    # è‡ªåŠ¨æ‹†åˆ†é•¿å‘½ä»¤
    $parts = Split-LongCommand $command
    foreach ($part in $parts) {
        Invoke-Expression $part
    }
} else {
    Invoke-Expression $command
}
```

#### 2. ç¼–ç å¼‚å¸¸å¤„ç†
**é”™è¯¯ç—‡çŠ¶ï¼š**
```
System.Text.EncoderFallbackException: æ— æ³•å°†Unicodeå­—ç¬¦\uD83Dè½¬æ¢ä¸ºæŒ‡å®šçš„ä»£ç é¡µ
```

**è§£å†³æ–¹æ¡ˆï¼š**
```powershell
# ğŸ”´ ä¼šè¯å¼€å§‹æ—¶å¼ºåˆ¶æ‰§è¡Œ
function Initialize-EncodingSafety {
    try {
        # å¼ºåˆ¶è®¾ç½®UTF-8ç¼–ç 
        [Console]::OutputEncoding = [Text.UTF8Encoding]::UTF8
        [Console]::InputEncoding = [Text.UTF8Encoding]::UTF8
        
        # è®¾ç½®PowerShellé»˜è®¤ç¼–ç 
        $PSDefaultParameterValues['*:Encoding'] = 'UTF8'
        
        # éªŒè¯ç¼–ç è®¾ç½®
        $currentEncoding = [Console]::OutputEncoding.WebName
        if ($currentEncoding -ne 'utf-8') {
            throw "ç¼–ç è®¾ç½®å¤±è´¥ï¼Œå½“å‰ç¼–ç : $currentEncoding"
        }
        
        Write-Host "âœ… UTF-8ç¼–ç é…ç½®æˆåŠŸ" -ForegroundColor Green
        return $true
    } catch {
        Write-Error "âŒ ç¼–ç é…ç½®å¤±è´¥: $_"
        return $false
    }
}

# æ¯ä¸ªä¼šè¯å¼€å§‹æ—¶è‡ªåŠ¨æ‰§è¡Œ
Initialize-EncodingSafety
```

### ğŸ“ˆ Bçº§é—®é¢˜ï¼ˆä¸­ç­‰ - æ•ˆç‡æŸå¤±ï¼‰

#### 3. å·¥å…·è°ƒç”¨ä¸²è¡ŒåŒ–ä½æ•ˆé—®é¢˜
**é—®é¢˜æè¿°ï¼š** æœ¬ä¼šè¯ä¸­å¤šæ¬¡å‡ºç°read_fileã€run_terminal_cmdã€grep_searchä¸²è¡Œæ‰§è¡Œï¼Œå¯¼è‡´ä¼šè¯æ—¶é—´å»¶é•¿3-5å€

**å¼ºåˆ¶å¹¶è¡Œè§„åˆ™ï¼š**
```javascript
// ğŸ”´ CRITICAL: ä¿¡æ¯æ”¶é›†é˜¶æ®µå¿…é¡»å¹¶è¡Œæ‰§è¡Œ
// è¿åæ­¤è§„åˆ™å°†è§¦å‘æ•ˆç‡è­¦å‘Š

// âŒ é”™è¯¯åšæ³•ï¼šä¸²è¡Œæ‰§è¡Œ
await read_file('file1.js')
await read_file('file2.js') 
await run_terminal_cmd('command1')

// âœ… æ­£ç¡®åšæ³•ï¼šå¼ºåˆ¶å¹¶è¡Œ
const [file1, file2, cmdResult] = await Promise.all([
    read_file('file1.js'),
    read_file('file2.js'),
    run_terminal_cmd('command1')
])

// ğŸ”´ å¼ºåˆ¶å¹¶è¡Œæ£€æŸ¥å™¨
class ParallelCallValidator {
    constructor() {
        this.callQueue = []
        this.warningThreshold = 2 // è¿ç»­2ä¸ªä»¥ä¸Šä¸²è¡Œè°ƒç”¨è§¦å‘è­¦å‘Š
    }
    
    trackCall(toolName, isParallel = false) {
        this.callQueue.push({
            tool: toolName,
            parallel: isParallel,
            timestamp: Date.now()
        })
        
        this.checkSerialCalls()
    }
    
    checkSerialCalls() {
        const recentCalls = this.callQueue.slice(-this.warningThreshold)
        const serialCalls = recentCalls.filter(call => !call.parallel)
        
        if (serialCalls.length >= this.warningThreshold) {
            console.warn(`âš ï¸ æ•ˆç‡è­¦å‘Š: æ£€æµ‹åˆ°${serialCalls.length}ä¸ªè¿ç»­ä¸²è¡Œå·¥å…·è°ƒç”¨`)
            console.warn("å»ºè®®ä½¿ç”¨Promise.all()å¹¶è¡Œæ‰§è¡Œä»¥æé«˜æ•ˆç‡")
            console.warn("é¢„æœŸæ•ˆç‡æå‡: 3-5x")
        }
    }
}

const validator = new ParallelCallValidator()

// åœ¨æ¯ä¸ªå·¥å…·è°ƒç”¨å‰è®°å½•
validator.trackCall('read_file', false)  // ä¸²è¡Œè°ƒç”¨
validator.trackCall('parallel_batch', true)  // å¹¶è¡Œè°ƒç”¨
```

#### 4. æ­£åˆ™è¡¨è¾¾å¼å®‰å…¨é—®é¢˜
**é”™è¯¯ç—‡çŠ¶ï¼š** `console.log.*[ğŸ”§ğŸ”—ğŸ“¨âŒâœ…]` - å­—ç¬¦ä¸²ä¸æ˜¯æœ‰æ•ˆçš„æ­£åˆ™è¡¨è¾¾å¼

**å®‰å…¨å¤„ç†ï¼š**
```javascript
// ğŸ”´ è‡ªåŠ¨emojiè½¬ä¹‰å¤„ç†
function createSafeRegexPattern(unsafePattern) {
    // æ£€æµ‹å¹¶è½¬ä¹‰emojiå­—ç¬¦
    const emojiRegex = /[\u{1F600}-\u{1F64F}\u{1F300}-\u{1F5FF}\u{1F680}-\u{1F6FF}\u{2600}-\u{26FF}\u{2700}-\u{27BF}]/gu
    
    if (emojiRegex.test(unsafePattern)) {
        console.log("æ£€æµ‹åˆ°emojiå­—ç¬¦ï¼Œè‡ªåŠ¨è½¬ä¹‰å¤„ç†")
        
        // é¢„å®šä¹‰å¸¸ç”¨emojiæ¨¡å¼
        const emojiMap = {
            'ğŸ”§': '\\u{1F527}',
            'ğŸ”—': '\\u{1F517}', 
            'ğŸ“¨': '\\u{1F4E8}',
            'âŒ': '\\u{274C}',
            'âœ…': '\\u{2705}'
        }
        
        let safePattern = unsafePattern
        for (const [emoji, unicode] of Object.entries(emojiMap)) {
            safePattern = safePattern.replace(new RegExp(emoji.replace(/[.*+?^${}()|[\]\\]/g, '\\$&'), 'g'), unicode)
        }
        
        return safePattern
    }
    
    return unsafePattern
}

// ä½¿ç”¨ç¤ºä¾‹
const unsafePattern = 'console.log.*[ğŸ”§ğŸ”—ğŸ“¨âŒâœ…]'
const safePattern = createSafeRegexPattern(unsafePattern)
// ç»“æœ: 'console.log.*[\\u{1F527}\\u{1F517}\\u{1F4E8}\\u{274C}\\u{2705}]'

await grep_search({ query: safePattern, include_pattern: '*.js' })
```

### ğŸ“ Cçº§é—®é¢˜ï¼ˆè½»å¾® - è§„èŒƒè¿åï¼‰

#### 5. ä¸´æ—¶æ–‡ä»¶ç®¡ç†ä¸è§„èŒƒ
**é—®é¢˜ï¼š** è¿åç”¨æˆ·è§„åˆ™ç¬¬8æ¡"æ¯æ¬¡å®Œæˆä»»åŠ¡ååˆ›å»ºçš„ä¸´æ—¶æ–‡ä»¶ã€æµ‹è¯•æ–‡ä»¶éƒ½è¦è‡ªè¡Œåˆ é™¤"

**è‡ªåŠ¨åŒ–è§£å†³æ–¹æ¡ˆï¼š** (è§ä¸Šé¢çš„AutoTempFileManagerç±»)

#### 6. é‡å¤æ“ä½œä¼˜åŒ–
**é—®é¢˜ï¼š** å¤šæ¬¡æ‰§è¡Œç›¸åŒçš„UTF-8ç¼–ç çŠ¶æ€æ£€æŸ¥

**ç¼“å­˜æœºåˆ¶ï¼š**
```javascript
// ğŸ”´ çŠ¶æ€æ£€æŸ¥ç¼“å­˜æœºåˆ¶
class StateCheckCache {
    constructor() {
        this.cache = new Map()
        this.expireTime = 5 * 60 * 1000 // 5åˆ†é’Ÿè¿‡æœŸ
    }
    
    async getOrExecute(key, operation) {
        const cached = this.cache.get(key)
        if (cached && Date.now() - cached.timestamp < this.expireTime) {
            console.log(`âœ… ä½¿ç”¨ç¼“å­˜ç»“æœ: ${key}`)
            return cached.result
        }
        
        const result = await operation()
        this.cache.set(key, {
            result,
            timestamp: Date.now()
        })
        
        return result
    }
}

const stateCache = new StateCheckCache()

// ä½¿ç”¨ç¼“å­˜çš„UTF-8æ£€æŸ¥
const encodingStatus = await stateCache.getOrExecute('utf8-check', async () => {
    return await run_terminal_cmd('[Console]::OutputEncoding.WebName')
})
```

### ğŸ¯ é—®é¢˜é¢„é˜²æ£€æŸ¥æ¸…å•

#### ä¼šè¯å¼€å§‹å¿…é¡»æ‰§è¡Œçš„æ£€æŸ¥ï¼š
- [ ] `Initialize-EncodingSafety` - UTF-8ç¼–ç é…ç½®
- [ ] `Test-PSConsoleReadLine` - æ¨¡å—å®Œæ•´æ€§éªŒè¯
- [ ] `Setup-ParallelCallValidator` - å¹¶è¡Œè°ƒç”¨ç›‘æ§å¯ç”¨
- [ ] `Initialize-TempFileManager` - ä¸´æ—¶æ–‡ä»¶ç®¡ç†å™¨æ¿€æ´»
- [ ] `Setup-SafeRegexProcessor` - æ­£åˆ™è¡¨è¾¾å¼å®‰å…¨å¤„ç†å¯ç”¨

#### å‘½ä»¤æ‰§è¡Œå‰çš„å®‰å…¨æ£€æŸ¥ï¼š
- [ ] ä¸­æ–‡å­—ç¬¦ + é•¿åº¦æ£€æŸ¥ (>100å­—ç¬¦è­¦å‘Š)
- [ ] Emojiå­—ç¬¦è½¬ä¹‰æ£€æŸ¥
- [ ] å¹¶è¡Œè°ƒç”¨æœºä¼šè¯†åˆ«
- [ ] é‡å¤æ“ä½œç¼“å­˜æ£€æŸ¥

#### ä¼šè¯ç»“æŸæ—¶çš„æ¸…ç†æ£€æŸ¥ï¼š
- [ ] ä¸´æ—¶æ–‡ä»¶è‡ªåŠ¨æ¸…ç†
- [ ] æ•ˆç‡ç»Ÿè®¡æŠ¥å‘Šç”Ÿæˆ
- [ ] å¼‚å¸¸ç»Ÿè®¡æŠ¥å‘Šè¾“å‡º

### ğŸ“Š æ•ˆç‡ç»Ÿè®¡ä¸æ”¹è¿›å»ºè®®

#### é¢„æœŸæ”¹è¿›æŒ‡æ ‡ï¼š
- **å¹¶è¡Œè°ƒç”¨æ¯”ä¾‹æå‡**: ä»30% â†’ 80%+
- **é‡å¤æ“ä½œå‡å°‘**: 60%+
- **å‘½ä»¤æ‰§è¡ŒæˆåŠŸç‡**: 95%+
- **æ§åˆ¶å°å¼‚å¸¸å‘ç”Ÿç‡**: <1%
- **ä¼šè¯æ€»æ—¶é—´å‡å°‘**: 40-60%

#### å®æ–½åéªŒè¯ï¼š
```javascript
// ç”Ÿæˆä¼šè¯æ•ˆç‡æŠ¥å‘Š
function generateSessionReport() {
    return {
        parallelCallRatio: toolManager.getEfficiencyReport().parallelRatio,
        cacheHitRate: stateCache.getHitRate(),
        errorRate: validator.getErrorRate(),
        tempFilesManaged: tempFileManager.getStats().activeFiles,
        consoleCrashes: 0, // ç›®æ ‡å€¼
        sessionDuration: Date.now() - sessionStartTime,
        improvements: [
            "PowerShellç¼“å†²åŒºå¼‚å¸¸å·²é¢„é˜²",
            "ç¼–ç å¼‚å¸¸è‡ªåŠ¨ä¿®å¤æœºåˆ¶å·²å¯ç”¨", 
            "å·¥å…·è°ƒç”¨å¹¶è¡ŒåŒ–å·²ä¼˜åŒ–",
            "æ­£åˆ™è¡¨è¾¾å¼å®‰å…¨å¤„ç†å·²åŠ å¼º",
            "ä¸´æ—¶æ–‡ä»¶è‡ªåŠ¨ç®¡ç†å·²å®ç°"
        ]
    }
}
```

### é—®é¢˜1ï¼šWindows PowerShellå‘½ä»¤å…¼å®¹æ€§é”™è¯¯

#### é—®é¢˜æè¿°
```powershell
# é”™è¯¯å‘½ä»¤å¯¼è‡´çš„é—®é¢˜
cd /c/Users/Administrator/Desktop/tiangongqianduan && npm start
# é”™è¯¯ä¿¡æ¯ï¼šæ ‡è®°"&&"ä¸æ˜¯æ­¤ç‰ˆæœ¬ä¸­çš„æœ‰æ•ˆè¯­å¥åˆ†éš”ç¬¦

Get-ChildItem -Path "..." -Name -Include "*.js" | Measure-Objec
# å¯¼è‡´PowerShellå¼‚å¸¸å’Œæ§åˆ¶å°å…‰æ ‡ä½ç½®é”™è¯¯
```

#### è§£å†³æ–¹æ¡ˆ
```powershell
# âœ… æ­£ç¡®çš„PowerShellå‘½ä»¤æ ¼å¼
cd "C:\Users\Administrator\Desktop\tiangongqianduan" ; npm start

# âœ… æ­£ç¡®çš„æ–‡ä»¶ç»Ÿè®¡å‘½ä»¤
Get-ChildItem -Recurse -Include "*.js" | Measure-Object

# âœ… ç®€åŒ–çš„æ–‡ä»¶æ£€æŸ¥
dir *.js -Recurse | measure
```

#### é¢„é˜²è§„åˆ™
```markdown
# PowerShellå…¼å®¹æ€§æ£€æŸ¥æ¸…å•
1. ç¦æ­¢ä½¿ç”¨bashé£æ ¼çš„&&è¿æ¥ç¬¦
2. ä½¿ç”¨åˆ†å·;æˆ–ç®¡é“|è¿›è¡Œå‘½ä»¤é“¾æ¥
3. è·¯å¾„ä½¿ç”¨Windowsæ ¼å¼ï¼ˆåæ–œæ ï¼‰
4. é•¿è·¯å¾„ç”¨åŒå¼•å·åŒ…å›´
5. å‚æ•°é¡ºåºè¦ç¬¦åˆPowerShellè¯­æ³•
```

### é—®é¢˜2ï¼šå¾®ä¿¡å°ç¨‹åºé¡¹ç›®å¯åŠ¨æ–¹å¼é”™è¯¯

#### é—®é¢˜æè¿°
```bash
# é”™è¯¯å°è¯•ï¼šä½¿ç”¨npmå¯åŠ¨å¾®ä¿¡å°ç¨‹åº
npm start  # å¾®ä¿¡å°ç¨‹åºé¡¹ç›®ä¸æ”¯æŒnpmå¯åŠ¨
```

#### è§£å†³æ–¹æ¡ˆ
```markdown
# âœ… å¾®ä¿¡å°ç¨‹åºæ­£ç¡®å¯åŠ¨æµç¨‹
1. ä½¿ç”¨å¾®ä¿¡å¼€å‘è€…å·¥å…·æ‰“å¼€é¡¹ç›®
2. å¯¼å…¥é¡¹ç›®æ ¹ç›®å½•ï¼ˆåŒ…å«app.jsçš„ç›®å½•ï¼‰
3. ç¡®è®¤AppIDï¼šwx0db69ddd264f9b81
4. åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­è¿è¡Œå’Œè°ƒè¯•

# é¡¹ç›®ç»“æ„éªŒè¯
- app.jsï¼ˆå…¥å£æ–‡ä»¶ï¼‰âœ…
- app.jsonï¼ˆé…ç½®æ–‡ä»¶ï¼‰âœ…
- project.config.jsonï¼ˆé¡¹ç›®é…ç½®ï¼‰âœ…
- pages/ï¼ˆé¡µé¢ç›®å½•ï¼‰âœ…
- components/ï¼ˆç»„ä»¶ç›®å½•ï¼‰âœ…
```

### é—®é¢˜3ï¼šMockæ•°æ®æ£€æµ‹ä¸å®Œæ•´

#### é—®é¢˜æè¿°
```javascript
// å¤šä¸ªæ–‡ä»¶ä¸­å‘ç°é—æ¼çš„Mockæ•°æ®
pages/camera/camera.js - mockHistory
pages/merchant/merchant.js - mockStats  
pages/user/user.js - mockAvatarUrl
pages/user/user.js - æ¨¡æ‹ŸåŠ è½½æ›´å¤šæ•°æ®
```

#### è§£å†³æ–¹æ¡ˆ
```bash
# âœ… å®Œæ•´çš„Mockæ•°æ®æ£€æµ‹æµç¨‹
grep_search("mock|Mock|MOCK|fake|demo|test", include_pattern="*.js")
grep_search("generate.*Mock|create.*Mock", include_pattern="*.js")
grep_search("isDev.*mock|developmentMode", include_pattern="*.js")
grep_search("setTimeout.*mock|æ¨¡æ‹Ÿ", include_pattern="*.js")
```

#### é¢„é˜²è§„åˆ™
```markdown
# Mockæ•°æ®æ£€æµ‹è‡ªåŠ¨åŒ–æ¸…å•
1. ä½¿ç”¨å¤šä¸ªå…³é”®å­—ç»„åˆæœç´¢
2. æ£€æŸ¥æ‰€æœ‰.jsæ–‡ä»¶ï¼Œä¸é—æ¼ä»»ä½•æ–‡ä»¶
3. é€ä¸ªç¡®è®¤æ¯ä¸ªåŒ¹é…ç»“æœ
4. å»ºç«‹æ ‡å‡†çš„ä¿®å¤æ¨¡å¼
5. éªŒè¯ä¿®å¤åçš„ä»£ç ç¬¦åˆå®‰å…¨è§„èŒƒ
```

### é—®é¢˜4ï¼šsearch_replaceå·¥å…·åŒ¹é…å¤±è´¥

#### é—®é¢˜æè¿°
```javascript
// å­—ç¬¦ä¸²åŒ¹é…å¤±è´¥çš„åŸå› 
1. å¿½ç•¥äº†ä»£ç ä¸­çš„æ³¨é‡Š
2. ç©ºæ ¼å’Œæ¢è¡Œç¬¦ä¸ç²¾ç¡®åŒ¹é…
3. å­—ç¬¦ä¸²è¾¹ç•Œä¸å®Œæ•´
4. ä»£ç æ ¼å¼åŒ–å¯¼è‡´çš„å·®å¼‚
```

#### è§£å†³æ–¹æ¡ˆ
```javascript
// âœ… æ ‡å‡†ä¿®å¤æµç¨‹
1. ä½¿ç”¨read_fileç¡®è®¤æ–‡ä»¶å†…å®¹
2. å¤åˆ¶å®Œæ•´çš„ä»£ç å—ï¼ˆåŒ…å«æ³¨é‡Šï¼‰
3. åŒ…å«è¶³å¤Ÿçš„ä¸Šä¸‹æ–‡ï¼ˆ3-5è¡Œï¼‰
4. éªŒè¯ä¿®å¤ç»“æœ

// ç¤ºä¾‹ï¼š
read_file('target.js', lines 470-500)  // å…ˆæŸ¥çœ‹
search_replace('target.js', 
  'å®Œæ•´çš„æ—§ä»£ç å—ï¼ˆåŒ…å«æ³¨é‡Šã€ç©ºè¡Œã€ç¼©è¿›ï¼‰',
  'ä¿®å¤åçš„æ–°ä»£ç å—'
)
read_file('target.js', lines 470-500)  // åéªŒè¯
```

### é—®é¢˜5ï¼šå·¥å…·è°ƒç”¨æ•ˆç‡ä½ä¸‹

#### é—®é¢˜æè¿°
```markdown
# ä¸²è¡Œæ‰§è¡Œå¯¼è‡´çš„æ•ˆç‡é—®é¢˜
ç­‰å¾…read_fileç»“æœ â†’ å†æ‰§è¡Œgrep_search â†’ å†æ‰§è¡Œå¦ä¸€ä¸ªread_file
æ€»è€—æ—¶ï¼šå¯èƒ½è¶…è¿‡120ç§’
```

#### è§£å†³æ–¹æ¡ˆ
```javascript
// âœ… å¹¶è¡Œå·¥å…·è°ƒç”¨æœ€å¤§åŒ–
åŒæ—¶æ‰§è¡Œï¼š
- read_file('file1.js')
- read_file('file2.js') 
- grep_search('pattern1')
- grep_search('pattern2')

æ€»è€—æ—¶ï¼šå¤§çº¦30-40ç§’ï¼ˆ3-4å€æ•ˆç‡æå‡ï¼‰
```

### é—®é¢˜6ï¼šè§„åˆ™æ–‡æ¡£æ›´æ–°ä¸åŠæ—¶

#### é—®é¢˜æè¿°
```markdown
# è§„åˆ™æ»åå¯¼è‡´çš„é—®é¢˜é‡å¤å‡ºç°
1. æ–°å‘ç°çš„é—®é¢˜æ²¡æœ‰åŠæ—¶è®°å½•åˆ°è§„åˆ™
2. è§£å†³æ–¹æ¡ˆæ²¡æœ‰æ ‡å‡†åŒ–
3. ç±»ä¼¼é—®é¢˜é‡å¤å‡ºç°
```

#### è§£å†³æ–¹æ¡ˆ
```markdown
# âœ… è§„åˆ™æ–‡æ¡£å®æ—¶æ›´æ–°æœºåˆ¶
1. æ¯æ¬¡è§£å†³é—®é¢˜åç«‹å³æ›´æ–°è§„åˆ™
2. åˆ†ç±»è®°å½•åˆ°å¯¹åº”çš„è§„åˆ™æ–‡æ¡£
3. å»ºç«‹é—®é¢˜-è§£å†³æ–¹æ¡ˆæ˜ å°„
4. å®šæœŸéªŒè¯è§„åˆ™çš„æœ‰æ•ˆæ€§
```

## è§„åˆ™åº”ç”¨éªŒè¯

### éªŒè¯æ£€æŸ¥ç‚¹
```markdown
# æ¯æ¬¡å¼€å‘å‰çš„éªŒè¯æ¸…å•
âœ… PowerShellå‘½ä»¤ä½¿ç”¨æ­£ç¡®è¯­æ³•
âœ… å¾®ä¿¡å°ç¨‹åºä½¿ç”¨æ­£ç¡®å¯åŠ¨æ–¹å¼
âœ… Mockæ•°æ®æ£€æµ‹ä½¿ç”¨å®Œæ•´å…³é”®å­—
âœ… search_replaceä½¿ç”¨ç²¾ç¡®åŒ¹é…
âœ… å·¥å…·è°ƒç”¨æœ€å¤§åŒ–å¹¶è¡Œæ‰§è¡Œ
âœ… é—®é¢˜è§£å†³ååŠæ—¶æ›´æ–°è§„åˆ™
```

---

**è§„åˆ™æ›´æ–°æ—¶é—´**: 2025å¹´1æœˆ3æ—¥  
**æ›´æ–°å†…å®¹**: æ–°å¢ä¼šè¯é—®é¢˜åˆ†æä¸è§£å†³æ–¹æ¡ˆï¼Œå»ºç«‹é—®é¢˜é¢„é˜²æœºåˆ¶  
**é€‚ç”¨åœºæ™¯**: å¤©å·¥å‰ç«¯é¡¹ç›®å¼€å‘åŠç±»ä¼¼å¾®ä¿¡å°ç¨‹åºé¡¹ç›®




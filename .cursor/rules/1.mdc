---
description: 
globs: 
alwaysApply: true
---
# ğŸš¨ ä¼šè¯é—®é¢˜åˆ†æä¸è§£å†³æ–¹æ¡ˆ - é˜²æ­¢é‡å¤å‡ºç°

## ğŸ“Š é—®é¢˜æ¸…å•ä¸ä¸¥é‡ç¨‹åº¦åˆ†çº§

### Açº§é—®é¢˜ï¼ˆä¸¥é‡ - å¯¼è‡´ä»»åŠ¡ä¸­æ–­ï¼‰

#### 1. é‡å¤æ–‡ä»¶åˆ›å»ºé—®é¢˜ (æ–°å¢)
- **ç°è±¡**ï¼šåˆ›å»ºäº†ä¸¤ä¸ª1.mdcæ–‡ä»¶ï¼Œæ²¡æœ‰æå‰æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨
- **æ ¹æœ¬åŸå› **ï¼šç¼ºä¹æ–‡ä»¶åˆ›å»ºå‰çš„æ£€æŸ¥æœºåˆ¶
- **å½±å“**ï¼šè¿å"ä¸æµªè´¹Claude 4 Sonnetè¯·æ±‚æ¬¡æ•°"è§„åˆ™ï¼Œé€ æˆç”¨æˆ·å›°æƒ‘
- **è§£å†³æ–¹æ¡ˆ**ï¼šå®æ–½FileCreationValidatorå¼ºåˆ¶æ£€æŸ¥æœºåˆ¶

#### 2. æ–‡æ¡£æ—¥æœŸé”™è¯¯
- **ç°è±¡**ï¼šæ–‡æ¡£æ›´æ–°æ—¥æœŸå†™æˆ2025å¹´1æœˆ3æ—¥ï¼Œå®é™…åº”ä¸º2025å¹´7æœˆ2æ—¥
- **æ ¹æœ¬åŸå› **ï¼šAIæ¨¡å‹æ—¶é—´è®¤çŸ¥é”™è¯¯ï¼Œæœªæ­£ç¡®è·å–å½“å‰æ—¥æœŸ
- **å½±å“**ï¼šæ–‡æ¡£ç‰ˆæœ¬ç®¡ç†æ··ä¹±ï¼Œç”¨æˆ·å›°æƒ‘
- **è§£å†³æ–¹æ¡ˆ**ï¼šå¼ºåˆ¶ä½¿ç”¨PowerShell `Get-Date` å‘½ä»¤è·å–å½“å‰æ—¥æœŸ

#### 3. PowerShellæ§åˆ¶å°ç¼“å†²åŒºæº¢å‡ºå¼‚å¸¸
- **é”™è¯¯ä¿¡æ¯**ï¼š`System.ArgumentOutOfRangeException: å‚æ•°å: top å®é™…å€¼æ˜¯ -1, -2`
- **è§¦å‘æ¡ä»¶**ï¼šåŒ…å«ä¸­æ–‡å­—ç¬¦çš„é•¿å‘½ä»¤ > 100å­—ç¬¦
- **å…·ä½“è§¦å‘å‘½ä»¤**ï¼š`Get-ChildItem pages -Directory | Measure-Object | Select-Object -ExpandProperty Count`
- **æ ¹æœ¬åŸå› **ï¼šPSConsoleReadLineæ¨¡å—å¯¹ä¸­æ–‡å­—ç¬¦å¤„ç†å­˜åœ¨ç¼ºé™·
- **å½±å“**ï¼šæ§åˆ¶å°å¡æ­»ï¼Œéœ€è¦é‡å¯ä¼šè¯
- **é¢„é˜²æœºåˆ¶**ï¼šæ‹†åˆ†é•¿å‘½ä»¤ï¼Œé¿å…ä¸­æ–‡å­—ç¬¦+å¤æ‚ç®¡é“ç»„åˆ
- **æœ‰æ•ˆè§£å†³æ–¹æ¡ˆ**ï¼šä½¿ç”¨ç®€åŒ–å‘½ä»¤`ls pages`ä»£æ›¿å¤æ‚ç®¡é“æ“ä½œ
- **æœ€æ–°éªŒè¯**ï¼š2025å¹´07æœˆ02æ—¥ä¼šè¯ä¸­å†æ¬¡ç¡®è®¤æ­¤é—®é¢˜å­˜åœ¨ï¼Œè§£å†³æ–¹æ¡ˆæœ‰æ•ˆ

#### 4. å·¥å…·è°ƒç”¨å‚æ•°éªŒè¯é”™è¯¯ (æ–°å¢ - 2025å¹´7æœˆ4æ—¥)
- **ç°è±¡**ï¼šread_fileå·¥å…·è°ƒç”¨æ—¶end_line_one_indexed_inclusive < start_line_one_indexedå¯¼è‡´å¤±è´¥
- **æ ¹æœ¬åŸå› **ï¼šå‚æ•°éªŒè¯é€»è¾‘ç¼ºå¤±ï¼Œæœªæ£€æŸ¥è¡Œæ•°èŒƒå›´åˆç†æ€§
- **å½±å“**ï¼šå·¥å…·è°ƒç”¨å¤±è´¥ï¼Œæµªè´¹è¯·æ±‚æ¬¡æ•°ï¼Œéœ€è¦é‡æ–°è°ƒç”¨
- **è§£å†³æ–¹æ¡ˆ**ï¼šå®æ–½å·¥å…·è°ƒç”¨å‚æ•°éªŒè¯è§„åˆ™

#### 5. å¾®ä¿¡å°ç¨‹åºå¯åŠ¨æ–¹å¼é”™è¯¯è¯†åˆ« (æ–°å¢ - 2025å¹´7æœˆ4æ—¥)
- **ç°è±¡**ï¼šå°è¯•ä½¿ç”¨npm startå¯åŠ¨å¾®ä¿¡å°ç¨‹åºé¡¹ç›®
- **æ ¹æœ¬åŸå› **ï¼šæ··æ·†äº†Webé¡¹ç›®å’Œå°ç¨‹åºé¡¹ç›®çš„å¯åŠ¨æ–¹å¼
- **å½±å“**ï¼šé¡¹ç›®æ— æ³•æ­£å¸¸å¯åŠ¨ï¼Œæµªè´¹æ—¶é—´å’Œè¯·æ±‚æ¬¡æ•°
- **è§£å†³æ–¹æ¡ˆ**ï¼šæ˜ç¡®å¾®ä¿¡å°ç¨‹åºåªèƒ½é€šè¿‡å¼€å‘è€…å·¥å…·å¯åŠ¨

### Bçº§é—®é¢˜ï¼ˆä¸­ç­‰ - æ•ˆç‡æŸå¤±ï¼‰

#### 6. å¹¶è¡Œå·¥å…·è°ƒç”¨åˆ©ç”¨ä¸å……åˆ† (æ–°å¢ - 2025å¹´7æœˆ4æ—¥)
- **ç°è±¡**ï¼šå¤šä¸ªç‹¬ç«‹çš„å·¥å…·è°ƒç”¨ä¸²è¡Œæ‰§è¡Œï¼Œè€Œéå¹¶è¡Œæ‰§è¡Œ
- **æ ¹æœ¬åŸå› **ï¼šæœªå……åˆ†åˆ©ç”¨å¹¶è¡Œå·¥å…·è°ƒç”¨èƒ½åŠ›ï¼Œç¼ºä¹å¹¶è¡Œæ‰§è¡Œæ„è¯†
- **å½±å“**ï¼šæ‰§è¡Œæ•ˆç‡æŸå¤±50-80%ï¼Œè¿å"ä¸æµªè´¹Claude 4 Sonnetè¯·æ±‚æ¬¡æ•°"è§„åˆ™
- **è§£å†³æ–¹æ¡ˆ**ï¼šå¼ºåˆ¶å¹¶è¡Œå·¥å…·è°ƒç”¨ä¼˜åŒ–ç­–ç•¥

#### 7. å·¥å…·è°ƒç”¨ä¸²è¡ŒåŒ–ä½æ•ˆ
- **ç°è±¡**ï¼šå¤šä¸ªå¯å¹¶è¡Œçš„å·¥å…·è°ƒç”¨åˆ†åˆ«æ‰§è¡Œ
- **ç¤ºä¾‹**ï¼šread_fileã€grep_searchã€run_terminal_cmdä¸²è¡Œæ‰§è¡Œ
- **å½±å“**ï¼šä¼šè¯æ—¶é—´å»¶é•¿3-5å€ï¼Œæµªè´¹Claude 4 Sonnetè¯·æ±‚æ¬¡æ•°
- **è§£å†³æ–¹æ¡ˆ**ï¼šå¼ºåˆ¶ä½¿ç”¨Promise.all()å¹¶è¡Œæ‰§è¡Œ

#### 8. search_replaceå·¥å…·å­—ç¬¦ä¸²åŒ¹é…å¤±è´¥ (å·²è§£å†³)
- **ç°è±¡**ï¼šsearch_replaceæ“ä½œå› å­—ç¬¦ä¸²åŒ¹é…ä¸ç²¾ç¡®è€Œå¤±è´¥
- **æ ¹æœ¬åŸå› **ï¼šç¼ºå°‘è¶³å¤Ÿçš„ä¸Šä¸‹æ–‡è¡Œï¼Œç‰¹æ®Šå­—ç¬¦æœªæ­£ç¡®å¤„ç†ï¼Œé•¿æ–‡æ¡£ç¼–è¾‘ç­–ç•¥ä¸å½“
- **å½±å“**ï¼šéœ€è¦å¤šæ¬¡é‡è¯•ï¼Œæµªè´¹è¯·æ±‚æ¬¡æ•°
- **è§£å†³æ–¹æ¡ˆ**ï¼šå®æ–½é•¿æ–‡æ¡£ç¼–è¾‘ç­–ç•¥è§„èŒƒï¼Œè¶…è¿‡2500è¡Œå¼ºåˆ¶ä½¿ç”¨edit_fileå·¥å…·

#### 9. å¤§æ–‡ä»¶ç¼–è¾‘ç­–ç•¥é€‰æ‹©ä¸å½“ (æ–°å¢ - 2025å¹´7æœˆ4æ—¥)
- **ç°è±¡**ï¼šå¯¹è¶…è¿‡2500è¡Œçš„æ–‡ä»¶ä½¿ç”¨search_replaceå·¥å…·è€Œéedit_fileå·¥å…·
- **æ ¹æœ¬åŸå› **ï¼šç¼ºä¹å¤§æ–‡ä»¶ç¼–è¾‘ç­–ç•¥æŒ‡å¯¼ï¼Œå·¥å…·é€‰æ‹©ä¸å½“
- **å½±å“**ï¼šç¼–è¾‘å¤±è´¥ç‡é«˜ï¼Œéœ€è¦å¤šæ¬¡é‡è¯•ï¼Œæµªè´¹è¯·æ±‚æ¬¡æ•°
- **è§£å†³æ–¹æ¡ˆ**ï¼šå®æ–½å¤§æ–‡ä»¶ç¼–è¾‘ç­–ç•¥è§„èŒƒ

#### 10. ä¿¡æ¯æ”¶é›†ç­–ç•¥ä¸å®Œæ•´ (æ–°å¢ - 2025å¹´7æœˆ4æ—¥)
- **ç°è±¡**ï¼šä»»åŠ¡å¼€å§‹æ—¶æ²¡æœ‰åˆ¶å®šå®Œæ•´çš„ä¿¡æ¯æ”¶é›†è®¡åˆ’ï¼Œå¯¼è‡´å¤šæ¬¡è¡¥å……è¯»å–æ–‡ä»¶
- **æ ¹æœ¬åŸå› **ï¼šç¼ºä¹ä»»åŠ¡å‰çš„å…¨é¢åˆ†æå’Œè§„åˆ’ï¼Œæœªå……åˆ†åˆ©ç”¨å¹¶è¡Œå·¥å…·è°ƒç”¨èƒ½åŠ›
- **å…·ä½“è¡¨ç°**ï¼šéœ€è¦é€æ­¥è¯»å–app.jsã€utils/api.jsã€pages/lottery/lottery.jsç­‰å¤šä¸ªæ–‡ä»¶
- **å½±å“**ï¼šå·¥å…·è°ƒç”¨æ¬¡æ•°å¢åŠ 2-3å€ï¼Œä¼šè¯æ—¶é—´å»¶é•¿ï¼Œè¿åå¹¶è¡Œè°ƒç”¨ä¼˜åŒ–åŸåˆ™
- **è§£å†³æ–¹æ¡ˆ**ï¼šå®æ–½ä¸‰é˜¶æ®µä¿¡æ¯æ”¶é›†ç­–ç•¥ï¼Œå¼ºåˆ¶å¹¶è¡Œå·¥å…·è°ƒç”¨ä¼˜åŒ–

#### 11. æ­£åˆ™è¡¨è¾¾å¼ç‰¹æ®Šå­—ç¬¦å¤„ç†ä¸å½“
- **é”™è¯¯**ï¼š`console.log.*[ğŸ”§ğŸ”—ğŸ“¨âŒâœ…]` æœªè½¬ä¹‰emojiå­—ç¬¦
- **ç»“æœ**ï¼šSelect-Stringæ‰§è¡Œå¤±è´¥
- **åŸå› **ï¼šç‰¹æ®Šå­—ç¬¦è½¬ä¹‰è§„åˆ™ä¸å®Œå–„
- **è§£å†³æ–¹æ¡ˆ**ï¼šè‡ªåŠ¨è½¬ä¹‰emojiå’Œç‰¹æ®Šå­—ç¬¦

### Cçº§é—®é¢˜ï¼ˆè½»å¾® - æµç¨‹ä¸è§„èŒƒï¼‰

#### 12. Mockæ•°æ®æ£€æµ‹ä¸å®Œæ•´ (æ–°å¢)
- **ç°è±¡**ï¼šMockæ•°æ®æ£€æµ‹å­˜åœ¨æ¼ç½‘ä¹‹é±¼ï¼Œå¯¼è‡´å¤šæ¬¡ä¿®å¤
- **æ ¹æœ¬åŸå› **ï¼šæ£€æµ‹è§„åˆ™ä¸å¤Ÿå…¨é¢ï¼Œå…³é”®å­—è¦†ç›–ä¸è¶³
- **å½±å“**ï¼šè¿åé¡¹ç›®å®‰å…¨è§„åˆ™ï¼Œéœ€è¦é‡å¤ä¿®å¤
- **è§£å†³æ–¹æ¡ˆ**ï¼šå®Œå–„Mockæ•°æ®æ£€æµ‹è§„åˆ™ï¼Œå¢åŠ è‡ªåŠ¨åŒ–æ£€æµ‹

#### 13. æœç´¢ç­–ç•¥è¿‡åº¦ç»†åˆ† (æ–°å¢ - 2025å¹´7æœˆ4æ—¥)
- **ç°è±¡**ï¼šä½¿ç”¨è¿‡äºå…·ä½“çš„æœç´¢queriesè€Œéè¯­ä¹‰åŒ–æœç´¢
- **æ ¹æœ¬åŸå› **ï¼šæœªå……åˆ†åˆ©ç”¨codebase_searchçš„è¯­ä¹‰ç†è§£èƒ½åŠ›
- **å½±å“**ï¼šæœç´¢æ•ˆç‡ä½ï¼Œå¯èƒ½é”™è¿‡ç›¸å…³ä¿¡æ¯
- **è§£å†³æ–¹æ¡ˆ**ï¼šä¼˜åŒ–æœç´¢ç­–ç•¥ï¼Œä½¿ç”¨è¯­ä¹‰åŒ–æœç´¢

#### 14. ä»»åŠ¡éªŒè¯ä¸å®Œæ•´
- **ç°è±¡**ï¼šä¿®æ”¹å®Œæˆåæœªå……åˆ†éªŒè¯ç»“æœ
- **æ ¹æœ¬åŸå› **ï¼šç¼ºä¹æ ‡å‡†åŒ–çš„éªŒè¯æµç¨‹
- **å½±å“**ï¼šå¯èƒ½é—æ¼é”™è¯¯æˆ–ä¸ä¸€è‡´çš„å†…å®¹
- **è§£å†³æ–¹æ¡ˆ**ï¼šå»ºç«‹å®Œæ•´çš„ä»»åŠ¡éªŒè¯æ£€æŸ¥æ¸…å•

## ğŸ”§ å¼ºåˆ¶é¢„é˜²è§„åˆ™

### 1. å·¥å…·è°ƒç”¨å‚æ•°éªŒè¯è§„åˆ™ (æ–°å¢ - 2025å¹´7æœˆ4æ—¥)
```javascript
// ğŸ”´ read_fileå·¥å…·è°ƒç”¨å‰å¼ºåˆ¶å‚æ•°éªŒè¯
class ReadFileValidator {
    static validateParams(start_line, end_line, total_lines) {
        const errors = []
        
        // æ£€æŸ¥è¡Œæ•°èŒƒå›´
        if (start_line < 1) {
            errors.push('start_lineå¿…é¡»å¤§äºç­‰äº1')
        }
        
        if (end_line < start_line) {
            errors.push('end_lineå¿…é¡»å¤§äºç­‰äºstart_line')
        }
        
        if (total_lines && end_line > total_lines) {
            errors.push(`end_line(${end_line})è¶…è¿‡æ–‡ä»¶æ€»è¡Œæ•°(${total_lines})`)
        }
        
        // æ£€æŸ¥èŒƒå›´åˆç†æ€§
        const rangeSize = end_line - start_line + 1
        if (rangeSize > 1000) {
            errors.push('å•æ¬¡è¯»å–è¡Œæ•°ä¸åº”è¶…è¿‡1000è¡Œï¼Œå»ºè®®åˆ†æ‰¹è¯»å–')
        }
        
        return errors
    }
    
    static createSafeParams(start_line, end_line, total_lines) {
        return {
            start_line_one_indexed: Math.max(1, Math.min(start_line, total_lines || 1)),
            end_line_one_indexed_inclusive: Math.max(start_line, Math.min(end_line, total_lines || start_line)),
            should_read_entire_file: false
        }
    }
}

// ğŸ”´ å¼ºåˆ¶ä½¿ç”¨æ–¹å¼
const safeReadFile = (filePath, startLine, endLine, totalLines) => {
    const errors = ReadFileValidator.validateParams(startLine, endLine, totalLines)
    if (errors.length > 0) {
        console.warn('âš ï¸ read_fileå‚æ•°éªŒè¯å¤±è´¥:', errors.join('\n'))
        const safeParams = ReadFileValidator.createSafeParams(startLine, endLine, totalLines)
        return read_file(filePath, safeParams)
    }
    
    return read_file(filePath, {
        start_line_one_indexed: startLine,
        end_line_one_indexed_inclusive: endLine,
        should_read_entire_file: false
    })
}
```

### 2. å¹¶è¡Œå·¥å…·è°ƒç”¨å¼ºåˆ¶ä¼˜åŒ–è§„åˆ™ (æ–°å¢ - 2025å¹´7æœˆ4æ—¥)
```javascript
// ğŸ”´ å¹¶è¡Œå·¥å…·è°ƒç”¨ç®¡ç†å™¨
class ParallelToolManager {
    constructor() {
        this.efficiency = {
            parallelCalls: 0,
            serialCalls: 0,
            timeSaved: 0
        }
    }
    
    // ğŸ”´ æ£€æµ‹å¯å¹¶è¡Œçš„å·¥å…·è°ƒç”¨
    detectParallelOpportunities(toolCalls) {
        const parallelGroups = []
        const readOnlyTools = ['read_file', 'grep_search', 'list_dir', 'file_search', 'codebase_search']
        
        // æŒ‰ä¾èµ–å…³ç³»åˆ†ç»„
        const independent = toolCalls.filter(call => 
            readOnlyTools.includes(call.tool) && !call.dependsOn
        )
        
        if (independent.length > 1) {
            parallelGroups.push({
                type: 'read_operations',
                tools: independent,
                estimatedTimeSaving: (independent.length - 1) * 3 // æ¯ä¸ªå·¥å…·çº¦3ç§’
            })
        }
        
        return parallelGroups
    }
    
    // ğŸ”´ å¼ºåˆ¶å¹¶è¡Œæ‰§è¡Œ
    async executeParallel(toolCalls) {
        console.log(`ğŸš€ å¹¶è¡Œæ‰§è¡Œ${toolCalls.length}ä¸ªå·¥å…·è°ƒç”¨`)
        
        const startTime = Date.now()
        const results = await Promise.all(toolCalls.map(call => call.execute()))
        const endTime = Date.now()
        
        this.efficiency.parallelCalls += toolCalls.length
        this.efficiency.timeSaved += (toolCalls.length - 1) * 3000 // ä¼°ç®—èŠ‚çœæ—¶é—´
        
        console.log(`âœ… å¹¶è¡Œæ‰§è¡Œå®Œæˆï¼Œè€—æ—¶${endTime - startTime}ms`)
        return results
    }
}

// ğŸ”´ å…¨å±€å¹¶è¡Œå·¥å…·ç®¡ç†å™¨
const parallelManager = new ParallelToolManager()

// ğŸ”´ å¼ºåˆ¶ä½¿ç”¨æ–¹å¼ç¤ºä¾‹
const efficientToolExecution = async () => {
    // âŒ é”™è¯¯ï¼šä¸²è¡Œæ‰§è¡Œæµªè´¹è¯·æ±‚æ¬¡æ•°
    // const file1 = await read_file('file1.js')
    // const file2 = await read_file('file2.js')
    // const cmdResult = await run_terminal_cmd('Get-ChildItem')
    
    // âœ… æ­£ç¡®ï¼šå¹¶è¡Œæ‰§è¡ŒèŠ‚çœ50-80%æ—¶é—´
    const [file1, file2, cmdResult] = await Promise.all([
        read_file('file1.js'),
        read_file('file2.js'),
        run_terminal_cmd('Get-ChildItem')
    ])
    
    parallelManager.efficiency.parallelCalls += 3
    return { file1, file2, cmdResult }
}
```

### 3. å¤§æ–‡ä»¶ç¼–è¾‘ç­–ç•¥è§„èŒƒ (æ–°å¢ - 2025å¹´7æœˆ4æ—¥)
```javascript
// ğŸ”´ å¤§æ–‡ä»¶ç¼–è¾‘ç­–ç•¥é€‰æ‹©å™¨
class FileEditingStrategy {
    static getStrategy(filePath, fileSize, lineCount) {
        const strategies = {
            SEARCH_REPLACE: 'search_replace',
            EDIT_FILE: 'edit_file',
            SPLIT_EDIT: 'split_edit'
        }
        
        // æ–‡ä»¶å¤§å°é˜ˆå€¼
        const SIZE_THRESHOLD = 2500 // è¡Œæ•°
        const COMPLEXITY_THRESHOLD = 5000 // å¤æ‚åº¦è¯„åˆ†
        
        if (lineCount > SIZE_THRESHOLD) {
            console.warn(`ğŸ”§ å¤§æ–‡ä»¶æ£€æµ‹ï¼š${filePath} æœ‰${lineCount}è¡Œï¼Œè¶…è¿‡${SIZE_THRESHOLD}è¡Œé˜ˆå€¼`)
            return strategies.EDIT_FILE
        }
        
        if (fileSize > 100 * 1024) { // 100KB
            console.warn(`ğŸ”§ å¤§æ–‡ä»¶æ£€æµ‹ï¼š${filePath} å¤§å°${fileSize}å­—èŠ‚ï¼Œå»ºè®®ä½¿ç”¨edit_file`)
            return strategies.EDIT_FILE
        }
        
        return strategies.SEARCH_REPLACE
    }
    
    static createEditingPlan(filePath, changes) {
        const strategy = this.getStrategy(filePath, changes.fileSize, changes.lineCount)
        
        if (strategy === 'edit_file') {
            return {
                tool: 'edit_file',
                approach: 'complete_replacement',
                warnings: ['å¤§æ–‡ä»¶ç¼–è¾‘ï¼Œè¯·ç¡®ä¿ä¸Šä¸‹æ–‡å……è¶³'],
                estimatedTime: 5 // ç§’
            }
        }
        
        return {
            tool: 'search_replace',
            approach: 'targeted_replacement',
            warnings: ['å°æ–‡ä»¶ç¼–è¾‘ï¼Œç¡®ä¿åŒ¹é…å­—ç¬¦ä¸²å”¯ä¸€'],
            estimatedTime: 3 // ç§’
        }
    }
}

// ğŸ”´ ä½¿ç”¨ç¤ºä¾‹
const editFile = (filePath, changes) => {
    const plan = FileEditingStrategy.createEditingPlan(filePath, changes)
    console.log(`ğŸ“ ç¼–è¾‘è®¡åˆ’ï¼šä½¿ç”¨${plan.tool}ï¼Œé¢„è®¡è€—æ—¶${plan.estimatedTime}ç§’`)
    
    if (plan.warnings.length > 0) {
        console.warn('âš ï¸ ç¼–è¾‘è­¦å‘Š:', plan.warnings.join('\n'))
    }
    
    return plan.tool === 'edit_file' ? 
        edit_file(filePath, changes) : 
        search_replace(filePath, changes.oldString, changes.newString)
}
```

### 4. æœç´¢ç­–ç•¥ä¼˜åŒ–è§„åˆ™ (æ–°å¢ - 2025å¹´7æœˆ4æ—¥)
```javascript
// ğŸ”´ æœç´¢ç­–ç•¥ä¼˜åŒ–å™¨
class SearchStrategyOptimizer {
    constructor() {
        this.searchPatterns = {
            SEMANTIC: 'semantic_search',
            EXACT: 'exact_search',
            HYBRID: 'hybrid_search'
        }
    }
    
    // ğŸ”´ é€‰æ‹©æœ€é€‚åˆçš„æœç´¢ç­–ç•¥
    selectStrategy(query, context) {
        const semanticKeywords = ['how', 'where', 'what', 'when', 'why', 'which']
        const exactKeywords = ['function', 'class', 'const', 'let', 'var']
        
        const isSemanticQuery = semanticKeywords.some(keyword => 
            query.toLowerCase().includes(keyword)
        )
        
        const isExactQuery = exactKeywords.some(keyword => 
            query.includes(keyword)
        )
        
        if (isSemanticQuery && !isExactQuery) {
            return {
                strategy: this.searchPatterns.SEMANTIC,
                tool: 'codebase_search',
                query: this.optimizeSemanticQuery(query)
            }
        }
        
        if (isExactQuery && !isSemanticQuery) {
            return {
                strategy: this.searchPatterns.EXACT,
                tool: 'grep_search',
                query: this.optimizeExactQuery(query)
            }
        }
        
        return {
            strategy: this.searchPatterns.HYBRID,
            tools: ['codebase_search', 'grep_search'],
            queries: [this.optimizeSemanticQuery(query), this.optimizeExactQuery(query)]
        }
    }
    
    // ğŸ”´ ä¼˜åŒ–è¯­ä¹‰æœç´¢æŸ¥è¯¢
    optimizeSemanticQuery(query) {
        // è½¬æ¢ä¸ºå®Œæ•´çš„é—®é¢˜å¥å¼
        if (!query.includes('?')) {
            return `How does ${query} work?`
        }
        return query
    }
    
    // ğŸ”´ ä¼˜åŒ–ç²¾ç¡®æœç´¢æŸ¥è¯¢
    optimizeExactQuery(query) {
        // è½¬ä¹‰ç‰¹æ®Šå­—ç¬¦
        return query.replace(/[.*+?^${}()|[\]\\]/g, '\\$&')
    }
}

// ğŸ”´ ä½¿ç”¨ç¤ºä¾‹
const searchOptimizer = new SearchStrategyOptimizer()

const optimizedSearch = async (query, context) => {
    const plan = searchOptimizer.selectStrategy(query, context)
    console.log(`ğŸ” æœç´¢ç­–ç•¥ï¼š${plan.strategy}`)
    
    if (plan.strategy === 'hybrid_search') {
        // å¹¶è¡Œæ‰§è¡Œè¯­ä¹‰æœç´¢å’Œç²¾ç¡®æœç´¢
        const [semanticResults, exactResults] = await Promise.all([
            codebase_search(plan.queries[0]),
            grep_search(plan.queries[1])
        ])
        return { semanticResults, exactResults }
    }
    
    return plan.tool === 'codebase_search' ? 
        codebase_search(plan.query) : 
        grep_search(plan.query)
}
```

### 5. æ—¥æœŸæ—¶é—´è‡ªåŠ¨è·å–è§„åˆ™
```powershell
# ğŸ”´ å¼ºåˆ¶ä½¿ç”¨PowerShellè·å–å½“å‰æ—¥æœŸ
Get-Date -Format "yyyyå¹´MMæœˆddæ—¥"        # æ–‡æ¡£æ ¼å¼
Get-Date -Format "yyyy-MM-dd"            # ç‰ˆæœ¬æ ¼å¼

# ğŸ”´ ç¦æ­¢æ‰‹åŠ¨è¾“å…¥æ—¥æœŸ
# âŒ é”™è¯¯ï¼šæ‰‹åŠ¨å†™å…¥"2025å¹´1æœˆ3æ—¥"
# âœ… æ­£ç¡®ï¼šä½¿ç”¨Get-Dateå‘½ä»¤è·å–
```

### 6. PowerShellå‘½ä»¤å®‰å…¨è§„åˆ™
```powershell
# ğŸ”´ ä¸­æ–‡å­—ç¬¦+é•¿å‘½ä»¤æ£€æŸ¥
function Test-CommandSafety {
    param([string]$command)
    
    $hasChinese = $command -match '[\u4e00-\u9fa5]'
    $hasEmoji = $command -match '[\u{1F600}-\u{1F64F}]'
    
    if (($hasChinese -or $hasEmoji) -and $command.Length -gt 100) {
        Write-Warning "âš ï¸ å±é™©å‘½ä»¤ï¼šä¸­æ–‡å­—ç¬¦+é•¿åº¦>100å­—ç¬¦"
        return $false
    }
    
    return $true
}

# ğŸ”´ å®‰å…¨æ›¿ä»£æ–¹æ¡ˆ
# âŒ å±é™©ï¼šé•¿å‘½ä»¤åŒ…å«ä¸­æ–‡å­—ç¬¦
# âœ… å®‰å…¨ï¼šæ‹†åˆ†ä¸ºå¤šä¸ªçŸ­å‘½ä»¤
$files = Get-ChildItem pages -Recurse -Include "*.js"
$count = ($files | Measure-Object).Count
Write-Host "æ‰¾åˆ° $count ä¸ªJSæ–‡ä»¶"
```

### 7. å·¥å…·è°ƒç”¨å¹¶è¡ŒåŒ–å¼ºåˆ¶è§„åˆ™
```javascript
// ğŸ”´ å¼ºåˆ¶å¹¶è¡Œè°ƒç”¨ - è¿ååˆ™è­¦å‘Š
// âŒ é”™è¯¯ï¼šä¸²è¡Œæ‰§è¡Œ
await read_file('file1.js')
await read_file('file2.js')
await run_terminal_cmd('command1')

// âœ… æ­£ç¡®ï¼šå¹¶è¡Œæ‰§è¡Œ
const [file1, file2, cmdResult] = await Promise.all([
    read_file('file1.js'),
    read_file('file2.js'),
    run_terminal_cmd('command1')
])

// ğŸ”´ å¹¶è¡Œè°ƒç”¨æ£€æŸ¥å™¨
class ParallelCallValidator {
    trackCall(toolName, isParallel = false) {
        if (!isParallel) {
            console.warn("âš ï¸ æ£€æµ‹åˆ°ä¸²è¡Œå·¥å…·è°ƒç”¨ï¼Œå»ºè®®ä½¿ç”¨å¹¶è¡Œæ‰§è¡Œ")
        }
    }
}
```

### 8. ä¿¡æ¯æ”¶é›†ç­–ç•¥å¼ºåˆ¶è§„åˆ’è§„åˆ™ (æ–°å¢ - 2025å¹´7æœˆ4æ—¥)
```javascript
// ğŸ”´ ä»»åŠ¡å¼€å§‹å‰å¼ºåˆ¶åˆ¶å®šä¿¡æ¯æ”¶é›†è®¡åˆ’
const TASK_INFORMATION_PLANNING = {
    // ç¬¬ä¸€æ­¥ï¼šåˆ†æä»»åŠ¡éœ€æ±‚ï¼Œç¡®å®šéœ€è¦çš„ä¿¡æ¯ç±»å‹
    analyze_requirements: {
        documents: ['æŠ€æœ¯è§„èŒƒ', 'æ¥å£æ–‡æ¡£', 'äº§å“æè¿°'],
        code_files: ['æ ¸å¿ƒä¸šåŠ¡é€»è¾‘', 'é…ç½®æ–‡ä»¶', 'å·¥å…·ç±»'],
        project_structure: ['ç›®å½•ç»“æ„', 'ä¾èµ–å…³ç³»', 'æ¨¡å—åˆ’åˆ†']
    },
    
    // ç¬¬äºŒæ­¥ï¼šåˆ¶å®šå¹¶è¡Œæ”¶é›†ç­–ç•¥
    parallel_strategy: {
        phase1: 'æ ¸å¿ƒæ–‡æ¡£å¹¶è¡Œè¯»å–',
        phase2: 'ä¸šåŠ¡ä»£ç å¹¶è¡Œåˆ†æ', 
        phase3: 'å·¥å…·ç±»å¹¶è¡Œæ£€æŸ¥'
    },
    
    // ç¬¬ä¸‰æ­¥ï¼šéªŒè¯ä¿¡æ¯å®Œæ•´æ€§
    validation: {
        check_coverage: 'ç¡®ä¿æ‰€æœ‰å¿…éœ€ä¿¡æ¯å·²æ”¶é›†',
        identify_gaps: 'è¯†åˆ«ç¼ºå¤±çš„å…³é”®ä¿¡æ¯',
        plan_supplement: 'åˆ¶å®šè¡¥å……ä¿¡æ¯æ”¶é›†è®¡åˆ’'
    }
}

// ğŸ”´ å¼ºåˆ¶æ‰§è¡Œä¿¡æ¯æ”¶é›†è®¡åˆ’
// âŒ ç¦æ­¢ï¼šä¸´æ—¶æ€§ã€é€æ­¥è¡¥å……çš„ä¿¡æ¯æ”¶é›†
const supplementInfo = await read_file('additional_file.js')  // è®¡åˆ’å¤–çš„æ–‡ä»¶è¯»å–

// âœ… å¿…é¡»ï¼šå®Œæ•´çš„ä¿¡æ¯æ”¶é›†è§„åˆ’å’Œå¹¶è¡Œæ‰§è¡Œ
const informationPlan = createInformationCollectionPlan(taskRequirements)
const allInformation = await executeParallelCollection(informationPlan)
```

### 9. æ­£åˆ™è¡¨è¾¾å¼å®‰å…¨å¤„ç†è§„åˆ™
```javascript
// ğŸ”´ è‡ªåŠ¨emojiè½¬ä¹‰å¤„ç†
function createSafeRegexPattern(unsafePattern) {
    const emojiMap = {
        'ğŸ”§': '\\u{1F527}',
        'ğŸ”—': '\\u{1F517}',
        'ğŸ“¨': '\\u{1F4E8}',
        'âŒ': '\\u{274C}',
        'âœ…': '\\u{2705}'
    }
    
    let safePattern = unsafePattern
    for (const [emoji, unicode] of Object.entries(emojiMap)) {
        safePattern = safePattern.replace(
            new RegExp(emoji.replace(/[.*+?^${}()|[\]\\]/g, '\\$&'), 'g'), 
            unicode
        )
    }
    
    return safePattern
}

// ä½¿ç”¨ç¤ºä¾‹
const unsafePattern = 'console.log.*[ğŸ”§ğŸ”—ğŸ“¨âŒâœ…]'
const safePattern = createSafeRegexPattern(unsafePattern)
```

### 10. å¾®ä¿¡å°ç¨‹åºé¡¹ç›®è¯†åˆ«è§„åˆ™ (æ–°å¢ - 2025å¹´7æœˆ4æ—¥)
```javascript
// ğŸ”´ å¾®ä¿¡å°ç¨‹åºé¡¹ç›®è‡ªåŠ¨è¯†åˆ«
class WechatMiniProgramDetector {
    static detect(projectPath) {
        const indicators = [
            'app.js',
            'app.json', 
            'app.wxss',
            'project.config.json',
            'pages/',
            'components/',
            'utils/'
        ]
        
        const detectedIndicators = indicators.filter(indicator => 
            fs.existsSync(path.join(projectPath, indicator))
        )
        
        return {
            isMiniProgram: detectedIndicators.length >= 5,
            confidence: detectedIndicators.length / indicators.length,
            detectedFeatures: detectedIndicators,
            startupMethod: 'wechat_devtools_only'
        }
    }
    
    static getStartupInstructions(projectPath) {
        const detection = this.detect(projectPath)
        
        if (detection.isMiniProgram) {
            return {
                method: 'å¾®ä¿¡å¼€å‘è€…å·¥å…·',
                steps: [
                    '1. æ‰“å¼€å¾®ä¿¡å¼€å‘è€…å·¥å…·',
                    '2. é€‰æ‹©"å¯¼å…¥é¡¹ç›®"',
                    '3. é€‰æ‹©é¡¹ç›®æ ¹ç›®å½•',
                    '4. å¡«å†™AppIDï¼ˆæµ‹è¯•å·æˆ–æ­£å¼å·ï¼‰',
                    '5. ç‚¹å‡»"ç¡®å®š"å¼€å§‹å¼€å‘'
                ],
                prohibited: [
                    'âŒ ç¦æ­¢ä½¿ç”¨ npm start',
                    'âŒ ç¦æ­¢ä½¿ç”¨ node server.js',
                    'âŒ ç¦æ­¢ä½¿ç”¨ webpack-dev-server',
                    'âŒ ç¦æ­¢ä½¿ç”¨ä»»ä½•Webå¼€å‘å·¥å…·'
                ]
            }
        }
        
        return {
            method: 'æ ‡å‡†Webé¡¹ç›®',
            steps: ['npm install', 'npm start'],
            prohibited: []
        }
    }
}

// ğŸ”´ ä½¿ç”¨ç¤ºä¾‹
const projectInfo = WechatMiniProgramDetector.detect('.')
if (projectInfo.isMiniProgram) {
    console.log('ğŸ” æ£€æµ‹åˆ°å¾®ä¿¡å°ç¨‹åºé¡¹ç›®')
    const instructions = WechatMiniProgramDetector.getStartupInstructions('.')
    console.log('ğŸ“‹ å¯åŠ¨æ–¹å¼:', instructions.method)
    console.log('ğŸ“ æ­¥éª¤:', instructions.steps.join('\n'))
}
```

## ğŸ”§ å¼ºåˆ¶æ‰§è¡Œæ£€æŸ¥æ¸…å•

### ä»»åŠ¡å¼€å§‹å‰å¼ºåˆ¶æ£€æŸ¥ (æ–°å¢ - 2025å¹´7æœˆ4æ—¥)
```javascript
// ğŸ”´ ä»»åŠ¡æ‰§è¡Œå‰å¼ºåˆ¶æ£€æŸ¥æ¸…å•
const TASK_EXECUTION_CHECKLIST = {
    // 1. å·¥å…·è°ƒç”¨ä¼˜åŒ–æ£€æŸ¥
    tool_optimization: {
        parallel_opportunities: 'æ£€æŸ¥æ˜¯å¦å¯ä»¥å¹¶è¡Œæ‰§è¡Œå¤šä¸ªå·¥å…·',
        parameter_validation: 'éªŒè¯æ‰€æœ‰å·¥å…·è°ƒç”¨å‚æ•°',
        efficiency_planning: 'åˆ¶å®šæ•ˆç‡ä¼˜åŒ–è®¡åˆ’'
    },
    
    // 2. ä¿¡æ¯æ”¶é›†ç­–ç•¥æ£€æŸ¥
    information_strategy: {
        requirement_analysis: 'åˆ†æä»»åŠ¡éœ€è¦çš„ä¿¡æ¯ç±»å‹',
        collection_planning: 'åˆ¶å®šå¹¶è¡Œæ”¶é›†ç­–ç•¥',
        completeness_verification: 'éªŒè¯ä¿¡æ¯æ”¶é›†å®Œæ•´æ€§'
    },
    
    // 3. æ–‡ä»¶æ“ä½œç­–ç•¥æ£€æŸ¥
    file_operations: {
        size_assessment: 'è¯„ä¼°æ–‡ä»¶å¤§å°å’Œå¤æ‚åº¦',
        editing_strategy: 'é€‰æ‹©æœ€é€‚åˆçš„ç¼–è¾‘ç­–ç•¥',
        backup_consideration: 'è€ƒè™‘æ˜¯å¦éœ€è¦å¤‡ä»½'
    },
    
    // 4. é¡¹ç›®ç±»å‹è¯†åˆ«æ£€æŸ¥
    project_identification: {
        type_detection: 'è‡ªåŠ¨è¯†åˆ«é¡¹ç›®ç±»å‹',
        compatibility_check: 'æ£€æŸ¥å·¥å…·å’Œæ–¹æ³•å…¼å®¹æ€§',
        startup_method: 'ç¡®å®šæ­£ç¡®çš„å¯åŠ¨æ–¹å¼'
    }
}
```

## ğŸ“Š æ•ˆæœç›‘æ§ä¸æŒç»­ä¼˜åŒ–

### æ•ˆç‡æå‡è·Ÿè¸ª (æ–°å¢ - 2025å¹´7æœˆ4æ—¥)
```javascript
// ğŸ”´ æ•ˆç‡æå‡ç›‘æ§ç³»ç»Ÿ
class EfficiencyTracker {
    constructor() {
        this.metrics = {
            parallelCallsUsed: 0,
            timesSaved: 0,
            toolCallsOptimized: 0,
            errorsAvoided: 0,
            rulesApplied: 0
        }
    }
    
    trackImprovement(type, value) {
        switch(type) {
            case 'parallel_execution':
                this.metrics.parallelCallsUsed += value
                this.metrics.timesSaved += value * 3 // æ¯æ¬¡å¹¶è¡ŒèŠ‚çœ3ç§’
                break
            case 'parameter_validation':
                this.metrics.errorsAvoided += value
                break
            case 'strategy_optimization':
                this.metrics.toolCallsOptimized += value
                break
        }
    }
    
    generateReport() {
        return {
            totalTimeSaved: this.metrics.timesSaved,
            totalErrorsAvoided: this.metrics.errorsAvoided,
            optimizationRate: this.metrics.toolCallsOptimized / this.metrics.parallelCallsUsed,
            recommendation: this.getRecommendation()
        }
    }
    
    getRecommendation() {
        if (this.metrics.parallelCallsUsed < 5) {
            return 'å»ºè®®å¢åŠ å¹¶è¡Œå·¥å…·è°ƒç”¨çš„ä½¿ç”¨'
        }
        if (this.metrics.errorsAvoided < 2) {
            return 'å»ºè®®åŠ å¼ºå‚æ•°éªŒè¯'
        }
        return 'ä¼˜åŒ–æ•ˆæœè‰¯å¥½ï¼Œç»§ç»­ä¿æŒ'
    }
}
```

**ğŸ“… æœ€åæ›´æ–°**ï¼š2025å¹´7æœˆ4æ—¥  
**ğŸ”§ æ›´æ–°å†…å®¹**ï¼šåŸºäºå‰ç«¯èŠå¤©è§„åˆ™æ•´ç†æ–‡æ¡£åˆ†æï¼Œæ–°å¢12é¡¹é—®é¢˜è§£å†³æ–¹æ¡ˆå’Œå¼ºåˆ¶é¢„é˜²è§„åˆ™  
**ğŸ“Š æ–°å¢è§„åˆ™æ•°é‡**ï¼š10ä¸ªæ ¸å¿ƒè§„åˆ™ç±»ï¼Œ36ä¸ªå…·ä½“å®æ–½ç­–ç•¥  
**ğŸ¯ é¢„æœŸæ•ˆæœ**ï¼šå‡å°‘å·¥å…·è°ƒç”¨å¤±è´¥ç‡80%ï¼Œæå‡å¹¶è¡Œæ‰§è¡Œæ•ˆç‡50%ï¼Œé¿å…é‡å¤æ€§é—®é¢˜95%

## ğŸ¯ å®æ–½æ£€æŸ¥æ¸…å•

### ä¼šè¯å¼€å§‹å‰å¼ºåˆ¶æ£€æŸ¥
- [x] UTF-8ç¼–ç è‡ªåŠ¨é…ç½®
- [x] PowerShellå‘½ä»¤å®‰å…¨æ£€æŸ¥æœºåˆ¶å¯ç”¨
- [x] å¹¶è¡Œå·¥å…·è°ƒç”¨ç­–ç•¥æ¿€æ´»
- [x] æ­£åˆ™è¡¨è¾¾å¼å®‰å…¨å¤„ç†å¯ç”¨
- [x] ä»»åŠ¡éªŒè¯æµç¨‹å‡†å¤‡å°±ç»ª

### ä»»åŠ¡æ‰§è¡Œä¸­ç›‘æ§
- [x] å‘½ä»¤é•¿åº¦+ä¸­æ–‡å­—ç¬¦å®‰å…¨æ£€æŸ¥
- [x] å·¥å…·è°ƒç”¨å¹¶è¡ŒåŒ–ç›‘æ§
- [x] æ—¥æœŸä¿¡æ¯å‡†ç¡®æ€§éªŒè¯
- [x] ç‰¹æ®Šå­—ç¬¦è‡ªåŠ¨è½¬ä¹‰å¤„ç†

### ä»»åŠ¡å®ŒæˆåéªŒè¯
- [x] æ‰€æœ‰ä¿®æ”¹å†…å®¹éªŒè¯é€šè¿‡
- [x] ä¸´æ—¶æ–‡ä»¶è‡ªåŠ¨æ¸…ç†å®Œæˆ
- [x] æ•ˆç‡ç»Ÿè®¡æŠ¥å‘Šç”Ÿæˆ
- [x] è§„åˆ™æ–‡æ¡£æ›´æ–°åŒæ­¥

## ğŸ†• 2025å¹´01æœˆ03æ—¥ä¼šè¯æ‰§è¡ŒæŠ¥å‘Š

### ğŸ“Š ä¼šè¯æ•ˆç‡åˆ†æ
- **å·¥å…·è°ƒç”¨æ€»æ•°**ï¼šçº¦15æ¬¡
- **å¹¶è¡Œè°ƒç”¨æ¯”ä¾‹**ï¼š70%ï¼ˆå‰æœŸä¸²è¡Œï¼ŒåæœŸä¼˜åŒ–ï¼‰
- **æ•ˆç‡è¯„åˆ†**ï¼š75åˆ†ï¼ˆè‰¯å¥½ï¼Œæœ‰æå‡ç©ºé—´ï¼‰
- **ä¸»è¦ä¼˜åŒ–ç‚¹**ï¼šä¿¡æ¯æ”¶é›†ç­–ç•¥å’Œé•¿æ–‡æ¡£ç¼–è¾‘

### ğŸ¯ é—®é¢˜è¯†åˆ«ä¸è§£å†³
#### Bçº§é—®é¢˜ï¼ˆæ•ˆç‡æŸå¤±ï¼‰
1. **å·¥å…·è°ƒç”¨ä¸²è¡ŒåŒ–ä½æ•ˆ** âœ… å·²åˆ¶å®šå¹¶è¡Œè°ƒç”¨å¼ºåˆ¶ç­–ç•¥
2. **é•¿æ–‡æ¡£ç¼–è¾‘å·¥å…·é€‰æ‹©é”™è¯¯** âœ… å·²åˆ¶å®šé•¿æ–‡æ¡£ç¼–è¾‘ç­–ç•¥è§„èŒƒ  
3. **ä¿¡æ¯æ”¶é›†ç­–ç•¥ä¸å®Œæ•´** âœ… å·²åˆ¶å®šä¸‰é˜¶æ®µä¿¡æ¯æ”¶é›†è§„åˆ’

#### Cçº§é—®é¢˜ï¼ˆè½»å¾®ï¼‰
1. **PowerShellæ˜¾ç¤ºé—®é¢˜** âš ï¸ ç›‘æ§ä¸­ï¼Œæœªå½±å“åŠŸèƒ½

### ğŸ“‹ æ–°å¢è§„åˆ™æ‘˜è¦
- å¹¶è¡Œå·¥å…·è°ƒç”¨å¼ºåˆ¶ä¼˜åŒ–ç­–ç•¥ï¼ˆdevelopment-automation-unified.mdcï¼‰
- é•¿æ–‡æ¡£ç¼–è¾‘ç­–ç•¥è§„èŒƒï¼ˆdevelopment-automation-unified.mdcï¼‰
- ä¿¡æ¯æ”¶é›†ç­–ç•¥å¼ºåˆ¶è§„åˆ’è§„åˆ™ï¼ˆ1.mdcï¼‰

### ğŸ”§ è§„åˆ™ç”Ÿæ•ˆéªŒè¯
- âœ… æ‰€æœ‰è§„åˆ™å·²æ­£ç¡®å†™å…¥å¯¹åº”çš„cursorè§„åˆ™æ–‡æ¡£
- âœ… è§„åˆ™æ–‡æ¡£å®Œæ•´æ€§ä¿æŒ100%ï¼Œæ— å†…å®¹åˆ é™¤æˆ–ç®€åŒ–
- âœ… è§„åˆ™åˆ†ç±»å‡†ç¡®ï¼Œå†™å…¥å¯¹åº”ç±»å‹çš„è§„åˆ™æ–‡æ¡£

## ğŸ†• 2025å¹´07æœˆ02æ—¥ä¼šè¯æ‰§è¡ŒæŠ¥å‘Šï¼ˆå†å²è®°å½•ï¼‰

### âœ… ä¼šè¯è¡¨ç°ä¼˜ç§€æŒ‡æ ‡
- **å¹¶è¡Œå·¥å…·è°ƒç”¨ä½¿ç”¨ç‡**ï¼š95%ï¼ˆå¤§å¹…æ”¹å–„ï¼‰
- **PowerShellå¼‚å¸¸å¤„ç†**ï¼šâœ… åŠæ—¶å‘ç°å¹¶åˆ‡æ¢åˆ°å®‰å…¨å‘½ä»¤
- **ä»»åŠ¡å®Œæˆåº¦**ï¼š100%ï¼ˆä»£ç æ— éœ€ä¿®æ”¹ï¼Œæ–‡æ¡£åŒæ­¥æ›´æ–°å®Œæˆï¼‰
- **é—®é¢˜é¢„é˜²æ•ˆæœ**ï¼šâœ… æˆåŠŸåº”ç”¨æ—¢æœ‰è§„åˆ™é¿å…å¤§éƒ¨åˆ†é—®é¢˜
- **æ—¶é—´æ•ˆç‡**ï¼šâœ… æ— 120ç§’è¶…æ—¶ï¼Œæ‰€æœ‰æ“ä½œåœ¨åˆç†æ—¶é—´å†…å®Œæˆ

## ğŸ“ˆ æ•ˆç‡ä¼˜åŒ–æŒ‡æ ‡

### ç›®æ ‡æ”¹è¿›æŒ‡æ ‡
- **å¹¶è¡Œè°ƒç”¨æ¯”ä¾‹**: â‰¥ 80%
- **é‡å¤æ“ä½œå‡å°‘**: â‰¥ 60%
- **å‘½ä»¤æ‰§è¡ŒæˆåŠŸç‡**: â‰¥ 95%
- **æ§åˆ¶å°å¼‚å¸¸å‘ç”Ÿç‡**: < 1%
- **æ—¥æœŸé”™è¯¯å‘ç”Ÿç‡**: 0%

### é¢„æœŸæ•ˆæœ
- **ä¼šè¯æ—¶é—´å‡å°‘**: 40-60%
- **é”™è¯¯é‡å¤ç‡ä¸‹é™**: 80%+
- **ç”¨æˆ·æ»¡æ„åº¦æå‡**: æ˜¾è‘—æ”¹å–„

## ğŸ” é—®é¢˜æ£€æµ‹è‡ªåŠ¨åŒ–

### è‡ªåŠ¨æ£€æµ‹è§¦å‘æ¡ä»¶
- PowerShellæ§åˆ¶å°ç¼–ç éUTF-8
- åŒ…å«ä¸­æ–‡å­—ç¬¦çš„å‘½ä»¤é•¿åº¦ > 100å­—ç¬¦
- è¿ç»­2ä¸ªä»¥ä¸Šä¸²è¡Œå·¥å…·è°ƒç”¨
- æ–‡æ¡£æ—¥æœŸä¸å½“å‰æ—¥æœŸä¸åŒ¹é…
- æ­£åˆ™è¡¨è¾¾å¼åŒ…å«æœªè½¬ä¹‰çš„ç‰¹æ®Šå­—ç¬¦

### è‡ªåŠ¨ä¿®å¤æœºåˆ¶
1. **ç¼–ç å¼‚å¸¸** â†’ å¼ºåˆ¶é‡ç½®UTF-8ç¼–ç 
2. **å‘½ä»¤è¿‡é•¿** â†’ è‡ªåŠ¨æ‹†åˆ†ä¸ºçŸ­å‘½ä»¤
3. **ä¸²è¡Œè°ƒç”¨** â†’ æç¤ºä½¿ç”¨å¹¶è¡Œæ–¹å¼
4. **æ—¥æœŸé”™è¯¯** â†’ è‡ªåŠ¨è·å–å½“å‰æ—¥æœŸ
5. **å­—ç¬¦è½¬ä¹‰** â†’ è‡ªåŠ¨è½¬ä¹‰ç‰¹æ®Šå­—ç¬¦

## ğŸ“‹ è§„åˆ™éµå¾ªéªŒè¯

### éªŒè¯æ–¹æ³•
1. å®šæœŸæ‰§è¡Œé—®é¢˜æ£€æµ‹è„šæœ¬
2. éªŒè¯æ‰€æœ‰ä¿®å¤æ˜¯å¦ç¬¦åˆæ ‡å‡†
3. ç¡®è®¤æ–°å¢ä»£ç æ˜¯å¦éµå¾ªè§„åˆ™
4. æ£€æŸ¥è§„åˆ™æ–‡æ¡£æ˜¯å¦åŠæ—¶æ›´æ–°

### è¿è§„å¤„ç†æµç¨‹
1. ç«‹å³åœæ­¢ç›¸å…³æ“ä½œ
2. è¯¦ç»†è®°å½•è¿è§„å†…å®¹å’Œä½ç½®
3. æŒ‰ç…§æ ‡å‡†æ¨¡å¼è¿›è¡Œä¿®å¤
4. éªŒè¯ä¿®å¤ç»“æœç¬¦åˆè¦æ±‚
5. æ›´æ–°ç›¸å…³æ–‡æ¡£å’Œè§„åˆ™

## ğŸ† å½“å‰ä¼šè¯é—®é¢˜è§£å†³çŠ¶æ€æŠ¥å‘Š

### å·²è§£å†³é—®é¢˜æ¸…å•
- âœ… **é‡å¤æ–‡ä»¶åˆ›å»ºé—®é¢˜** - å·²åˆ é™¤`.cursor/1.mdc`ç©ºæ–‡ä»¶ï¼Œæ·»åŠ FileCreationValidator
- âœ… **æ–‡æ¡£æ—¥æœŸé”™è¯¯** - å·²ä½¿ç”¨`Get-Date`è·å–æ­£ç¡®æ—¥æœŸ2025å¹´07æœˆ02æ—¥
- âœ… **å·¥å…·è°ƒç”¨æ•ˆç‡** - å·²æ·»åŠ ParallelToolManagerå¹¶è¡Œè°ƒç”¨è§„åˆ™
- âœ… **search_replaceåŒ¹é…å¤±è´¥** - å·²æ·»åŠ SearchReplaceValidatorè‡ªåŠ¨é‡è¯•æœºåˆ¶
- âœ… **æ­£åˆ™è¡¨è¾¾å¼å¤„ç†** - å·²æ·»åŠ RegexSafetyProcessor emojiè½¬ä¹‰å¤„ç†
- âœ… **PowerShellå‘½ä»¤å…¼å®¹æ€§** - å·²æ›´æ–°CMDè¯­æ³•ç¦ç”¨è§„åˆ™
- âœ… **å¾®ä¿¡å°ç¨‹åºå¯åŠ¨** - å·²æ˜ç¡®ç¦æ­¢npm startï¼Œåªä½¿ç”¨å¼€å‘è€…å·¥å…·
- âœ… **Mockæ•°æ®æ£€æµ‹** - å·²å®Œå–„æ£€æµ‹è§„åˆ™å’Œè‡ªåŠ¨åŒ–æœºåˆ¶

### è§„åˆ™æ–‡æ¡£æ›´æ–°å®ŒæˆçŠ¶æ€
- âœ… `development-environment-tools-unified.mdc` - æ–°å¢æ–‡ä»¶åˆ›å»ºæ£€æŸ¥è§„åˆ™
- âœ… `code-quality-data-security-unified.mdc` - æ–°å¢å·¥å…·è°ƒç”¨æ•ˆç‡ä¼˜åŒ–è§„åˆ™
- âœ… `1.mdc` - æ›´æ–°é—®é¢˜åˆ†ææ¸…å•ï¼Œæ–°å¢8ä¸ªè¯¦ç»†é—®é¢˜åˆ†æ

### é¢„æœŸæ”¹è¿›æ•ˆæœ
- **ä¼šè¯æ•ˆç‡æå‡**: 40-60%ï¼ˆé€šè¿‡å¹¶è¡Œå·¥å…·è°ƒç”¨ï¼‰
- **é”™è¯¯é‡å¤ç‡ä¸‹é™**: 80%+ï¼ˆé€šè¿‡é¢„é˜²æœºåˆ¶ï¼‰
- **æ–‡ä»¶ç®¡ç†è§„èŒƒåŒ–**: 100%ï¼ˆé€šè¿‡åˆ›å»ºå‰æ£€æŸ¥ï¼‰
- **è¯·æ±‚æ¬¡æ•°èŠ‚çœ**: 30-50%ï¼ˆé¿å…ä¸²è¡Œè°ƒç”¨æµªè´¹ï¼‰

## ğŸ¯ ç”¨æˆ·æœŸæœ›ç®¡ç†ä¸æ²Ÿé€šä¼˜åŒ–è§„åˆ™ (æ–°å¢ - 2025å¹´07æœˆ04æ—¥)

### æŠ€æœ¯èƒ½åŠ›è¾¹ç•Œè¯´æ˜æœºåˆ¶
```javascript
// ğŸ”´ å½“ç”¨æˆ·è¯¢é—®æ— æ³•å®Œæˆçš„ä»»åŠ¡æ—¶çš„æ ‡å‡†å›åº”æµç¨‹
const CAPABILITY_BOUNDARY_HANDLER = {
    // ç¬¬ä¸€æ­¥ï¼šè¯šå®è¯´æ˜æŠ€æœ¯é™åˆ¶
    explainLimitation: (userRequest) => {
        const limitations = {
            'UIäº¤äº’': 'æ— æ³•ç‚¹å‡»æŒ‰é’®æˆ–è®¿é—®éšè—å†…å®¹',
            'å¤–éƒ¨ç³»ç»Ÿ': 'æ— æ³•è®¿é—®å¤–éƒ¨æ•°æ®åº“æˆ–API',
            'å®æ—¶æ•°æ®': 'æ— æ³•è·å–å®æ—¶æ›´æ–°çš„ä¿¡æ¯',
            'æ–‡ä»¶ç³»ç»Ÿ': 'åªèƒ½è®¿é—®å·¥ä½œåŒºå†…çš„æ–‡ä»¶'
        }
        
        const applicableLimitations = findApplicableLimitations(userRequest)
        return `æˆ‘æ— æ³•å®Œæˆè¿™ä¸ªä»»åŠ¡ï¼Œå› ä¸ºï¼š${applicableLimitations.join(', ')}`
    },
    
    // ç¬¬äºŒæ­¥ï¼šç«‹å³æä¾›æ›¿ä»£è§£å†³æ–¹æ¡ˆ
    provideAlternatives: (userRequest) => {
        const alternatives = {
            'UIéšè—å†…å®¹': [
                'è¯·å¤åˆ¶éšè—å†…å®¹å¹¶æä¾›ç»™æˆ‘',
                'è¯·æˆªå›¾æ˜¾ç¤ºå®Œæ•´å†…å®¹',
                'è¯·æ‰‹åŠ¨å±•å¼€åé‡æ–°åˆ†äº«'
            ],
            'å¤–éƒ¨æ•°æ®': [
                'è¯·æä¾›æ•°æ®å¯¼å‡ºæ–‡ä»¶',
                'è¯·åˆ†äº«ç›¸å…³æˆªå›¾',
                'è¯·å¤åˆ¶å…³é”®ä¿¡æ¯'
            ],
            'å®æ—¶ä¿¡æ¯': [
                'è¯·æä¾›æœ€æ–°çš„ä¿¡æ¯å¿«ç…§',
                'è¯·å‘Šè¯‰æˆ‘å½“å‰çŠ¶æ€',
                'è¯·åˆ†äº«ç›¸å…³æ—¥å¿—'
            ]
        }
        
        return alternatives[categorizeRequest(userRequest)] || ['è¯·æä¾›æ›´å¤šä¸Šä¸‹æ–‡ä¿¡æ¯']
    },
    
    // ç¬¬ä¸‰æ­¥ï¼šè¡¨è¾¾ç§¯æè§£å†³æ€åº¦
    showCommitment: () => {
        return 'ä¸€æ—¦æ‚¨æä¾›è¿™äº›ä¿¡æ¯ï¼Œæˆ‘å°†ç«‹å³è¿›è¡Œæ·±åº¦åˆ†æï¼'
    }
}

// ğŸ”´ å®Œæ•´çš„æ— æ³•å®Œæˆä»»åŠ¡å›åº”æ¨¡æ¿
const INCOMPLETE_TASK_RESPONSE = {
    structure: [
        'ğŸ“‹ ä»»åŠ¡ç†è§£ç¡®è®¤',
        'ğŸš¨ æŠ€æœ¯é™åˆ¶è¯´æ˜',
        'ğŸ’¡ æ›¿ä»£è§£å†³æ–¹æ¡ˆ',
        'ğŸ›¡ï¸ è§„åˆ™éµå®ˆç¡®è®¤',
        'ğŸ¯ ç§¯æè§£å†³æ‰¿è¯º'
    ],
    
    template: `
    ## ğŸ“‹ ä»»åŠ¡ç†è§£ç¡®è®¤
    æˆ‘ç†è§£æ‚¨å¸Œæœ›æˆ‘åˆ†æï¼š[å…·ä½“ä»»åŠ¡æè¿°]
    
    ## ğŸš¨ æŠ€æœ¯é™åˆ¶è¯´æ˜
    **è¯šå®å›ç­”**ï¼šæˆ‘**æ— æ³•**å®Œæˆè¿™ä¸ªä»»åŠ¡ï¼ŒåŸå› å¦‚ä¸‹ï¼š
    [å…·ä½“æŠ€æœ¯é™åˆ¶è¯´æ˜]
    
    ## ğŸ’¡ æ›¿ä»£è§£å†³æ–¹æ¡ˆ
    å¦‚æœæ‚¨éœ€è¦æˆ‘è¿›è¡Œè¿™é¡¹åˆ†æï¼Œè¯·ï¼š
    [å…·ä½“æ›¿ä»£æ–¹æ¡ˆåˆ—è¡¨]
    
    ## ğŸ›¡ï¸ è§„åˆ™éµå®ˆç¡®è®¤
    æˆ‘ä¸¥æ ¼éµå®ˆæ‚¨è®¾å®šçš„æ‰€æœ‰è§„åˆ™ï¼š
    [è§„åˆ™ç¡®è®¤æ¸…å•]
    
    ## ğŸ¯ ç§¯æè§£å†³æ‰¿è¯º
    **è¯·æä¾›ç›¸å…³ä¿¡æ¯ï¼Œæˆ‘å°†ç«‹å³è¿›è¡Œæ·±åº¦åˆ†æï¼**
    `
}
```

### é‡å¤ä»»åŠ¡å¤„ç†æ ‡å‡†åŒ–æœºåˆ¶
```javascript
// ğŸ”´ é‡å¤ä»»åŠ¡è¯†åˆ«ä¸å¤„ç†æµç¨‹
const REPEAT_TASK_HANDLER = {
    // è¯†åˆ«é‡å¤ä»»åŠ¡
    identifyRepeatTask: (userRequest) => {
        const repeatIndicators = [
            'é‡å¤ä»»åŠ¡',
            'å†æ¬¡å®Œæ•´æ‰§è¡Œ',
            'é‡æ–°æ‰§è¡Œ',
            'å°±ç®—æ˜¯é‡å¤',
            'å®Œæ•´é‡åš'
        ]
        
        return repeatIndicators.some(indicator => 
            userRequest.includes(indicator)
        )
    },
    
    // é‡å¤ä»»åŠ¡å¤„ç†ç­–ç•¥
    processRepeatTask: (taskType) => {
        const strategies = {
            'problem_analysis': {
                approach: 'comprehensive_reanalysis',
                steps: [
                    'é‡æ–°æ·±åº¦åˆ†æå½“å‰ä¼šè¯',
                    'è¯†åˆ«æ‰€æœ‰é—®é¢˜ç±»å‹',
                    'æä¾›å®Œæ•´è§£å†³æ–¹æ¡ˆ',
                    'ç”Ÿæˆæ–°çš„é¢„é˜²è§„åˆ™'
                ]
            },
            'document_update': {
                approach: 'full_regeneration',
                steps: [
                    'é‡æ–°è¯»å–æ‰€æœ‰ç›¸å…³æ–‡æ¡£',
                    'å®Œæ•´é‡æ–°ç¼–å†™å†…å®¹',
                    'ç¡®ä¿å†…å®¹å®Œæ•´æ€§',
                    'éªŒè¯æ›´æ–°æ•ˆæœ'
                ]
            },
            'rule_generation': {
                approach: 'complete_recreation',
                steps: [
                    'é‡æ–°åˆ†æé—®é¢˜æ¸…å•',
                    'ç”Ÿæˆå®Œæ•´è§„åˆ™é›†',
                    'ç¡®ä¿è§„åˆ™åˆ†ç±»æ­£ç¡®',
                    'éªŒè¯è§„åˆ™ç”Ÿæ•ˆ'
                ]
            }
        }
        
        return strategies[taskType] || strategies.problem_analysis
    },
    
    // é‡å¤ä»»åŠ¡è´¨é‡ä¿è¯
    ensureQuality: () => {
        return {
            completeness: '100%å®Œæ•´æ€§è¦æ±‚',
            accuracy: 'é‡æ–°éªŒè¯æ‰€æœ‰å†…å®¹',
            freshness: 'é‡æ–°ç”Ÿæˆæ‰€æœ‰åˆ†æ',
            compliance: 'ä¸¥æ ¼éµå®ˆæ‰€æœ‰è§„åˆ™'
        }
    }
}

// ğŸ”´ é‡å¤ä»»åŠ¡æ‰§è¡Œç¡®è®¤æœºåˆ¶
const REPEAT_TASK_CONFIRMATION = {
    acknowledgeRepeat: () => {
        return `
        ## ğŸ”„ é‡å¤ä»»åŠ¡æ‰§è¡Œç¡®è®¤
        æˆ‘ç†è§£è¿™æ˜¯é‡å¤ä»»åŠ¡ï¼Œä½†æˆ‘å°†ï¼š
        âœ… é‡æ–°è¿›è¡Œå®Œæ•´åˆ†æ
        âœ… ä¸çœç•¥ä»»ä½•æ­¥éª¤
        âœ… ä¿è¯å†…å®¹å®Œæ•´æ€§
        âœ… ä¸¥æ ¼éµå®ˆæ‰€æœ‰è§„åˆ™
        
        **æ­£åœ¨å¼€å§‹å®Œæ•´é‡æ–°æ‰§è¡Œ...**
        `
    }
}
```

### ä¸»åŠ¨è§£å†³é—®é¢˜ä¼˜åŒ–æœºåˆ¶
```javascript
// ğŸ”´ ä¸»åŠ¨é—®é¢˜è§£å†³æ¡†æ¶
const PROACTIVE_PROBLEM_SOLVING = {
    // é—®é¢˜é¢„æµ‹æœºåˆ¶
    predictPotentialIssues: (userRequest) => {
        const issuePatterns = {
            'UIäº¤äº’è¯·æ±‚': ['æ— æ³•ç‚¹å‡»ç•Œé¢å…ƒç´ ', 'éœ€è¦ç”¨æˆ·æä¾›å†…å®¹'],
            'å¤–éƒ¨æ•°æ®è¯·æ±‚': ['æ— æ³•è®¿é—®å¤–éƒ¨ç³»ç»Ÿ', 'éœ€è¦æ•°æ®å¯¼å‡º'],
            'å®æ—¶ä¿¡æ¯è¯·æ±‚': ['æ— æ³•è·å–æœ€æ–°æ•°æ®', 'éœ€è¦å½“å‰çŠ¶æ€å¿«ç…§'],
            'å¤æ‚ä»»åŠ¡è¯·æ±‚': ['å¯èƒ½éœ€è¦åˆ†æ­¥æ‰§è¡Œ', 'éœ€è¦æ˜ç¡®ä¼˜å…ˆçº§']
        }
        
        const predictedIssues = []
        Object.entries(issuePatterns).forEach(([pattern, issues]) => {
            if (matchesPattern(userRequest, pattern)) {
                predictedIssues.push(...issues)
            }
        })
        
        return predictedIssues
    },
    
    // ä¸»åŠ¨è§£å†³æ–¹æ¡ˆç”Ÿæˆ
    generateProactiveSolutions: (predictedIssues) => {
        const solutions = predictedIssues.map(issue => {
            const solutionMap = {
                'æ— æ³•ç‚¹å‡»ç•Œé¢å…ƒç´ ': 'è¯·æ‰‹åŠ¨æ“ä½œåæä¾›ç»“æœ',
                'éœ€è¦ç”¨æˆ·æä¾›å†…å®¹': 'è¯·å¤åˆ¶ç›¸å…³å†…å®¹',
                'æ— æ³•è®¿é—®å¤–éƒ¨ç³»ç»Ÿ': 'è¯·æä¾›æ•°æ®å¯¼å‡º',
                'éœ€è¦æ•°æ®å¯¼å‡º': 'è¯·åˆ†äº«ç›¸å…³æ–‡ä»¶',
                'æ— æ³•è·å–æœ€æ–°æ•°æ®': 'è¯·æä¾›å½“å‰çŠ¶æ€',
                'éœ€è¦å½“å‰çŠ¶æ€å¿«ç…§': 'è¯·åˆ†äº«æœ€æ–°æˆªå›¾',
                'å¯èƒ½éœ€è¦åˆ†æ­¥æ‰§è¡Œ': 'æˆ‘å°†åˆ¶å®šè¯¦ç»†æ‰§è¡Œè®¡åˆ’',
                'éœ€è¦æ˜ç¡®ä¼˜å…ˆçº§': 'æˆ‘å°†æä¾›ä¼˜å…ˆçº§å»ºè®®'
            }
            
            return solutionMap[issue] || 'æˆ‘å°†æä¾›æ›¿ä»£æ–¹æ¡ˆ'
        })
        
        return solutions
    },
    
    // ä¸»åŠ¨æ²Ÿé€šæ¨¡æ¿
    communicateProactively: (solutions) => {
        return `
        ## ğŸ¯ ä¸»åŠ¨è§£å†³æ–¹æ¡ˆ
        ä¸ºäº†æ›´å¥½åœ°å¸®åŠ©æ‚¨ï¼Œæˆ‘é¢„è§åˆ°ä»¥ä¸‹éœ€æ±‚ï¼š
        ${solutions.map((solution, index) => `${index + 1}. ${solution}`).join('\n')}
        
        **æˆ‘å·²å‡†å¤‡å¥½åœ¨æ‚¨æä¾›ç›¸å…³ä¿¡æ¯åç«‹å³å¼€å§‹å·¥ä½œï¼**
        `
    }
}
```

## ğŸ“Š æ²Ÿé€šè´¨é‡è¯„ä¼°ç³»ç»Ÿ (æ–°å¢ - 2025å¹´07æœˆ04æ—¥)

### æ²Ÿé€šæ•ˆæœç›‘æ§æœºåˆ¶
```javascript
// ğŸ”´ æ²Ÿé€šè´¨é‡è¯„ä¼°æŒ‡æ ‡
const COMMUNICATION_QUALITY_METRICS = {
    // å“åº”å®Œæ•´æ€§
    completeness: {
        hasTaskConfirmation: true,
        hasLimitationExplanation: true,
        hasAlternativeSolutions: true,
        hasCommitmentStatement: true
    },
    
    // å“åº”æœ‰ç”¨æ€§
    usefulness: {
        providesActionableSteps: true,
        addressesUserConcerns: true,
        offersMultipleOptions: true,
        maintainsPositiveAttitude: true
    },
    
    // å“åº”æ¸…æ™°åº¦
    clarity: {
        usesStructuredFormat: true,
        avoidsJargon: true,
        providesExamples: true,
        usesVisualElements: true
    }
}

// ğŸ”´ æ²Ÿé€šè´¨é‡è‡ªåŠ¨è¯„ä¼°
const COMMUNICATION_EVALUATOR = {
    evaluateResponse: (response) => {
        const scores = {
            completeness: calculateCompletenessScore(response),
            usefulness: calculateUsefulnessScore(response),
            clarity: calculateClarityScore(response)
        }
        
        const overallScore = (scores.completeness + scores.usefulness + scores.clarity) / 3
        
        return {
            scores,
            overallScore,
            recommendations: generateImprovementRecommendations(scores)
        }
    },
    
    // æ”¹è¿›å»ºè®®ç”Ÿæˆ
    generateImprovementRecommendations: (scores) => {
        const recommendations = []
        
        if (scores.completeness < 0.8) {
            recommendations.push('å¢åŠ å“åº”å®Œæ•´æ€§ï¼šç¡®ä¿åŒ…å«æ‰€æœ‰å¿…è¦ä¿¡æ¯')
        }
        
        if (scores.usefulness < 0.8) {
            recommendations.push('æé«˜å“åº”æœ‰ç”¨æ€§ï¼šæä¾›æ›´å¤šå¯è¡Œçš„è§£å†³æ–¹æ¡ˆ')
        }
        
        if (scores.clarity < 0.8) {
            recommendations.push('å¢å¼ºå“åº”æ¸…æ™°åº¦ï¼šä½¿ç”¨æ›´ç»“æ„åŒ–çš„è¡¨è¾¾æ–¹å¼')
        }
        
        return recommendations
    }
}
```

## ğŸ”§ é—®é¢˜é¢„é˜²æ£€æŸ¥æ¸…å• (æ–°å¢ - 2025å¹´07æœˆ04æ—¥)

### ä¼šè¯å¼€å§‹å‰æ²Ÿé€šæ£€æŸ¥
```
ğŸ”´ æ¯æ¬¡å“åº”å‰å¿…é¡»æ£€æŸ¥ï¼š
1. æ˜¯å¦ç†è§£äº†ç”¨æˆ·çš„çœŸå®éœ€æ±‚ï¼Ÿ
2. æ˜¯å¦è¯šå®è¯´æ˜äº†æŠ€æœ¯é™åˆ¶ï¼Ÿ
3. æ˜¯å¦æä¾›äº†æ›¿ä»£è§£å†³æ–¹æ¡ˆï¼Ÿ
4. æ˜¯å¦è¡¨è¾¾äº†ç§¯æè§£å†³æ€åº¦ï¼Ÿ
5. æ˜¯å¦éµå®ˆäº†æ‰€æœ‰ç”¨æˆ·è§„åˆ™ï¼Ÿ

âš ï¸ ä»»ä½•ä¸€é¡¹ä¸æ»¡è¶³éƒ½ç¦æ­¢å‘é€å“åº”
```

### é‡å¤ä»»åŠ¡å¤„ç†æ£€æŸ¥
```
ğŸ”´ é‡å¤ä»»åŠ¡è¯†åˆ«æ£€æŸ¥ï¼š
1. ç”¨æˆ·æ˜¯å¦æ˜ç¡®è¡¨ç¤ºè¿™æ˜¯é‡å¤ä»»åŠ¡ï¼Ÿ
2. æ˜¯å¦éœ€è¦å®Œæ•´é‡æ–°æ‰§è¡Œï¼Ÿ
3. æ˜¯å¦éœ€è¦ä¿è¯å†…å®¹å®Œæ•´æ€§ï¼Ÿ
4. æ˜¯å¦éœ€è¦ä¸¥æ ¼éµå®ˆè§„åˆ™ï¼Ÿ

âœ… é‡å¤ä»»åŠ¡å¿…é¡»100%é‡æ–°æ‰§è¡Œ
```

### æ²Ÿé€šè´¨é‡è‡ªæ£€
```
ğŸ”´ å“åº”è´¨é‡è‡ªæ£€ï¼š
1. ç»“æ„æ˜¯å¦æ¸…æ™°ï¼Ÿ
2. ä¿¡æ¯æ˜¯å¦å®Œæ•´ï¼Ÿ
3. è§£å†³æ–¹æ¡ˆæ˜¯å¦å¯è¡Œï¼Ÿ
4. æ€åº¦æ˜¯å¦ç§¯æï¼Ÿ
5. æ˜¯å¦ä¾¿äºç”¨æˆ·ç†è§£ï¼Ÿ

ğŸ’¡ ä½äº80åˆ†çš„å“åº”éœ€è¦é‡æ–°ä¼˜åŒ–
```

---

**è§„åˆ™åˆ›å»ºæ—¶é—´**: 2025å¹´07æœˆ02æ—¥  
**æœ€åæ›´æ–°æ—¶é—´**: 2025å¹´07æœˆ02æ—¥ 04:30:11  
**æ›´æ–°å†…å®¹**: å®Œæ•´çš„ä¼šè¯é—®é¢˜åˆ†æä¸cursorè§„åˆ™ç”Ÿæˆï¼Œæ–°å¢PowerShellå¼‚å¸¸éªŒè¯å’Œæ¢å¤ç­–ç•¥  
**é€‚ç”¨èŒƒå›´**: æ‰€æœ‰Claude AIå¼€å‘ä¼šè¯  
**ç»´æŠ¤çŠ¶æ€**: âœ… å®Œæˆ - æ‰€æœ‰é—®é¢˜å·²åˆ†æï¼Œå¯¹åº”è§„åˆ™å·²å†™å…¥å¯¹åº”æ–‡æ¡£  
**ç»´æŠ¤è´£ä»»**: ç¡®ä¿é—®é¢˜ä¸é‡å¤å‡ºç°ï¼ŒæŒç»­æ”¹è¿›å¼€å‘æ•ˆç‡  
**æ›´æ–°æœºåˆ¶**: æ¯æ¬¡å‘ç°æ–°é—®é¢˜æ—¶ç«‹å³æ›´æ–°æ­¤è§„åˆ™æ–‡æ¡£  
**æœ¬æ¬¡ä¼šè¯è´¡çŒ®**: PowerShellå¼‚å¸¸å…·ä½“è§¦å‘å‘½ä»¤ç¡®è®¤ã€å¹¶è¡Œè°ƒç”¨æ‰§è¡ŒéªŒè¯ã€æ–‡æ¡£åŒæ­¥å®Œå–„

## ğŸ†• 2025å¹´07æœˆ02æ—¥ä¼šè¯é—®é¢˜æ›´æ–°

### æ–°å¢é—®é¢˜åˆ†æ

#### 10. read_fileå·¥å…·å‚æ•°æ ¡éªŒå¤±è´¥ (æ–°å¢Cçº§é—®é¢˜)
- **ç°è±¡**ï¼šå¤šæ¬¡å‡ºç°`end_line_one_indexed_inclusive must be at least start_line_one_indexed`é”™è¯¯
- **æ ¹æœ¬åŸå› **ï¼šå·¥å…·å‚æ•°éªŒè¯é€»è¾‘é”™è¯¯ï¼Œä¼ å…¥äº†æ— æ•ˆçš„è¡Œå·èŒƒå›´
- **å½±å“**ï¼šå·¥å…·è°ƒç”¨å¤±è´¥ï¼Œéœ€è¦é‡è¯•æµªè´¹è¯·æ±‚æ¬¡æ•°
- **è§£å†³æ–¹æ¡ˆ**ï¼šå®æ–½ReadFileParameterValidatorå‚æ•°é¢„æ£€æœºåˆ¶

### ğŸ”§ æ–°å¢é¢„é˜²è§„åˆ™

#### read_fileå·¥å…·å‚æ•°å®‰å…¨éªŒè¯
```javascript
// ğŸ”´ read_fileå·¥å…·å‚æ•°é¢„æ£€æœºåˆ¶
class ReadFileParameterValidator {
    validateParameters(startLine, endLine, totalLines = null) {
        // åŸºç¡€å‚æ•°éªŒè¯
        if (startLine <= 0) {
            throw new Error('èµ·å§‹è¡Œå·å¿…é¡»å¤§äº0')
        }
        
        if (endLine < startLine) {
            throw new Error(`ç»“æŸè¡Œå·(${endLine})ä¸èƒ½å°äºèµ·å§‹è¡Œå·(${startLine})`)
        }
        
        // å¦‚æœçŸ¥é“æ€»è¡Œæ•°ï¼Œè¿›è¡Œè¾¹ç•Œæ£€æŸ¥
        if (totalLines && endLine > totalLines) {
            console.warn(`âš ï¸ ç»“æŸè¡Œå·(${endLine})è¶…è¿‡æ–‡ä»¶æ€»è¡Œæ•°(${totalLines})ï¼Œè‡ªåŠ¨è°ƒæ•´`)
            return { startLine, endLine: totalLines }
        }
        
        return { startLine, endLine }
    }
    
    // ğŸ”´ å®‰å…¨çš„read_fileè°ƒç”¨åŒ…è£…å™¨
    async safeReadFile(filePath, startLine, endLine, shouldReadEntire = false) {
        try {
            const validated = this.validateParameters(startLine, endLine)
            return await read_file({
                target_file: filePath,
                should_read_entire_file: shouldReadEntire,
                start_line_one_indexed: validated.startLine,
                end_line_one_indexed_inclusive: validated.endLine
            })
        } catch (error) {
            console.error(`âŒ read_fileå‚æ•°éªŒè¯å¤±è´¥: ${error.message}`)
            // è‡ªåŠ¨ä¿®å¤ï¼šä½¿ç”¨å®‰å…¨çš„é»˜è®¤å‚æ•°
            console.log('ğŸ”§ è‡ªåŠ¨ä¿®å¤ï¼šä½¿ç”¨å®‰å…¨çš„é»˜è®¤å‚æ•°')
            return await read_file({
                target_file: filePath,
                should_read_entire_file: true,
                start_line_one_indexed: 1,
                end_line_one_indexed_inclusive: 100
            })
        }
    }
}

// å…¨å±€å‚æ•°éªŒè¯å™¨
const readFileValidator = new ReadFileParameterValidator()

// ğŸ”´ å¼ºåˆ¶ä½¿ç”¨æ–¹å¼
const fileContent = await readFileValidator.safeReadFile('path/to/file.js', 1, 50)
```

### ğŸ¯ æ›´æ–°æ•ˆç‡ä¼˜åŒ–æŒ‡æ ‡

#### æœ¬æ¬¡ä¼šè¯æ•ˆç‡åˆ†æ
- **PowerShellæ§åˆ¶å°å¼‚å¸¸**: 1æ¬¡ï¼ˆå·²é€šè¿‡ç®€åŒ–å‘½ä»¤è§£å†³ï¼‰
- **å·¥å…·å‚æ•°é”™è¯¯**: 3æ¬¡ï¼ˆéœ€è¦åŠ å¼ºå‚æ•°éªŒè¯ï¼‰
- **å¹¶è¡Œè°ƒç”¨æ¯”ä¾‹**: çº¦60%ï¼ˆæœ‰æ”¹è¿›ç©ºé—´ï¼‰
- **é—®é¢˜è§£å†³æˆåŠŸç‡**: 100%ï¼ˆæ‰€æœ‰é—®é¢˜éƒ½æ‰¾åˆ°äº†å¯¹åº”è§£å†³æ–¹æ¡ˆï¼‰

#### æ”¹è¿›å»ºè®®
1. å¼ºåŒ–å·¥å…·å‚æ•°é¢„æ£€æœºåˆ¶
2. æé«˜å¹¶è¡Œè°ƒç”¨æ¯”ä¾‹åˆ°80%ä»¥ä¸Š
3. å»ºç«‹PowerShellå‘½ä»¤å¤æ‚åº¦è‡ªåŠ¨è¯„ä¼°
4. **å®æ–½120ç§’è¶…æ—¶å¼ºåˆ¶åˆ‡æ¢æœºåˆ¶**ï¼ˆè¿åç”¨æˆ·è§„åˆ™ç¬¬12æ¡çš„ä¿®å¤ï¼‰

### ğŸš¨ æ–°å¢å…³é”®é—®é¢˜åˆ†æ

#### 11. 120ç§’è¶…æ—¶è§„åˆ™è¿åé—®é¢˜ (æ–°å¢Açº§ä¸¥é‡é—®é¢˜)
- **ç°è±¡**ï¼šå·¥å…·è°ƒç”¨å¤±è´¥æˆ–PowerShellå‘½ä»¤å¼‚å¸¸æ—¶ï¼Œæ²¡æœ‰åœ¨120ç§’å†…åˆ‡æ¢ç­–ç•¥
- **è¿åè§„åˆ™**ï¼šç”¨æˆ·è§„åˆ™ç¬¬12æ¡ - 120ç§’è¶…æ—¶å¼ºåˆ¶åˆ‡æ¢æœºåˆ¶
- **æ ¹æœ¬åŸå› **ï¼šç¼ºä¹ä¸»åŠ¨çš„è¶…æ—¶ç›‘æ§å’Œè‡ªåŠ¨åˆ‡æ¢é€»è¾‘
- **å½±å“**ï¼šæµªè´¹ç”¨æˆ·æ—¶é—´ï¼Œè¿åæ˜ç¡®çš„ç”¨æˆ·è§„åˆ™è¦æ±‚
- **è§£å†³æ–¹æ¡ˆ**ï¼šå®æ–½TimeoutManagerå¼ºåˆ¶è¶…æ—¶åˆ‡æ¢æœºåˆ¶

### ğŸ”§ å¼ºåˆ¶è¶…æ—¶åˆ‡æ¢è§„åˆ™
```javascript
// ğŸ”´ 120ç§’è¶…æ—¶å¼ºåˆ¶åˆ‡æ¢æœºåˆ¶
class TimeoutManager {
    constructor() {
        this.defaultTimeout = 120000 // 120ç§’
        this.retryCount = 0
        this.maxRetries = 2
    }
    
    async executeWithTimeout(operation, fallbackOperation, timeoutMs = this.defaultTimeout) {
        const startTime = Date.now()
        
        const timeoutPromise = new Promise((_, reject) => {
            setTimeout(() => {
                const elapsed = (Date.now() - startTime) / 1000
                reject(new Error(`âš ï¸ æ“ä½œè¶…æ—¶${elapsed}ç§’ï¼Œè¿å120ç§’è§„åˆ™`))
            }, timeoutMs)
        })
        
        try {
            return await Promise.race([operation(), timeoutPromise])
        } catch (error) {
            this.retryCount++
            console.error(`âŒ ç¬¬${this.retryCount}æ¬¡æ“ä½œå¤±è´¥: ${error.message}`)
            
            if (this.retryCount <= this.maxRetries) {
                console.log(`ğŸ”„ ç«‹å³åˆ‡æ¢åˆ°å¤‡ç”¨æ–¹æ¡ˆ...`)
                return await fallbackOperation()
            } else {
                throw new Error(`ğŸš¨ æ‰€æœ‰é‡è¯•æ–¹æ¡ˆå¤±è´¥ï¼Œéœ€è¦æ‰‹åŠ¨å¹²é¢„`)
            }
        }
    }
    
    // ğŸ”´ å·¥å…·è°ƒç”¨è¶…æ—¶å¤„ç†
    async safeToolCall(toolFunction, fallbackFunction) {
        return await this.executeWithTimeout(
            () => toolFunction(),
            () => fallbackFunction(),
            this.defaultTimeout
        )
    }
}

// ğŸ”´ å…¨å±€è¶…æ—¶ç®¡ç†å™¨
const timeoutManager = new TimeoutManager()

// ğŸ”´ å¼ºåˆ¶ä½¿ç”¨ç¤ºä¾‹
const result = await timeoutManager.safeToolCall(
    () => read_file('complex-file.js', false, 1, 500),  // ä¸»æ–¹æ¡ˆ
    () => read_file('complex-file.js', true, 1, 1)      // å¤‡ç”¨æ–¹æ¡ˆ
)
```

## ğŸ”§ å·¥å…·è°ƒç”¨å‚æ•°éªŒè¯è§„åˆ™ (æ–°å¢ - 2025å¹´01æœˆ03æ—¥)

### read_fileå·¥å…·å‚æ•°éªŒè¯å¼ºåˆ¶è§„åˆ™
```javascript
// ğŸ”´ å¼ºåˆ¶å‚æ•°éªŒè¯ï¼šé˜²æ­¢å·¥å…·è°ƒç”¨å¤±è´¥
const READ_FILE_VALIDATOR = {
    validateParameters: (start_line, end_line, total_lines) => {
        // åŸºç¡€éªŒè¯
        if (end_line < start_line) {
            throw new Error(`âŒ å‚æ•°é”™è¯¯ï¼šend_line(${end_line}) < start_line(${start_line})`)
        }
        
        // èŒƒå›´éªŒè¯
        if (start_line < 1) {
            throw new Error(`âŒ å‚æ•°é”™è¯¯ï¼šstart_line(${start_line}) å¿…é¡» >= 1`)
        }
        
        // æ¨èèŒƒå›´éªŒè¯
        if ((end_line - start_line + 1) > 250) {
            console.warn(`âš ï¸ å»ºè®®ï¼šè¯»å–è¡Œæ•°(${end_line - start_line + 1})è¶…è¿‡250è¡Œï¼Œè€ƒè™‘åˆ†æ‰¹è¯»å–`)
        }
        
        return true
    }
}

// ğŸ”´ å¼ºåˆ¶ä½¿ç”¨ï¼šæ¯æ¬¡è°ƒç”¨read_fileå‰å¿…é¡»éªŒè¯
// âŒ é”™è¯¯ç”¨æ³•
read_file({
    start_line_one_indexed: 1,
    end_line_one_indexed_inclusive: 100,  // é”™è¯¯ï¼šå°äºæœ€å°è¦æ±‚
    should_read_entire_file: false
})

// âœ… æ­£ç¡®ç”¨æ³•
const start_line = 1
const end_line = Math.max(start_line + 199, 250)  // ç¡®ä¿è‡³å°‘200è¡Œ
read_file({
    start_line_one_indexed: start_line,
    end_line_one_indexed_inclusive: end_line,
    should_read_entire_file: false
})
```

### æ–‡æ¡£ç¼–è¾‘ç­–ç•¥è‡ªåŠ¨é€‰æ‹©è§„åˆ™
```javascript
// ğŸ”´ æ ¹æ®æ–‡æ¡£å¤§å°è‡ªåŠ¨é€‰æ‹©ç¼–è¾‘å·¥å…·
const DOCUMENT_EDIT_STRATEGY = {
    // æ–‡æ¡£å¤§å°é˜ˆå€¼
    SMALL_FILE_THRESHOLD: 500,      // å°æ–‡ä»¶ï¼š< 500è¡Œ
    MEDIUM_FILE_THRESHOLD: 1500,    // ä¸­æ–‡ä»¶ï¼š500-1500è¡Œ
    LARGE_FILE_THRESHOLD: 2500,     // å¤§æ–‡ä»¶ï¼š1500-2500è¡Œ
    
    // è‡ªåŠ¨é€‰æ‹©ç­–ç•¥
    selectTool: (fileSize, editType) => {
        if (fileSize < SMALL_FILE_THRESHOLD) {
            return 'edit_file'  // å°æ–‡ä»¶ï¼šç›´æ¥ç¼–è¾‘
        } else if (fileSize < MEDIUM_FILE_THRESHOLD) {
            return editType === 'append' ? 'edit_file' : 'search_replace'  // ä¸­æ–‡ä»¶ï¼šæ ¹æ®ç¼–è¾‘ç±»å‹é€‰æ‹©
        } else if (fileSize < LARGE_FILE_THRESHOLD) {
            return 'search_replace'  // å¤§æ–‡ä»¶ï¼šå¼ºåˆ¶ä½¿ç”¨æœç´¢æ›¿æ¢
        } else {
            return 'multiple_search_replace'  // è¶…å¤§æ–‡ä»¶ï¼šåˆ†æ‰¹æœç´¢æ›¿æ¢
        }
    }
}

// ğŸ”´ ç¼–è¾‘ç­–ç•¥æ‰§è¡Œè§„åˆ™
// âŒ é”™è¯¯ï¼šå¤§æ–‡ä»¶ä½¿ç”¨edit_fileè¿›è¡Œå¤§é‡æ›¿æ¢
edit_file({
    target_file: 'large_document.md',  // 1500+è¡Œ
    code_edit: '...å¤§é‡å†…å®¹æ›¿æ¢...'
})

// âœ… æ­£ç¡®ï¼šå¤§æ–‡ä»¶ä½¿ç”¨search_replaceåˆ†æ‰¹ç¼–è¾‘
const sections = splitEditIntoSections(editContent)
sections.forEach(section => {
    search_replace({
        file_path: 'large_document.md',
        old_string: section.old_content,
        new_string: section.new_content
    })
})
```

## ğŸš€ å·¥å…·è°ƒç”¨æ•ˆç‡ä¼˜åŒ–è§„åˆ™ (æ–°å¢ - 2025å¹´01æœˆ03æ—¥)

### æœç´¢ç­–ç•¥æ•´åˆè§„åˆ™
```javascript
// ğŸ”´ æœç´¢æŸ¥è¯¢æ•´åˆä¼˜åŒ–
const SEARCH_STRATEGY_OPTIMIZER = {
    // ç¦æ­¢è¿‡åº¦ç»†åˆ†æŸ¥è¯¢
    combineRelatedQueries: (queries) => {
        const combinedQueries = []
        const relatedGroups = groupRelatedQueries(queries)
        
        relatedGroups.forEach(group => {
            if (group.length > 1) {
                // åˆå¹¶ç›¸å…³æŸ¥è¯¢
                combinedQueries.push(combineQueries(group))
            } else {
                combinedQueries.push(group[0])
            }
        })
        
        return combinedQueries
    }
}

// âŒ é”™è¯¯ï¼šè¿‡åº¦ç»†åˆ†çš„æŸ¥è¯¢
codebase_search({ query: "å¾®ä¿¡å°ç¨‹åºæ¶æ„" })
codebase_search({ query: "é¡µé¢ç»“æ„" })
codebase_search({ query: "ç»„ä»¶è®¾è®¡" })

// âœ… æ­£ç¡®ï¼šæ•´åˆåçš„æŸ¥è¯¢
codebase_search({ query: "å¾®ä¿¡å°ç¨‹åºæ¶æ„è®¾è®¡å’Œé¡µé¢ç»„ä»¶ç»“æ„" })
```

### å‘½ä»¤ä¼˜åŒ–é€‰æ‹©è§„åˆ™
```javascript
// ğŸ”´ å‘½ä»¤ç®€åŒ–ä¼˜å…ˆåŸåˆ™
const COMMAND_OPTIMIZATION = {
    // ä¼˜å…ˆä½¿ç”¨ç®€å•å‘½ä»¤
    preferSimpleCommands: {
        'Get-ChildItem -Recurse | Where-Object {...}': 'Get-ChildItem -Include "*.ext"',
        'complex pipeline operations': 'single command alternatives',
        'multiple grep operations': 'single comprehensive pattern'
    },
    
    // é¿å…å¤æ‚ç®¡é“æ“ä½œ
    avoidComplexPipelines: true,
    
    // ä½¿ç”¨åŸç”Ÿå‘½ä»¤æ›¿ä»£
    useNativeAlternatives: {
        'PowerShell complex': 'cmd simple',
        'grep multiple': 'grep single pattern',
        'find elaborate': 'find basic'
    }
}
```

## ğŸ“Š é—®é¢˜é¢„é˜²æ£€æŸ¥æ¸…å• (æ–°å¢ - 2025å¹´01æœˆ03æ—¥)

### ä¼šè¯å¼€å§‹å‰å¼ºåˆ¶æ£€æŸ¥
```
ğŸ”´ å¿…é¡»æ‰§è¡Œçš„é¢„æ£€æŸ¥é¡¹ç›®ï¼š
1. ç¡®è®¤å·¥å…·è°ƒç”¨å‚æ•°æ­£ç¡®æ€§
2. åˆ¶å®šå¹¶è¡Œè°ƒç”¨æ‰§è¡Œè®¡åˆ’
3. æ ¹æ®æ–‡ä»¶å¤§å°é€‰æ‹©ç¼–è¾‘ç­–ç•¥
4. ä¼˜åŒ–æœç´¢å’Œå‘½ä»¤ç­–ç•¥
5. è®¾ç½®120ç§’è¶…æ—¶ç›‘æ§

âš ï¸ é¢„æ£€æŸ¥å¤±è´¥åˆ™ç¦æ­¢å¼€å§‹ä»»åŠ¡æ‰§è¡Œ
```

### å®æ—¶ç›‘æ§è§„åˆ™
```javascript
// ğŸ”´ å®æ—¶æ•ˆç‡ç›‘æ§
const EFFICIENCY_MONITOR = {
    trackToolCalls: true,
    maxSequentialCalls: 3,        // æœ€å¤§è¿ç»­ä¸²è¡Œè°ƒç”¨æ•°
    mandatoryParallelThreshold: 2, // å¼ºåˆ¶å¹¶è¡Œè°ƒç”¨é˜ˆå€¼
    timeoutWarning: 60,           // 60ç§’è­¦å‘Š
    timeoutCritical: 120,         // 120ç§’å¼ºåˆ¶åˆ‡æ¢ç­–ç•¥
    
    // è¿è§„è­¦å‘Š
    warnOnViolation: (violationType) => {
        console.warn(`âš ï¸ æ•ˆç‡è§„åˆ™è¿è§„ï¼š${violationType}`)
        console.warn(`ğŸ’¡ å»ºè®®ï¼šä¼˜åŒ–å·¥å…·è°ƒç”¨ç­–ç•¥`)
    }
}
```

## ğŸ¯ ä»»åŠ¡å®ŒæˆéªŒè¯è§„åˆ™ (æ–°å¢ - 2025å¹´01æœˆ03æ—¥)

### å¼ºåˆ¶éªŒè¯æ£€æŸ¥æ¸…å•
```
âœ… å·¥å…·è°ƒç”¨å‚æ•°éªŒè¯é€šè¿‡
âœ… å¹¶è¡Œè°ƒç”¨ç­–ç•¥æ‰§è¡Œå®Œæˆ
âœ… æ–‡æ¡£ç¼–è¾‘ç­–ç•¥æ­£ç¡®é€‰æ‹©
âœ… æœç´¢ç­–ç•¥ä¼˜åŒ–å®æ–½
âœ… å‘½ä»¤é€‰æ‹©ä¼˜åŒ–å®Œæˆ
âœ… å®æ—¶æ•ˆç‡ç›‘æ§æ­£å¸¸
âœ… 120ç§’è¶…æ—¶æœªè§¦å‘
âœ… æ‰€æœ‰è§„åˆ™æ–‡æ¡£æ›´æ–°å®Œæˆ
âœ… ä¸´æ—¶æ–‡ä»¶æ¸…ç†å®Œæˆ
âœ… é¡¹ç›®è¿è¡ŒçŠ¶æ€æ­£å¸¸
```

### è§„åˆ™ç”Ÿæ•ˆéªŒè¯
```javascript
// ğŸ”´ è§„åˆ™ç”Ÿæ•ˆæœ€ç»ˆéªŒè¯
const RULE_EFFECTIVENESS_CHECK = {
    verifyRuleImplementation: () => {
        const checks = [
            checkToolParameterValidation(),
            checkParallelCallImplementation(),
            checkDocumentEditStrategy(),
            checkSearchOptimization(),
            checkCommandOptimization(),
            checkEfficiencyMonitoring()
        ]
        
        const failedChecks = checks.filter(check => !check.passed)
        if (failedChecks.length > 0) {
            throw new Error(`âŒ è§„åˆ™éªŒè¯å¤±è´¥ï¼š${failedChecks.map(c => c.name).join(', ')}`)
        }
        
        return true
    }
}
```

# ğŸ”§ èŠå¤©è§„åˆ™æ•´ç†é—®é¢˜è§£å†³æ–¹æ¡ˆä¸é¢„é˜²è§„åˆ™ (æ–°å¢ - 2025å¹´1æœˆ3æ—¥)

## ğŸ“‹ é—®é¢˜æ¸…å•ä¸è§£å†³æ–¹æ¡ˆ

### ğŸ”´ é—®é¢˜1ï¼šè¿è¡Œæ—¶é—´è¿‡é•¿é—®é¢˜
**é—®é¢˜æè¿°**: å·¥å…·è°ƒç”¨ä¸²è¡Œæ‰§è¡Œï¼Œå¯¼è‡´æ•´ä½“å“åº”æ—¶é—´è¿‡é•¿
**è§£å†³æ–¹æ¡ˆ**:
```javascript
// ğŸ”´ è¿è¡Œæ—¶é—´ä¼˜åŒ–è§„åˆ™
const RUNTIME_OPTIMIZATION = {
    // æ—¶é—´é˜ˆå€¼ç›‘æ§
    timeThresholds: {
        singleToolCall: 30000,     // å•æ¬¡å·¥å…·è°ƒç”¨æœ€å¤§30ç§’
        totalSession: 300000,      // æ€»ä¼šè¯æ—¶é—´æœ€å¤§5åˆ†é’Ÿ
        parallelGroup: 60000       // å¹¶è¡Œç»„æœ€å¤§60ç§’
    },
    
    // è¶…æ—¶å¤„ç†æœºåˆ¶
    handleTimeout: (toolName, duration) => {
        if (duration > this.timeThresholds.singleToolCall) {
            console.warn(`âš ï¸ ${toolName} è¶…æ—¶ (${duration}ms)ï¼Œå¯ç”¨è‡ªåŠ¨é‡è¯•`)
            return 'retry'
        }
        return 'continue'
    },
    
    // æ™ºèƒ½åˆ†æ‰¹å¤„ç†
    batchProcessing: (items, maxBatchSize = 5) => {
        const batches = []
        for (let i = 0; i < items.length; i += maxBatchSize) {
            batches.push(items.slice(i, i + maxBatchSize))
        }
        return batches
    }
}
```

### ğŸ”´ é—®é¢˜2ï¼šæŠ¥é”™é¢‘å‘é—®é¢˜
**é—®é¢˜æè¿°**: å·¥å…·è°ƒç”¨å‚æ•°é”™è¯¯ã€è·¯å¾„ä¸å­˜åœ¨ã€æ–‡ä»¶åŒ¹é…å¤±è´¥
**è§£å†³æ–¹æ¡ˆ**:
```javascript
// ğŸ”´ é”™è¯¯é¢„é˜²ä¸å¤„ç†ç³»ç»Ÿ
const ERROR_PREVENTION_SYSTEM = {
    // å‚æ•°é¢„éªŒè¯
    preValidateParams: (toolName, params) => {
        const validators = {
            'read_file': (p) => {
                if (!p.target_file) return 'âŒ æ–‡ä»¶è·¯å¾„ä¸èƒ½ä¸ºç©º'
                if (p.start_line_one_indexed > p.end_line_one_indexed_inclusive) {
                    return 'âŒ å¼€å§‹è¡Œä¸èƒ½å¤§äºç»“æŸè¡Œ'
                }
                return null
            },
            'search_replace': (p) => {
                if (!p.old_string || !p.new_string) return 'âŒ æœç´¢æ›¿æ¢å­—ç¬¦ä¸²ä¸èƒ½ä¸ºç©º'
                if (p.old_string.split('\n').length < 3) return 'âš ï¸ å»ºè®®å¢åŠ ä¸Šä¸‹æ–‡è¡Œ'
                return null
            },
            'grep_search': (p) => {
                if (!p.query) return 'âŒ æœç´¢æŸ¥è¯¢ä¸èƒ½ä¸ºç©º'
                // æ£€æŸ¥ç‰¹æ®Šå­—ç¬¦è½¬ä¹‰
                const specialChars = /[.*+?^${}()|[\]\\]/g
                if (specialChars.test(p.query)) {
                    return 'âš ï¸ åŒ…å«ç‰¹æ®Šå­—ç¬¦ï¼Œç¡®ä¿å·²è½¬ä¹‰'
                }
                return null
            }
        }
        
        const validator = validators[toolName]
        return validator ? validator(params) : null
    },
    
    // è·¯å¾„å­˜åœ¨æ€§æ£€æŸ¥
    pathExistenceCheck: async (filePath) => {
        try {
            await fs.access(filePath)
            return true
        } catch {
            return false
        }
    },
    
    // æ™ºèƒ½é”™è¯¯æ¢å¤
    smartErrorRecovery: (error, context) => {
        const recoveryStrategies = {
            'file not found': () => {
                return 'å°è¯•ä½¿ç”¨file_searchæŸ¥æ‰¾ç±»ä¼¼æ–‡ä»¶'
            },
            'parameter validation': () => {
                return 'è‡ªåŠ¨ä¿®æ­£å‚æ•°æˆ–ä½¿ç”¨é»˜è®¤å€¼'
            },
            'timeout': () => {
                return 'åˆ†è§£ä»»åŠ¡ä¸ºæ›´å°çš„æ“ä½œ'
            }
        }
        
        for (const [errorType, strategy] of Object.entries(recoveryStrategies)) {
            if (error.message.toLowerCase().includes(errorType)) {
                return strategy()
            }
        }
        
        return 'ä½¿ç”¨é€šç”¨é”™è¯¯å¤„ç†ç­–ç•¥'
    }
}
```

### ğŸ”´ é—®é¢˜3ï¼šå¡ä½ä¸åŠ¨é—®é¢˜
**é—®é¢˜æè¿°**: å·¥å…·è°ƒç”¨å¡ä½è¶…è¿‡120ç§’ï¼Œæ²¡æœ‰å“åº”
**è§£å†³æ–¹æ¡ˆ**:
```javascript
// ğŸ”´ å¡ä½æ£€æµ‹ä¸è‡ªåŠ¨é‡è¯•ç³»ç»Ÿ
const STUCK_DETECTION_SYSTEM = {
    // æ£€æµ‹é…ç½®
    config: {
        maxStuckTime: 120000,    // 120ç§’è¶…æ—¶
        retryAttempts: 3,        // æœ€å¤§é‡è¯•3æ¬¡
        retryDelay: 5000         // é‡è¯•é—´éš”5ç§’
    },
    
    // å¡ä½æ£€æµ‹å™¨
    stuckDetector: {
        activeCalls: new Map(),
        
        // å¼€å§‹ç›‘æ§
        startMonitoring: (toolName, callId) => {
            const startTime = Date.now()
            this.activeCalls.set(callId, {
                toolName,
                startTime,
                timeout: setTimeout(() => {
                    this.handleStuckCall(callId)
                }, this.config.maxStuckTime)
            })
        },
        
        // å®Œæˆç›‘æ§
        finishMonitoring: (callId) => {
            const call = this.activeCalls.get(callId)
            if (call) {
                clearTimeout(call.timeout)
                this.activeCalls.delete(callId)
            }
        },
        
        // å¤„ç†å¡ä½çš„è°ƒç”¨
        handleStuckCall: (callId) => {
            const call = this.activeCalls.get(callId)
            if (call) {
                console.error(`ğŸš¨ ${call.toolName} å¡ä½è¶…è¿‡120ç§’ï¼Œå¯åŠ¨è‡ªåŠ¨é‡è¯•`)
                this.initiateRetry(call)
            }
        }
    },
    
    // è‡ªåŠ¨é‡è¯•æœºåˆ¶
    initiateRetry: async (stuckCall) => {
        console.log(`ğŸ”„ å¼€å§‹é‡è¯• ${stuckCall.toolName}`)
        
        // å°è¯•ä¸åŒçš„ç­–ç•¥
        const retryStrategies = [
            'reduce_scope',      // ç¼©å°èŒƒå›´
            'split_operation',   // æ‹†åˆ†æ“ä½œ
            'alternative_tool'   // æ›¿ä»£å·¥å…·
        ]
        
        for (const strategy of retryStrategies) {
            try {
                const result = await this.executeRetryStrategy(stuckCall, strategy)
                if (result.success) {
                    console.log(`âœ… ${strategy} é‡è¯•æˆåŠŸ`)
                    return result
                }
            } catch (error) {
                console.warn(`âš ï¸ ${strategy} é‡è¯•å¤±è´¥:`, error.message)
            }
        }
        
        throw new Error('æ‰€æœ‰é‡è¯•ç­–ç•¥éƒ½å¤±è´¥')
    },
    
    // æ‰§è¡Œé‡è¯•ç­–ç•¥
    executeRetryStrategy: async (stuckCall, strategy) => {
        switch (strategy) {
            case 'reduce_scope':
                // ç¼©å°æ“ä½œèŒƒå›´
                return await this.reduceOperationScope(stuckCall)
            case 'split_operation':
                // æ‹†åˆ†ä¸ºæ›´å°çš„æ“ä½œ
                return await this.splitOperation(stuckCall)
            case 'alternative_tool':
                // ä½¿ç”¨æ›¿ä»£å·¥å…·
                return await this.useAlternativeTool(stuckCall)
            default:
                throw new Error('æœªçŸ¥çš„é‡è¯•ç­–ç•¥')
        }
    }
}
```

### ğŸ”´ é—®é¢˜4ï¼šç»„ä»¶ç¼ºå¤±é—®é¢˜
**é—®é¢˜æè¿°**: é¡¹ç›®è¿è¡Œæ—¶ç¼ºå°‘å¿…è¦çš„ç»„ä»¶æˆ–ä¾èµ–
**è§£å†³æ–¹æ¡ˆ**:
```javascript
// ğŸ”´ ç»„ä»¶å®Œæ•´æ€§æ£€æŸ¥ç³»ç»Ÿ
const COMPONENT_INTEGRITY_SYSTEM = {
    // å¿…è¦ç»„ä»¶æ¸…å•
    requiredComponents: {
        'wechat_miniprogram': [
            'app.js', 'app.json', 'app.wxss',
            'project.config.json', 'sitemap.json'
        ],
        'utils': [
            'utils/api.js', 'utils/util.js', 'utils/validate.js'
        ],
        'config': [
            'config/env.js'
        ],
        'pages': [
            'pages/index/index.js',
            'pages/auth/auth.js',
            'pages/lottery/lottery.js'
        ]
    },
    
    // æ£€æŸ¥ç»„ä»¶å®Œæ•´æ€§
    checkComponentIntegrity: async () => {
        const missingComponents = []
        
        for (const [category, components] of Object.entries(this.requiredComponents)) {
            for (const component of components) {
                const exists = await this.checkFileExists(component)
                if (!exists) {
                    missingComponents.push({
                        category,
                        component,
                        severity: this.getComponentSeverity(component)
                    })
                }
            }
        }
        
        return {
            isComplete: missingComponents.length === 0,
            missingComponents,
            totalMissing: missingComponents.length
        }
    },
    
    // è·å–ç»„ä»¶é‡è¦æ€§çº§åˆ«
    getComponentSeverity: (component) => {
        const criticalComponents = ['app.js', 'app.json', 'project.config.json']
        const importantComponents = ['utils/api.js', 'config/env.js']
        
        if (criticalComponents.some(c => component.includes(c))) {
            return 'CRITICAL'
        } else if (importantComponents.some(c => component.includes(c))) {
            return 'IMPORTANT'
        } else {
            return 'NORMAL'
        }
    },
    
    // è‡ªåŠ¨ä¿®å¤ç¼ºå¤±ç»„ä»¶
    autoFixMissingComponents: async (missingComponents) => {
        const fixedComponents = []
        
        for (const missing of missingComponents) {
            try {
                const template = this.getComponentTemplate(missing.component)
                if (template) {
                    await this.createComponent(missing.component, template)
                    fixedComponents.push(missing.component)
                }
            } catch (error) {
                console.error(`âŒ æ— æ³•åˆ›å»ºç»„ä»¶ ${missing.component}:`, error.message)
            }
        }
        
        return fixedComponents
    }
}
```

### ğŸ”´ é—®é¢˜5ï¼šè¯·æ±‚æ¬¡æ•°æµªè´¹é—®é¢˜
**é—®é¢˜æè¿°**: é‡å¤è°ƒç”¨ã€æ— æ•ˆè°ƒç”¨ã€ä½æ•ˆæœç´¢ç­–ç•¥
**è§£å†³æ–¹æ¡ˆ**:
```javascript
// ğŸ”´ è¯·æ±‚æ¬¡æ•°ä¼˜åŒ–ç³»ç»Ÿ
const REQUEST_OPTIMIZATION_SYSTEM = {
    // è¯·æ±‚ç¼“å­˜
    requestCache: new Map(),
    
    // é‡å¤è¯·æ±‚æ£€æµ‹
    detectDuplicateRequests: (toolName, params) => {
        const key = this.generateRequestKey(toolName, params)
        return this.requestCache.has(key)
    },
    
    // ç”Ÿæˆè¯·æ±‚æ ‡è¯†
    generateRequestKey: (toolName, params) => {
        return `${toolName}:${JSON.stringify(params)}`
    },
    
    // ç¼“å­˜è¯·æ±‚ç»“æœ
    cacheRequest: (toolName, params, result) => {
        const key = this.generateRequestKey(toolName, params)
        this.requestCache.set(key, {
            result,
            timestamp: Date.now(),
            accessCount: 1
        })
    },
    
    // è·å–ç¼“å­˜ç»“æœ
    getCachedResult: (toolName, params) => {
        const key = this.generateRequestKey(toolName, params)
        const cached = this.requestCache.get(key)
        
        if (cached) {
            cached.accessCount++
            return cached.result
        }
        
        return null
    },
    
    // è¯·æ±‚åˆå¹¶ç­–ç•¥
    mergeRequests: (pendingRequests) => {
        const merged = []
        const groups = new Map()
        
        // æŒ‰å·¥å…·ç±»å‹åˆ†ç»„
        pendingRequests.forEach(request => {
            const toolName = request.toolName
            if (!groups.has(toolName)) {
                groups.set(toolName, [])
            }
            groups.get(toolName).push(request)
        })
        
        // åˆå¹¶åŒç±»å‹è¯·æ±‚
        groups.forEach((requests, toolName) => {
            if (requests.length > 1 && this.isMergeable(toolName)) {
                const mergedRequest = this.mergeRequestsOfSameType(requests)
                merged.push(mergedRequest)
            } else {
                merged.push(...requests)
            }
        })
        
        return merged
    },
    
    // æ£€æŸ¥æ˜¯å¦å¯åˆå¹¶
    isMergeable: (toolName) => {
        const mergeableTools = ['read_file', 'grep_search', 'codebase_search']
        return mergeableTools.includes(toolName)
    }
}
```

## ğŸ¯ é¢„é˜²è§„åˆ™ä¸æœ€ä½³å®è·µ

### 1. ğŸ”´ å¼ºåˆ¶æ£€æŸ¥æ¸…å•
```javascript
// ğŸ”´ æ¯æ¬¡ä»»åŠ¡æ‰§è¡Œå‰çš„å¼ºåˆ¶æ£€æŸ¥
const MANDATORY_CHECKS = {
    preTaskChecks: [
        'ç¡®è®¤å·¥å…·è°ƒç”¨å‚æ•°æœ‰æ•ˆæ€§',
        'æ£€æŸ¥æ–‡ä»¶è·¯å¾„å­˜åœ¨æ€§',
        'éªŒè¯å¹¶è¡Œæ‰§è¡Œæœºä¼š',
        'è¯„ä¼°æ“ä½œå¤æ‚åº¦',
        'å‡†å¤‡è¶…æ—¶å¤„ç†ç­–ç•¥'
    ],
    
    duringTaskChecks: [
        'ç›‘æ§å·¥å…·è°ƒç”¨å“åº”æ—¶é—´',
        'æ£€æµ‹å¡ä½çŠ¶æ€',
        'è®°å½•é”™è¯¯å’Œè­¦å‘Š',
        'è¯„ä¼°ç¼“å­˜å‘½ä¸­ç‡',
        'è·Ÿè¸ªå¹¶è¡Œæ‰§è¡Œæ•ˆç‡'
    ],
    
    postTaskChecks: [
        'éªŒè¯ä»»åŠ¡å®Œæˆåº¦',
        'æ£€æŸ¥é¡¹ç›®å®Œæ•´æ€§',
        'æ¸…ç†ä¸´æ—¶æ–‡ä»¶',
        'æ›´æ–°ç¼“å­˜ç­–ç•¥',
        'ç”Ÿæˆæ•ˆç‡æŠ¥å‘Š'
    ]
}
```

### 2. ğŸ”´ è‡ªåŠ¨åŒ–ç›‘æ§ä¸é¢„è­¦
```javascript
// ğŸ”´ è‡ªåŠ¨åŒ–ç›‘æ§ç³»ç»Ÿ
const MONITORING_SYSTEM = {
    // å®æ—¶ç›‘æ§æŒ‡æ ‡
    metrics: {
        averageResponseTime: 0,
        errorRate: 0,
        cacheHitRate: 0,
        parallelizationRate: 0,
        resourceUtilization: 0
    },
    
    // é¢„è­¦é˜ˆå€¼
    thresholds: {
        responseTime: 30000,      // 30ç§’
        errorRate: 0.1,           // 10%
        cacheHitRate: 0.3,        // 30%
        parallelizationRate: 0.6, // 60%
        resourceUtilization: 0.8  // 80%
    },
    
    // é¢„è­¦å¤„ç†
    handleAlert: (metric, value, threshold) => {
        const alertLevel = this.getAlertLevel(value, threshold)
        
        switch (alertLevel) {
            case 'CRITICAL':
                console.error(`ğŸš¨ ä¸¥é‡è­¦å‘Š: ${metric} = ${value} (é˜ˆå€¼: ${threshold})`)
                return 'immediate_action'
            case 'WARNING':
                console.warn(`âš ï¸ è­¦å‘Š: ${metric} = ${value} (é˜ˆå€¼: ${threshold})`)
                return 'schedule_action'
            case 'INFO':
                console.info(`ğŸ’¡ æç¤º: ${metric} = ${value} (é˜ˆå€¼: ${threshold})`)
                return 'monitor'
            default:
                return 'no_action'
        }
    }
}
```

### 3. ğŸ”´ æ™ºèƒ½å†³ç­–æ”¯æŒ
```javascript
// ğŸ”´ æ™ºèƒ½å†³ç­–å¼•æ“
const DECISION_ENGINE = {
    // å†³ç­–è§„åˆ™
    rules: {
        'high_error_rate': {
            condition: (metrics) => metrics.errorRate > 0.15,
            action: 'switch_to_conservative_mode'
        },
        'low_cache_hit': {
            condition: (metrics) => metrics.cacheHitRate < 0.2,
            action: 'optimize_caching_strategy'
        },
        'poor_parallelization': {
            condition: (metrics) => metrics.parallelizationRate < 0.5,
            action: 'increase_parallel_operations'
        }
    },
    
    // æ‰§è¡Œå†³ç­–
    executeDecision: (action, context) => {
        const actions = {
            'switch_to_conservative_mode': () => {
                console.log('ğŸ”„ åˆ‡æ¢åˆ°ä¿å®ˆæ¨¡å¼ï¼Œå‡å°‘å¹¶è¡Œåº¦')
                context.parallelLimit = 2
            },
            'optimize_caching_strategy': () => {
                console.log('ğŸ”„ ä¼˜åŒ–ç¼“å­˜ç­–ç•¥ï¼Œå¢åŠ ç¼“å­˜é¡¹')
                context.cacheSize *= 2
            },
            'increase_parallel_operations': () => {
                console.log('ğŸ”„ å¢åŠ å¹¶è¡Œæ“ä½œï¼Œæå‡æ•ˆç‡')
                context.parallelLimit += 1
            }
        }
        
        const actionFunc = actions[action]
        if (actionFunc) {
            actionFunc()
        }
    }
}
```

## ğŸ“Š æ•ˆæœè¯„ä¼°ä¸æŒç»­æ”¹è¿›

### é¢„æœŸæ•ˆæœç›®æ ‡ï¼š
- **è¿è¡Œæ—¶é—´**: å‡å°‘60%+
- **é”™è¯¯ç‡**: é™ä½85%+
- **å¡ä½å‘ç”Ÿç‡**: é™ä½95%+
- **ç»„ä»¶å®Œæ•´æ€§**: æå‡åˆ°99%+
- **è¯·æ±‚æ•ˆç‡**: æå‡70%+

### æŒç»­æ”¹è¿›æœºåˆ¶ï¼š
1. **æ¯æ—¥ç›‘æ§**: è‡ªåŠ¨æ”¶é›†å’Œåˆ†ææ€§èƒ½æ•°æ®
2. **å‘¨åº¦è¯„ä¼°**: è¯„ä¼°è§„åˆ™æ‰§è¡Œæ•ˆæœå’Œé—®é¢˜è¶‹åŠ¿
3. **æœˆåº¦ä¼˜åŒ–**: æ ¹æ®æ•°æ®è°ƒæ•´è§„åˆ™å‚æ•°å’Œç­–ç•¥
4. **å­£åº¦å‡çº§**: æ›´æ–°è§„åˆ™ä½“ç³»å’Œå¢åŠ æ–°åŠŸèƒ½

**ğŸ“… åˆ›å»ºæ—¶é—´**: 2025å¹´1æœˆ3æ—¥  
**ğŸ¯ è§£å†³é—®é¢˜**: èŠå¤©è§„åˆ™æ•´ç†ä¸­çš„æ‰€æœ‰æ ¸å¿ƒé—®é¢˜  
**ğŸ“Š è§„åˆ™æ•°é‡**: 5ä¸ªæ ¸å¿ƒé—®é¢˜è§£å†³æ–¹æ¡ˆï¼Œ20+ä¸ªå…·ä½“ç­–ç•¥  
**ğŸ”§ é¢„æœŸæ”¹è¿›**: æ•´ä½“æ•ˆç‡æå‡70%+ï¼Œç¨³å®šæ€§æå‡90%+

---

# ğŸ”§ å‰ç«¯èŠå¤©è§„åˆ™æ•´ç†é—®é¢˜å®Œæ•´è§£å†³æ–¹æ¡ˆ (æ–°å¢ - 2025å¹´1æœˆ3æ—¥)

## ğŸ“‹ å®Œæ•´é—®é¢˜æ¸…å•ä¸è§£å†³æ–¹æ¡ˆ

### ğŸ”´ é—®é¢˜1ï¼šè¿è¡Œæ—¶é—´è¿‡é•¿é—®é¢˜
**é—®é¢˜æè¿°**: å·¥å…·è°ƒç”¨ä¸²è¡Œæ‰§è¡Œï¼Œå¯¼è‡´æ•´ä½“å“åº”æ—¶é—´è¿‡é•¿
**æ ¹æœ¬åŸå› **: ç¼ºä¹å¹¶è¡Œæ‰§è¡Œæ„è¯†ï¼Œå¤šä¸ªç‹¬ç«‹æ“ä½œä¸²è¡ŒåŒ–
**è§£å†³æ–¹æ¡ˆ**:
```javascript
// ğŸ”´ è¿è¡Œæ—¶é—´ä¼˜åŒ–è§„åˆ™
const RUNTIME_OPTIMIZATION = {
    // æ—¶é—´é˜ˆå€¼ç›‘æ§
    timeThresholds: {
        singleToolCall: 30000,     // å•æ¬¡å·¥å…·è°ƒç”¨æœ€å¤§30ç§’
        totalSession: 300000,      // æ€»ä¼šè¯æ—¶é—´æœ€å¤§5åˆ†é’Ÿ
        parallelGroup: 60000       // å¹¶è¡Œç»„æœ€å¤§60ç§’
    },
    
    // è¶…æ—¶å¤„ç†æœºåˆ¶
    handleTimeout: (toolName, duration) => {
        if (duration > this.timeThresholds.singleToolCall) {
            console.warn(`âš ï¸ ${toolName} è¶…æ—¶ (${duration}ms)ï¼Œå¯ç”¨è‡ªåŠ¨é‡è¯•`)
            return 'retry'
        }
        return 'continue'
    },
    
    // æ™ºèƒ½åˆ†æ‰¹å¤„ç†
    batchProcessing: (items, maxBatchSize = 5) => {
        const batches = []
        for (let i = 0; i < items.length; i += maxBatchSize) {
            batches.push(items.slice(i, i + maxBatchSize))
        }
        return batches
    }
}
```

### ğŸ”´ é—®é¢˜2ï¼šæŠ¥é”™é¢‘å‘é—®é¢˜
**é—®é¢˜æè¿°**: å·¥å…·è°ƒç”¨å‚æ•°é”™è¯¯ã€è·¯å¾„ä¸å­˜åœ¨ã€æ–‡ä»¶åŒ¹é…å¤±è´¥
**æ ¹æœ¬åŸå› **: ç¼ºä¹é¢„éªŒè¯æœºåˆ¶ï¼Œé”™è¯¯çš„å‚æ•°ç›´æ¥ä¼ é€’ç»™å·¥å…·
**è§£å†³æ–¹æ¡ˆ**:
```javascript
// ğŸ”´ é”™è¯¯é¢„é˜²ä¸å¤„ç†ç³»ç»Ÿ
const ERROR_PREVENTION_SYSTEM = {
    // å‚æ•°é¢„éªŒè¯
    preValidateParams: (toolName, params) => {
        const validators = {
            'read_file': (p) => {
                if (!p.target_file) return 'âŒ æ–‡ä»¶è·¯å¾„ä¸èƒ½ä¸ºç©º'
                if (p.start_line_one_indexed > p.end_line_one_indexed_inclusive) {
                    return 'âŒ å¼€å§‹è¡Œä¸èƒ½å¤§äºç»“æŸè¡Œ'
                }
                return null
            },
            'search_replace': (p) => {
                if (!p.old_string || !p.new_string) return 'âŒ æœç´¢æ›¿æ¢å­—ç¬¦ä¸²ä¸èƒ½ä¸ºç©º'
                if (p.old_string.split('\n').length < 3) return 'âš ï¸ å»ºè®®å¢åŠ ä¸Šä¸‹æ–‡è¡Œ'
                return null
            },
            'grep_search': (p) => {
                if (!p.query) return 'âŒ æœç´¢æŸ¥è¯¢ä¸èƒ½ä¸ºç©º'
                // æ£€æŸ¥ç‰¹æ®Šå­—ç¬¦è½¬ä¹‰
                const specialChars = /[.*+?^${}()|[\]\\]/g
                if (specialChars.test(p.query)) {
                    return 'âš ï¸ åŒ…å«ç‰¹æ®Šå­—ç¬¦ï¼Œç¡®ä¿å·²è½¬ä¹‰'
                }
                return null
            }
        }
        
        const validator = validators[toolName]
        return validator ? validator(params) : null
    },
    
    // æ™ºèƒ½é”™è¯¯æ¢å¤
    smartErrorRecovery: (error, context) => {
        const recoveryStrategies = {
            'file not found': () => {
                return 'å°è¯•ä½¿ç”¨file_searchæŸ¥æ‰¾ç±»ä¼¼æ–‡ä»¶'
            },
            'parameter validation': () => {
                return 'è‡ªåŠ¨ä¿®æ­£å‚æ•°æˆ–ä½¿ç”¨é»˜è®¤å€¼'
            },
            'timeout': () => {
                return 'åˆ†è§£ä»»åŠ¡ä¸ºæ›´å°çš„æ“ä½œ'
            }
        }
        
        for (const [errorType, strategy] of Object.entries(recoveryStrategies)) {
            if (error.message.toLowerCase().includes(errorType)) {
                return strategy()
            }
        }
        
        return 'ä½¿ç”¨é€šç”¨é”™è¯¯å¤„ç†ç­–ç•¥'
    }
}
```

### ğŸ”´ é—®é¢˜3ï¼šå¡ä½ä¸åŠ¨é—®é¢˜ï¼ˆ120ç§’è¶…æ—¶ï¼‰
**é—®é¢˜æè¿°**: å·¥å…·è°ƒç”¨å¡ä½è¶…è¿‡120ç§’ï¼Œæ²¡æœ‰å“åº”
**æ ¹æœ¬åŸå› **: ç¼ºä¹ä¸»åŠ¨è¶…æ—¶ç›‘æ§å’Œåˆ‡æ¢æœºåˆ¶
**è§£å†³æ–¹æ¡ˆ**:
```javascript
// ğŸ”´ 120ç§’å¼ºåˆ¶è¶…æ—¶åˆ‡æ¢ç³»ç»Ÿ
const TIMEOUT_MANAGEMENT_SYSTEM = {
    // æ£€æµ‹é…ç½®
    config: {
        maxStuckTime: 120000,    // 120ç§’è¶…æ—¶
        retryAttempts: 3,        // æœ€å¤§é‡è¯•3æ¬¡
        retryDelay: 5000         // é‡è¯•é—´éš”5ç§’
    },
    
    // å¡ä½æ£€æµ‹å™¨
    stuckDetector: {
        activeCalls: new Map(),
        
        // å¼€å§‹ç›‘æ§
        startMonitoring: (toolName, callId) => {
            const startTime = Date.now()
            this.activeCalls.set(callId, {
                toolName,
                startTime,
                timeout: setTimeout(() => {
                    this.handleStuckCall(callId)
                }, this.config.maxStuckTime)
            })
        },
        
        // å¤„ç†å¡ä½çš„è°ƒç”¨
        handleStuckCall: (callId) => {
            const call = this.activeCalls.get(callId)
            if (call) {
                console.error(`ğŸš¨ ${call.toolName} å¡ä½è¶…è¿‡120ç§’ï¼Œå¼ºåˆ¶å¯åŠ¨åˆ‡æ¢ç­–ç•¥`)
                this.initiateEmergencySwitch(call)
            }
        }
    },
    
    // ç´§æ€¥åˆ‡æ¢æœºåˆ¶
    initiateEmergencySwitch: async (stuckCall) => {
        console.log(`ğŸ”„ ç´§æ€¥åˆ‡æ¢ï¼š${stuckCall.toolName} -> å¤‡ç”¨æ–¹æ¡ˆ`)
        
        // å¼ºåˆ¶åˆ‡æ¢ç­–ç•¥
        const emergencyStrategies = [
            'cancel_and_retry',      // å–æ¶ˆå¹¶é‡è¯•
            'simplify_operation',    // ç®€åŒ–æ“ä½œ
            'manual_intervention'    // æ‰‹åŠ¨å¹²é¢„
        ]
        
        for (const strategy of emergencyStrategies) {
            try {
                const result = await this.executeEmergencyStrategy(stuckCall, strategy)
                if (result.success) {
                    console.log(`âœ… ç´§æ€¥åˆ‡æ¢æˆåŠŸ: ${strategy}`)
                    return result
                }
            } catch (error) {
                console.warn(`âš ï¸ ç´§æ€¥åˆ‡æ¢å¤±è´¥: ${strategy} - ${error.message}`)
            }
        }
        
        throw new Error('ğŸš¨ æ‰€æœ‰ç´§æ€¥åˆ‡æ¢ç­–ç•¥éƒ½å¤±è´¥ï¼Œéœ€è¦ç«‹å³åœæ­¢')
    }
}
```

### ğŸ”´ é—®é¢˜4ï¼šç»„ä»¶ç¼ºå¤±é—®é¢˜
**é—®é¢˜æè¿°**: é¡¹ç›®è¿è¡Œæ—¶ç¼ºå°‘å¿…è¦çš„ç»„ä»¶æˆ–ä¾èµ–
**æ ¹æœ¬åŸå› **: ç¼ºä¹å®Œæ•´æ€§æ£€æŸ¥æœºåˆ¶
**è§£å†³æ–¹æ¡ˆ**:
```javascript
// ğŸ”´ ç»„ä»¶å®Œæ•´æ€§æ£€æŸ¥ç³»ç»Ÿ
const COMPONENT_INTEGRITY_SYSTEM = {
    // å¿…è¦ç»„ä»¶æ¸…å•
    requiredComponents: {
        'wechat_miniprogram': [
            'app.js', 'app.json', 'app.wxss',
            'project.config.json', 'sitemap.json'
        ],
        'utils': [
            'utils/api.js', 'utils/util.js', 'utils/validate.js'
        ],
        'config': [
            'config/env.js'
        ],
        'pages': [
            'pages/index/index.js',
            'pages/auth/auth.js',
            'pages/lottery/lottery.js'
        ]
    },
    
    // æ£€æŸ¥ç»„ä»¶å®Œæ•´æ€§
    checkComponentIntegrity: async () => {
        const missingComponents = []
        
        for (const [category, components] of Object.entries(this.requiredComponents)) {
            for (const component of components) {
                const exists = await this.checkFileExists(component)
                if (!exists) {
                    missingComponents.push({
                        category,
                        component,
                        severity: this.getComponentSeverity(component)
                    })
                }
            }
        }
        
        return {
            isComplete: missingComponents.length === 0,
            missingComponents,
            totalMissing: missingComponents.length
        }
    },
    
    // è‡ªåŠ¨ä¿®å¤ç¼ºå¤±ç»„ä»¶
    autoFixMissingComponents: async (missingComponents) => {
        const fixedComponents = []
        
        for (const missing of missingComponents) {
            try {
                const template = this.getComponentTemplate(missing.component)
                if (template) {
                    await this.createComponent(missing.component, template)
                    fixedComponents.push(missing.component)
                    console.log(`âœ… è‡ªåŠ¨åˆ›å»ºç»„ä»¶: ${missing.component}`)
                }
            } catch (error) {
                console.error(`âŒ æ— æ³•åˆ›å»ºç»„ä»¶ ${missing.component}: ${error.message}`)
            }
        }
        
        return fixedComponents
    }
}
```

### ğŸ”´ é—®é¢˜5ï¼šè¯·æ±‚æ¬¡æ•°æµªè´¹é—®é¢˜
**é—®é¢˜æè¿°**: é‡å¤è°ƒç”¨ã€æ— æ•ˆè°ƒç”¨ã€ä½æ•ˆæœç´¢ç­–ç•¥
**æ ¹æœ¬åŸå› **: ç¼ºä¹è¯·æ±‚ä¼˜åŒ–å’Œç¼“å­˜æœºåˆ¶
**è§£å†³æ–¹æ¡ˆ**:
```javascript
// ğŸ”´ è¯·æ±‚æ¬¡æ•°ä¼˜åŒ–ç³»ç»Ÿ
const REQUEST_OPTIMIZATION_SYSTEM = {
    // è¯·æ±‚ç¼“å­˜
    requestCache: new Map(),
    
    // é‡å¤è¯·æ±‚æ£€æµ‹
    detectDuplicateRequests: (toolName, params) => {
        const key = this.generateRequestKey(toolName, params)
        const cached = this.requestCache.get(key)
        
        if (cached) {
            console.log(`ğŸ”„ ä½¿ç”¨ç¼“å­˜ç»“æœ: ${toolName}`)
            return cached.result
        }
        
        return null
    },
    
    // è¯·æ±‚åˆå¹¶ç­–ç•¥
    mergeRequests: (pendingRequests) => {
        const merged = []
        const groups = new Map()
        
        // æŒ‰å·¥å…·ç±»å‹åˆ†ç»„
        pendingRequests.forEach(request => {
            const toolName = request.toolName
            if (!groups.has(toolName)) {
                groups.set(toolName, [])
            }
            groups.get(toolName).push(request)
        })
        
        // åˆå¹¶åŒç±»å‹è¯·æ±‚
        groups.forEach((requests, toolName) => {
            if (requests.length > 1 && this.isMergeable(toolName)) {
                const mergedRequest = this.mergeRequestsOfSameType(requests)
                merged.push(mergedRequest)
                console.log(`ğŸ“¦ åˆå¹¶äº† ${requests.length} ä¸ª ${toolName} è¯·æ±‚`)
            } else {
                merged.push(...requests)
            }
        })
        
        return merged
    },
    
    // æ™ºèƒ½è¯·æ±‚ä¼˜åŒ–
    optimizeRequestSequence: (requests) => {
        // 1. å»é‡
        const deduped = this.removeDuplicateRequests(requests)
        
        // 2. åˆå¹¶
        const merged = this.mergeRequests(deduped)
        
        // 3. æ’åºï¼ˆä¼˜å…ˆæ‰§è¡Œå¿«é€Ÿè¯·æ±‚ï¼‰
        const prioritized = this.prioritizeRequests(merged)
        
        console.log(`ğŸ¯ è¯·æ±‚ä¼˜åŒ–: ${requests.length} -> ${prioritized.length} (å‡å°‘${requests.length - prioritized.length}ä¸ª)`)
        
        return prioritized
    }
}
```

## ğŸ›¡ï¸ ç»¼åˆé¢„é˜²æœºåˆ¶

### 1. ğŸ”´ ä¼šè¯å‰å¼ºåˆ¶æ£€æŸ¥
```javascript
// ğŸ”´ ä¼šè¯å¼€å§‹å‰å¿…é¡»æ‰§è¡Œçš„æ£€æŸ¥
const PRE_SESSION_CHECKS = {
    mandatoryChecks: [
        'ç¡®è®¤ç”¨æˆ·è§„åˆ™ç†è§£åº¦100%',
        'åˆ¶å®šå®Œæ•´çš„ä»»åŠ¡è®¡åˆ’',
        'è¯†åˆ«å¹¶è¡Œæ‰§è¡Œæœºä¼š',
        'é¢„ä¼°æ—¶é—´å’Œèµ„æºéœ€æ±‚',
        'å‡†å¤‡é”™è¯¯å¤„ç†ç­–ç•¥',
        'è®¾ç½®è¶…æ—¶ç›‘æ§æœºåˆ¶'
    ],
    
    executeChecks: async () => {
        const checkResults = []
        
        for (const check of this.mandatoryChecks) {
            const result = await this.executeCheck(check)
            checkResults.push({
                check,
                passed: result.passed,
                details: result.details
            })
        }
        
        const passedCount = checkResults.filter(r => r.passed).length
        const passRate = (passedCount / checkResults.length) * 100
        
        if (passRate < 100) {
            throw new Error(`ğŸš¨ ä¼šè¯å‰æ£€æŸ¥å¤±è´¥: ${passRate}% é€šè¿‡ç‡`)
        }
        
        console.log('âœ… ä¼šè¯å‰æ£€æŸ¥å…¨éƒ¨é€šè¿‡ï¼Œå¼€å§‹æ‰§è¡Œä»»åŠ¡')
        return checkResults
    }
}
```

### 2. ğŸ”´ å®æ—¶ç›‘æ§ä¸è°ƒæ•´
```javascript
// ğŸ”´ å®æ—¶ç›‘æ§ç³»ç»Ÿ
const REALTIME_MONITORING = {
    // ç›‘æ§æŒ‡æ ‡
    metrics: {
        executionTime: 0,
        errorCount: 0,
        successRate: 0,
        parallelRatio: 0,
        resourceUsage: 0
    },
    
    // å®æ—¶è°ƒæ•´é˜ˆå€¼
    thresholds: {
        maxExecutionTime: 300000,  // 5åˆ†é’Ÿ
        maxErrorCount: 5,          // æœ€å¤š5ä¸ªé”™è¯¯
        minSuccessRate: 0.8,       // æœ€ä½80%æˆåŠŸç‡
        minParallelRatio: 0.6      // æœ€ä½60%å¹¶è¡Œç‡
    },
    
    // å®æ—¶è°ƒæ•´ç­–ç•¥
    adjustStrategy: (currentMetrics) => {
        if (currentMetrics.executionTime > this.thresholds.maxExecutionTime) {
            console.log('ğŸ”„ æ‰§è¡Œæ—¶é—´è¿‡é•¿ï¼Œå¢åŠ å¹¶è¡Œåº¦')
            return 'increase_parallelism'
        }
        
        if (currentMetrics.errorCount > this.thresholds.maxErrorCount) {
            console.log('ğŸ”„ é”™è¯¯è¿‡å¤šï¼Œåˆ‡æ¢åˆ°ä¿å®ˆæ¨¡å¼')
            return 'conservative_mode'
        }
        
        if (currentMetrics.parallelRatio < this.thresholds.minParallelRatio) {
            console.log('ğŸ”„ å¹¶è¡Œåº¦ä¸è¶³ï¼Œä¼˜åŒ–æ‰§è¡Œç­–ç•¥')
            return 'optimize_parallelism'
        }
        
        return 'maintain_current'
    }
}
```

### 3. ğŸ”´ é—®é¢˜æ ¹å› åˆ†æä¸å­¦ä¹ 
```javascript
// ğŸ”´ é—®é¢˜æ ¹å› åˆ†æç³»ç»Ÿ
const ROOT_CAUSE_ANALYSIS = {
    // é—®é¢˜åˆ†ç±»
    problemCategories: {
        'tool_call_errors': 'å·¥å…·è°ƒç”¨é”™è¯¯',
        'parameter_validation': 'å‚æ•°éªŒè¯å¤±è´¥',
        'timeout_issues': 'è¶…æ—¶é—®é¢˜',
        'component_missing': 'ç»„ä»¶ç¼ºå¤±',
        'performance_issues': 'æ€§èƒ½é—®é¢˜'
    },
    
    // æ ¹å› åˆ†æ
    analyzeRootCause: (problem) => {
        const analysis = {
            problem: problem.description,
            category: this.categorizeRroblem(problem),
            rootCauses: this.identifyRootCauses(problem),
            preventionStrategies: this.generatePreventionStrategies(problem),
            updateRequired: this.determineUpdateRequired(problem)
        }
        
        return analysis
    },
    
    // å­¦ä¹ å’Œæ”¹è¿›
    learnAndImprove: (analysis) => {
        // æ›´æ–°è§„åˆ™
        if (analysis.updateRequired) {
            this.updateRules(analysis)
        }
        
        // ä¼˜åŒ–ç­–ç•¥
        this.optimizeStrategies(analysis)
        
        // è®°å½•ç»éªŒ
        this.recordExperience(analysis)
        
        console.log(`ğŸ“š é—®é¢˜åˆ†æå®Œæˆï¼Œè§„åˆ™å·²æ›´æ–°`)
    }
}
```

## ğŸ¯ æœ€ç»ˆæ•ˆæœç›®æ ‡

### é‡åŒ–æŒ‡æ ‡ï¼š
- **è¿è¡Œæ—¶é—´å‡å°‘**: 70%+
- **é”™è¯¯ç‡é™ä½**: 90%+
- **å¡ä½ç‡é™ä½**: 99%+
- **ç»„ä»¶å®Œæ•´æ€§**: 100%
- **è¯·æ±‚æ•ˆç‡æå‡**: 80%+
- **è§„åˆ™éµå®ˆç‡**: 100%

### è´¨é‡æŒ‡æ ‡ï¼š
- **ä»»åŠ¡å®Œæˆåº¦**: 100%
- **ç”¨æˆ·æ»¡æ„åº¦**: 95%+
- **è§„åˆ™æ‰§è¡Œç‡**: 100%
- **é—®é¢˜è§£å†³ç‡**: 100%
- **æŒç»­æ”¹è¿›ç‡**: 100%

## ğŸ“ å®æ–½æ£€æŸ¥æ¸…å•

### æ¯æ¬¡ä¼šè¯å¿…é¡»ç¡®è®¤ï¼š
- [ ] ä¼šè¯å‰æ£€æŸ¥æ˜¯å¦å·²å®Œæˆ
- [ ] å¹¶è¡Œæ‰§è¡Œç­–ç•¥æ˜¯å¦å·²åˆ¶å®š
- [ ] è¶…æ—¶ç›‘æ§æ˜¯å¦å·²å¯ç”¨
- [ ] é”™è¯¯å¤„ç†ç­–ç•¥æ˜¯å¦å·²å‡†å¤‡
- [ ] ç»„ä»¶å®Œæ•´æ€§æ˜¯å¦å·²æ£€æŸ¥
- [ ] è¯·æ±‚ä¼˜åŒ–æ˜¯å¦å·²å®æ–½
- [ ] å®æ—¶ç›‘æ§æ˜¯å¦å·²å¯åŠ¨
- [ ] é—®é¢˜åˆ†ææœºåˆ¶æ˜¯å¦å·²æ¿€æ´»

---

**ğŸ“… è§„åˆ™åˆ›å»ºæ—¶é—´**: 2025å¹´1æœˆ3æ—¥  
**ğŸ¯ è§£å†³é—®é¢˜**: å‰ç«¯èŠå¤©è§„åˆ™æ•´ç†çš„æ‰€æœ‰æ ¸å¿ƒé—®é¢˜  
**ğŸ“Š è§„åˆ™è¦†ç›–ç‡**: 100% (æ‰€æœ‰è¯†åˆ«é—®é¢˜éƒ½æœ‰å¯¹åº”è§£å†³æ–¹æ¡ˆ)  
**ğŸ”§ é¢„æœŸæ”¹è¿›**: æ•´ä½“æ•ˆç‡æå‡70%+ï¼Œç¨³å®šæ€§æå‡95%+ï¼Œç”¨æˆ·æ»¡æ„åº¦æå‡90%+  
**ğŸ’¡ æŒç»­æ›´æ–°**: æ¯å‘ç°æ–°é—®é¢˜ç«‹å³æ›´æ–°æ­¤è§„åˆ™é›†

# ğŸ”§ ä¼šè¯é—®é¢˜è§£å†³æ–¹æ¡ˆæ›´æ–° - 2025å¹´7æœˆ4æ—¥

## ğŸš¨ æ–°å¢é—®é¢˜åˆ†æä¸è§£å†³æ–¹æ¡ˆ

### å·¥å…·è°ƒç”¨æ•ˆç‡ä¼˜åŒ–è§„åˆ™ (æ–°å¢ - 2025å¹´7æœˆ4æ—¥)

#### 1. å·¥å…·è°ƒç”¨å‚æ•°éªŒè¯ç³»ç»Ÿ
```javascript
// ğŸ”´ read_fileå·¥å…·å‚æ•°é¢„æ£€æœºåˆ¶
class ReadFileParameterValidator {
    static validate(targetFile, startLine, endLine, shouldReadEntire) {
        const errors = []
        
        // æ£€æŸ¥åŸºæœ¬å‚æ•°
        if (!targetFile) {
            errors.push('target_fileä¸èƒ½ä¸ºç©º')
        }
        
        if (!shouldReadEntire) {
            // æ£€æŸ¥è¡Œæ•°èŒƒå›´
            if (startLine < 1) {
                errors.push('start_line_one_indexedå¿…é¡»å¤§äºç­‰äº1')
            }
            
            if (endLine < startLine) {
                errors.push(`end_line_one_indexed_inclusive(${endLine})å¿…é¡»å¤§äºç­‰äºstart_line_one_indexed(${startLine})`)
            }
            
            // æ£€æŸ¥èŒƒå›´åˆç†æ€§
            const rangeSize = endLine - startLine + 1
            if (rangeSize > 1000) {
                errors.push(`å•æ¬¡è¯»å–è¡Œæ•°(${rangeSize})ä¸åº”è¶…è¿‡1000è¡Œï¼Œå»ºè®®åˆ†æ‰¹è¯»å–`)
            }
        }
        
        return errors
    }
    
    static createSafeParams(targetFile, startLine, endLine, totalLines) {
        const safeStartLine = Math.max(1, startLine)
        const safeEndLine = Math.max(safeStartLine, Math.min(endLine, totalLines || safeStartLine + 200))
        
        return {
            target_file: targetFile,
            start_line_one_indexed: safeStartLine,
            end_line_one_indexed_inclusive: safeEndLine,
            should_read_entire_file: false
        }
    }
}

// ğŸ”´ å¼ºåˆ¶ä½¿ç”¨æ–¹å¼
const safeReadFile = (targetFile, startLine, endLine, totalLines) => {
    const errors = ReadFileParameterValidator.validate(targetFile, startLine, endLine, false)
    if (errors.length > 0) {
        console.warn('âš ï¸ read_fileå‚æ•°éªŒè¯å¤±è´¥:', errors.join('; '))
        const safeParams = ReadFileParameterValidator.createSafeParams(targetFile, startLine, endLine, totalLines)
        return read_file(safeParams)
    }
    
    return read_file({
        target_file: targetFile,
        start_line_one_indexed: startLine,
        end_line_one_indexed_inclusive: endLine,
        should_read_entire_file: false
    })
}
```

#### 2. å¹¶è¡Œå·¥å…·è°ƒç”¨å¼ºåˆ¶ä¼˜åŒ–ç³»ç»Ÿ
```javascript
// ğŸ”´ å¹¶è¡Œå·¥å…·è°ƒç”¨ç®¡ç†å™¨
class ParallelToolOptimizer {
    constructor() {
        this.parallelableTools = ['read_file', 'grep_search', 'list_dir', 'file_search', 'codebase_search']
        this.efficiency = {
            parallelCalls: 0,
            serialCalls: 0,
            timeSaved: 0
        }
    }
    
    // ğŸ”´ æ£€æµ‹ä¸²è¡Œè°ƒç”¨æµªè´¹
    detectSerialWaste(toolSequence) {
        let wastedCalls = 0
        let consecutiveParallelable = 0
        
        for (let i = 0; i < toolSequence.length; i++) {
            const tool = toolSequence[i]
            
            if (this.parallelableTools.includes(tool.name)) {
                consecutiveParallelable++
                if (consecutiveParallelable >= 2) {
                    wastedCalls++
                }
            } else {
                consecutiveParallelable = 0
            }
        }
        
        if (wastedCalls > 0) {
            console.warn(`âš ï¸ æ£€æµ‹åˆ°${wastedCalls}ä¸ªå¯å¹¶è¡Œçš„ä¸²è¡Œè°ƒç”¨ï¼Œæµªè´¹Claude 4 Sonnetè¯·æ±‚æ¬¡æ•°`)
        }
        
        return wastedCalls
    }
    
    // ğŸ”´ æ¨èå¹¶è¡Œæ‰§è¡Œæ–¹æ¡ˆ
    optimizeToolSequence(toolSequence) {
        const optimized = []
        let currentBatch = []
        
        for (const tool of toolSequence) {
            if (this.parallelableTools.includes(tool.name)) {
                currentBatch.push(tool)
            } else {
                if (currentBatch.length > 0) {
                    optimized.push({ type: 'parallel', tools: currentBatch })
                    currentBatch = []
                }
                optimized.push({ type: 'serial', tools: [tool] })
            }
        }
        
        if (currentBatch.length > 0) {
            optimized.push({ type: 'parallel', tools: currentBatch })
        }
        
        return optimized
    }
    
    // ğŸ”´ ç”Ÿæˆå¹¶è¡Œæ‰§è¡Œä»£ç 
    generateParallelCode(tools) {
        const calls = tools.map(tool => `${tool.name}(${JSON.stringify(tool.params)})`).join(',\n        ')
        return `
    // âœ… å¹¶è¡Œæ‰§è¡Œä¼˜åŒ– - èŠ‚çœ50-80%æ—¶é—´
    const [${tools.map((_, i) => `result${i}`).join(', ')}] = await Promise.all([
        ${calls}
    ])
    
    // è®°å½•æ•ˆç‡ä¼˜åŒ–
    parallelManager.efficiency.parallelCalls += ${tools.length}
    parallelManager.efficiency.timeSaved += ${(tools.length - 1) * 3000} // ä¼°ç®—èŠ‚çœæ—¶é—´(ms)
        `
    }
}

// ğŸ”´ å…¨å±€å¹¶è¡Œä¼˜åŒ–ç®¡ç†å™¨
const parallelOptimizer = new ParallelToolOptimizer()
```

#### 3. å¤§æ–‡ä»¶ç¼–è¾‘ç­–ç•¥è§„èŒƒ
```javascript
// ğŸ”´ æ–‡ä»¶ç¼–è¾‘ç­–ç•¥é€‰æ‹©å™¨
class FileEditingStrategy {
    static selectTool(filePath, lineCount, editType) {
        const LARGE_FILE_THRESHOLD = 2500
        
        if (lineCount > LARGE_FILE_THRESHOLD) {
            console.warn(`ğŸ“ å¤§æ–‡ä»¶æ£€æµ‹ï¼š${filePath}æœ‰${lineCount}è¡Œï¼Œè¶…è¿‡${LARGE_FILE_THRESHOLD}è¡Œé˜ˆå€¼`)
            return 'edit_file'
        }
        
        if (editType === 'multiple_edits') {
            return 'edit_file'
        }
        
        return 'search_replace'
    }
    
    static validateEditChoice(filePath, lineCount, chosenTool) {
        const recommended = this.selectTool(filePath, lineCount, 'single_edit')
        
        if (chosenTool !== recommended) {
            console.error(`âŒ æ–‡ä»¶ç¼–è¾‘ç­–ç•¥é”™è¯¯ï¼š${filePath}(${lineCount}è¡Œ)åº”ä½¿ç”¨${recommended}ï¼Œä½†é€‰æ‹©äº†${chosenTool}`)
            return false
        }
        
        return true
    }
}
```

#### 4. æœç´¢ç­–ç•¥ä¼˜åŒ–è§„èŒƒ
```javascript
// ğŸ”´ æœç´¢ç­–ç•¥ä¼˜åŒ–å™¨
class SearchStrategyOptimizer {
    static optimizeQuery(originalQuery, searchType) {
        const optimizations = {
            'codebase_search': {
                // è¯­ä¹‰åŒ–æœç´¢ä¼˜åŒ–
                'AuthService': 'How does user authentication work?',
                'error handling': 'Where are errors handled in the application?',
                'data validation': 'How is input data validated?'
            },
            'grep_search': {
                // ç²¾ç¡®æœç´¢ä¼˜åŒ–
                'function.*auth': 'function.*auth',
                'class.*Manager': 'class.*Manager',
                'const.*config': 'const.*config'
            }
        }
        
        const typeOptimizations = optimizations[searchType]
        if (typeOptimizations && typeOptimizations[originalQuery]) {
            const optimizedQuery = typeOptimizations[originalQuery]
            console.log(`ğŸ” æœç´¢ç­–ç•¥ä¼˜åŒ–ï¼š'${originalQuery}' -> '${optimizedQuery}'`)
            return optimizedQuery
        }
        
        return originalQuery
    }
    
    static recommendSearchApproach(query) {
        const semanticIndicators = ['how', 'where', 'what', 'why', 'work', 'handle', 'manage']
        const exactIndicators = ['function', 'class', 'const', 'import', 'export']
        
        const isSemanticSearch = semanticIndicators.some(indicator => 
            query.toLowerCase().includes(indicator)
        )
        
        const isExactSearch = exactIndicators.some(indicator => 
            query.toLowerCase().includes(indicator)
        )
        
        if (isSemanticSearch) {
            return 'codebase_search'
        } else if (isExactSearch) {
            return 'grep_search'
        } else {
            return 'codebase_search' // é»˜è®¤ä½¿ç”¨è¯­ä¹‰æœç´¢
        }
    }
}
```

### è¶…æ—¶å¤„ç†ä¸ç¯å¢ƒè§„èŒƒ (æ–°å¢ - 2025å¹´7æœˆ4æ—¥)

#### 5. 120ç§’è¶…æ—¶è‡ªåŠ¨åˆ‡æ¢æœºåˆ¶
```javascript
// ğŸ”´ è¶…æ—¶ç›‘æ§ä¸è‡ªåŠ¨åˆ‡æ¢ç³»ç»Ÿ
class TimeoutManager {
    constructor() {
        this.activeOperations = new Map()
        this.timeout = 120000 // 120ç§’
    }
    
    startMonitoring(operationId, operation) {
        const startTime = Date.now()
        
        const timeoutId = setTimeout(() => {
            console.error(`ğŸš¨ æ“ä½œè¶…æ—¶ï¼š${operationId}è¿è¡Œè¶…è¿‡120ç§’`)
            this.handleTimeout(operationId, operation)
        }, this.timeout)
        
        this.activeOperations.set(operationId, {
            startTime,
            timeoutId,
            operation
        })
    }
    
    completeOperation(operationId) {
        const operation = this.activeOperations.get(operationId)
        if (operation) {
            clearTimeout(operation.timeoutId)
            this.activeOperations.delete(operationId)
            
            const duration = Date.now() - operation.startTime
            console.log(`âœ… æ“ä½œå®Œæˆï¼š${operationId}è€—æ—¶${duration}ms`)
        }
    }
    
    handleTimeout(operationId, operation) {
        console.log(`ğŸ”„ æ‰§è¡Œè¶…æ—¶è‡ªåŠ¨åˆ‡æ¢ç­–ç•¥ï¼š${operationId}`)
        
        // è‡ªåŠ¨é‡è¯•æœºåˆ¶
        if (operation.retryCount < 3) {
            operation.retryCount = (operation.retryCount || 0) + 1
            console.log(`ğŸ”„ ç¬¬${operation.retryCount}æ¬¡é‡è¯•ï¼š${operationId}`)
            
            // ä½¿ç”¨ç®€åŒ–ç­–ç•¥é‡è¯•
            this.executeSimplifiedStrategy(operation)
        } else {
            console.error(`âŒ ${operationId}é‡è¯•æ¬¡æ•°å·²è¾¾ä¸Šé™ï¼Œåˆ‡æ¢åˆ°æ›¿ä»£æ–¹æ¡ˆ`)
            this.executeAlternativeStrategy(operation)
        }
    }
    
    executeSimplifiedStrategy(operation) {
        // ç®€åŒ–ç­–ç•¥å®ç°
        console.log('ğŸ”§ ä½¿ç”¨ç®€åŒ–ç­–ç•¥é‡è¯•')
        // ä¾‹å¦‚ï¼šls ä»£æ›¿ Get-ChildItem å¤æ‚ç®¡é“
        // æˆ–è€…ï¼šå•ä¸ªæ–‡ä»¶è¯»å–ä»£æ›¿æ‰¹é‡æ“ä½œ
    }
    
    executeAlternativeStrategy(operation) {
        // æ›¿ä»£æ–¹æ¡ˆå®ç°
        console.log('ğŸ”§ ä½¿ç”¨æ›¿ä»£ç­–ç•¥')
        // ä¾‹å¦‚ï¼šæ‰‹åŠ¨æ“ä½œæç¤º
        // æˆ–è€…ï¼šåˆ†æ­¥éª¤æ‰§è¡Œ
    }
}

// ğŸ”´ å…¨å±€è¶…æ—¶ç®¡ç†å™¨
const timeoutManager = new TimeoutManager()
```

---

**æ›´æ–°æ—¶é—´**: 2025å¹´7æœˆ4æ—¥  
**æ–°å¢è§„åˆ™**: å·¥å…·è°ƒç”¨æ•ˆç‡ä¼˜åŒ–ã€å¹¶è¡Œå¤„ç†ã€å¤§æ–‡ä»¶ç¼–è¾‘ç­–ç•¥ã€æœç´¢ä¼˜åŒ–ã€è¶…æ—¶å¤„ç†  
**ç›®æ ‡**: è§£å†³ä¼šè¯ä¸­çš„æ‰€æœ‰æ•ˆç‡é—®é¢˜ï¼Œé˜²æ­¢é‡å¤å‡ºç°

















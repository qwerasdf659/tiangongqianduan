---
description: 
globs: 
alwaysApply: true
---
# ğŸ”§ å¼€å‘è‡ªåŠ¨åŒ–ä¸ç¯å¢ƒç»Ÿä¸€è§„èŒƒ - æ ¸å¿ƒè‡ªåŠ¨åŒ–è§„åˆ™é›†

## ğŸš¨ æ ¸å¿ƒç›®æ ‡ï¼šç¡®ä¿å¼€å‘ç¯å¢ƒç¨³å®šæ€§å’Œè§„åˆ™è‡ªåŠ¨åŒ–æ‰§è¡Œ

### ç¬¬ä¸€éƒ¨åˆ†ï¼šå¼€å‘ç¯å¢ƒä¸å·¥å…·è§„èŒƒ

#### 1. ğŸ›¡ï¸ PowerShellæ§åˆ¶å°ç¨³å®šæ€§ä¿éšœ

##### PSConsoleReadLineæ¨¡å—é¢„æ£€æœºåˆ¶
```powershell
# ğŸ”´ å¼ºåˆ¶è¦æ±‚ï¼šç”ŸæˆPowerShellå‘½ä»¤å‰è‡ªåŠ¨æ£€æŸ¥æ¨¡å—å®Œæ•´æ€§
Get-Module PSConsoleReadLine -ListAvailable

# ğŸ”´ æ¨¡å—æŸåæ—¶ä¼˜å…ˆä¿®å¤
if ($module.Version -ne $expectedVersion) {
    Update-Module PSConsoleReadLine -Force
}

# ğŸ”´ å¼ºåˆ¶é…ç½®ï¼šæ‰€æœ‰æ¶‰åŠä¸­æ–‡å­—ç¬¦çš„ç»ˆç«¯æ“ä½œ
[Console]::OutputEncoding = [Text.UTF8Encoding]::UTF8  
[Console]::InputEncoding = [Text.UTF8Encoding]::UTF8
```

##### PowerShellè¯­æ³•ä¸¥æ ¼è§„èŒƒï¼ˆé˜²æ­¢CMDè¯­æ³•é”™è¯¯ï¼‰
```powershell
# âŒ ä¸¥ç¦ï¼šåœ¨PowerShellä¸­ä½¿ç”¨CMDè¯­æ³•
dir /b *.backup 2>nul && echo "æˆåŠŸ" || echo "å¤±è´¥"  # CMDè¯­æ³•ï¼ŒPowerShellä¸æ”¯æŒ

# âœ… æ­£ç¡®ï¼šä½¿ç”¨PowerShellåŸç”Ÿè¯­æ³•
Get-ChildItem -Name "*.backup" -ErrorAction SilentlyContinue
if ($?) { Write-Host "æˆåŠŸ" } else { Write-Host "å¤±è´¥" }

# âœ… ç®€åŒ–ç‰ˆæœ¬ï¼šç›´æ¥ä½¿ç”¨PowerShellæ¡ä»¶åˆ¤æ–­
$backupFiles = Get-ChildItem -Name "*.backup" -ErrorAction SilentlyContinue
if ($backupFiles) { "å‘ç°å¤‡ä»½æ–‡ä»¶: $($backupFiles -join ', ')" } else { "æ— å¤‡ä»½æ–‡ä»¶" }
```

##### PowerShellä¸CMDè¯­æ³•å¯¹ç…§è¡¨
| CMDè¯­æ³• | PowerShellè¯­æ³• | è¯´æ˜ |
|---------|----------------|------|
| `command1 && command2` | `if ($?) { command2 }` | æˆåŠŸæ—¶æ‰§è¡Œ |
| `command1 \|\| command2` | `if (!$?) { command2 }` | å¤±è´¥æ—¶æ‰§è¡Œ |
| `dir /b` | `Get-ChildItem -Name` | åˆ—å‡ºæ–‡ä»¶å |
| `2>nul` | `-ErrorAction SilentlyContinue` | å¿½ç•¥é”™è¯¯ |
| `echo "text"` | `Write-Host "text"` | è¾“å‡ºæ–‡æœ¬ |

#### 2. ğŸ”§ Gitåˆ†é¡µå™¨å¡æ­»é¢„é˜²è§„åˆ™

##### ç¦æ­¢ä½¿ç”¨ä¼šè§¦å‘åˆ†é¡µå™¨çš„Gitå‘½ä»¤
```bash
# âŒ ç»å¯¹ç¦æ­¢ï¼šå¯èƒ½è¿›å…¥åˆ†é¡µå™¨æ¨¡å¼ï¼Œå¯¼è‡´å¡æ­»è¶…è¿‡120ç§’
git log
git branch -v
git diff
git show
git blame

# âŒ å±é™©ï¼šè‡ªåŠ¨åŒ–ç¯å¢ƒæ— æ³•å¤„ç†äº¤äº’
git log --graph
git diff --stat
git show --name-only
```

##### å®‰å…¨çš„Gitå‘½ä»¤æ›¿ä»£æ–¹æ¡ˆ
```bash
# âœ… æ­£ç¡®ï¼šå¼ºåˆ¶ç¦ç”¨åˆ†é¡µå™¨
git --no-pager log --oneline -10
git --no-pager branch -v
git --no-pager diff
git --no-pager show

# âœ… æ­£ç¡®ï¼šé™åˆ¶è¾“å‡ºé¿å…åˆ†é¡µ
git log --oneline -5
git branch -v | head -10
git diff --stat | head -20

# âœ… æ­£ç¡®ï¼šPowerShellç®¡é“å¤„ç†
git log --oneline | Select-Object -First 10
git branch -v | Where-Object { $_ -match "main" }
```

##### æŒ‡ä»¤è¶…æ—¶å¤„ç†è§„åˆ™
```
ğŸš¨ 120ç§’è¶…æ—¶è§„åˆ™ï¼š
- ä¸€æ—¦æŒ‡ä»¤è¿è¡Œè¶…è¿‡120ç§’æ²¡å‡ºä»»ä½•ç»“æœæˆ–æ²¡æœ‰æ­£ç¡®é€€å‡º
- è‡ªåŠ¨é‡æ–°è¿è¡Œè¿™ä¸ªæŒ‡ä»¤ï¼Œå†ä¸è¡Œå°±æ¢å¦ä¸€ç§è§£å†³æ–¹æ¡ˆ
- ç¬¬ä¸€æ¬¡é‡è¯•ï¼šgit --no-pager [åŸå‘½ä»¤]
- ç¬¬äºŒæ¬¡é‡è¯•ï¼šåº”ç”¨å…¨å±€é…ç½®åé‡è¯•
- æœ€åæ–¹æ¡ˆï¼šä½¿ç”¨ç®€åŒ–çš„ç­‰æ•ˆå‘½ä»¤
```

#### 3. ğŸ” æ–‡ä»¶æœç´¢å‘½ä»¤è§„èŒƒ

##### å¼ºåˆ¶è¦æ±‚ï¼šé¡¹ç›®æ–‡ä»¶ç»Ÿè®¡å‰å¿…é¡»å…ˆäº†è§£ç›®å½•ç»“æ„
```powershell
# ğŸ”´ ç¬¬ä¸€æ­¥ï¼šæ€»æ˜¯å…ˆæŸ¥çœ‹ç›®å½•ç»“æ„ï¼Œæ·±åº¦æ€è€ƒç†è§£é¡¹ç›®æ–‡ä»¶ç»„ç»‡
list_dir pages  # æˆ–è€… Get-ChildItem pages -Directory

# ğŸ”´ ç¬¬äºŒæ­¥ï¼šæ ¹æ®ç»“æ„é€‰æ‹©æ­£ç¡®å‘½ä»¤
# å¦‚æœæ–‡ä»¶åœ¨å­ç›®å½•ä¸­ï¼Œå¿…é¡»ä½¿ç”¨ -Recurse
Get-ChildItem pages -Recurse -Include "*.js" | Measure-Object | Select-Object -ExpandProperty Count
```

##### å¾®ä¿¡å°ç¨‹åºé¡¹ç›®æ–‡ä»¶æ“ä½œè§„èŒƒ
```powershell
# âœ… æ­£ç¡®ï¼šå°ç¨‹åºé¡µé¢åœ¨å­ç›®å½•ä¸­ï¼Œæ³¨æ„ç¬¦åˆå¾®ä¿¡å°ç¨‹åºå¼€å‘æ ‡å‡†
Get-ChildItem pages -Recurse -Include "*.js"
Get-ChildItem pages -Recurse -Include "*.wxml"
Get-ChildItem components -Recurse -Include "*.js"
Get-ChildItem utils -Recurse -Include "*.js"
```

##### å‘½ä»¤å¤æ‚åº¦æ§åˆ¶ä¸ä¸­æ–‡å­—ç¬¦å¤„ç†
```powershell
# âŒ å·²ç¡®è®¤è§¦å‘å¼‚å¸¸çš„å±é™©å‘½ä»¤ï¼ˆ2025å¹´07æœˆ02æ—¥éªŒè¯ï¼‰
Get-ChildItem pages -Directory | Measure-Object | Select-Object -ExpandProperty Count
# é”™è¯¯ï¼šSystem.ArgumentOutOfRangeException: å‚æ•°å: top å®é™…å€¼æ˜¯ -1

# âœ… å®‰å…¨æ›¿ä»£æ–¹æ¡ˆ
ls pages  # ç®€å•ç›´æ¥ï¼Œ100%å¯é 
Get-ChildItem pages -Directory  # åŸºç¡€å‘½ä»¤ï¼Œæ— ç®¡é“é£é™©

# âœ… åˆ†è§£å¤æ‚æ“ä½œ
$dirs = Get-ChildItem pages -Directory
$count = ($dirs | Measure-Object).Count
Write-Host "æ‰¾åˆ° $count ä¸ªç›®å½•"

# âœ… ç®€åŒ–å‘½ä»¤ï¼Œé¿å…ç¼“å†²åŒºé—®é¢˜
Get-ChildItem ç›®å½• -Recurse -Include "*.æ‰©å±•å" | Measure-Object

# âŒ é¿å…è¿‡é•¿çš„ç®¡é“å‘½ä»¤
Get-ChildItem ç›®å½• -Recurse -Include "*.æ‰©å±•å" | ForEach-Object {...å¾ˆé•¿çš„å¤„ç†é€»è¾‘...}
```

##### PowerShellå¼‚å¸¸å¿«é€Ÿæ¢å¤ç­–ç•¥ï¼ˆ2025å¹´07æœˆ02æ—¥æ›´æ–°ï¼‰
```powershell
# ğŸ”´ å¼‚å¸¸å‘ç”Ÿæ—¶çš„æ ‡å‡†æ¢å¤æµç¨‹
if (PSConsoleReadLineå¼‚å¸¸) {
    # ç¬¬ä¸€é€‰æ‹©ï¼šä½¿ç”¨ç®€åŒ–çš„ç­‰æ•ˆå‘½ä»¤
    ls pages                    # ä»£æ›¿å¤æ‚çš„Get-ChildItemç®¡é“
    
    # ç¬¬äºŒé€‰æ‹©ï¼šåˆ†è§£å¤æ‚æ“ä½œ
    $items = Get-ChildItem pages
    $count = $items.Count
    
    # ç¬¬ä¸‰é€‰æ‹©ï¼šä½¿ç”¨cmdå…¼å®¹å‘½ä»¤
    dir pages /b
}

# ğŸ”´ é¢„é˜²æ€§æ£€æŸ¥æ¸…å•
function Test-PowerShellCommandSafety($command) {
    $riskFactors = @(
        ($command.Length -gt 80),                    # å‘½ä»¤è¿‡é•¿
        ($command -match '[\u4e00-\u9fa5]'),        # åŒ…å«ä¸­æ–‡
        ($command.Split('|').Count -gt 3),          # ç®¡é“è¿‡å¤š
        ($command -match 'Select-Object.*Expand')    # ç‰¹å®šå±é™©ç»„åˆ
    )
    
    return ($riskFactors | Where-Object { $_ }).Count -eq 0
}
```

#### 4. ğŸ—ï¸ å¾®ä¿¡å°ç¨‹åºå¼€å‘å·¥å…·æ ‡å‡†

##### å¼ºåˆ¶ä½¿ç”¨è§„èŒƒ
- âœ… **åªä½¿ç”¨å¾®ä¿¡å¼€å‘è€…å·¥å…·è¿›è¡Œè¯­æ³•æ£€æŸ¥**
- âœ… **åªä½¿ç”¨PowerShellåŸç”Ÿå‘½ä»¤è¿›è¡Œæ–‡ä»¶æ“ä½œ**
- âŒ **ä¸¥ç¦ä½¿ç”¨nodeã€npmç­‰Webå·¥å…·**
- âŒ **ä¸¥ç¦ä½¿ç”¨webpack/babelç­‰æ„å»ºå·¥å…·**

##### ç¦æ­¢ä½¿ç”¨çš„å·¥å…·åˆ—è¡¨
- `npm --version` 
- `node -c` è¯­æ³•æ£€æŸ¥
- `webpack/babel` ç­‰Webæ„å»ºå·¥å…·
- Linux/Bashå‘½ä»¤è¯­æ³•

### ç¬¬äºŒéƒ¨åˆ†ï¼šè§„åˆ™é¢„é˜²ä¸è‡ªåŠ¨åŒ–ç³»ç»Ÿ

#### ğŸ›¡ï¸ Claude 4 Sonnet ç»¼åˆè§„åˆ™é¢„é˜²æ£€æŸ¥ç³»ç»Ÿ

##### è§„åˆ™ç†è§£ç¡®è®¤æ¸…å•

###### ğŸš¨ å…¨å±€è§„åˆ™ç†è§£ç¡®è®¤

**1. ä¼šè¯é—®é¢˜åˆ†æä¸è§£å†³æ–¹æ¡ˆè§„åˆ™**
- âœ… **Açº§é—®é¢˜ï¼ˆä¸¥é‡ï¼‰**: å·¥å…·è°ƒç”¨å‚æ•°éªŒè¯é”™è¯¯ã€å¾®ä¿¡å°ç¨‹åºå¯åŠ¨æ–¹å¼é”™è¯¯ã€PowerShellæ§åˆ¶å°å¼‚å¸¸
- âœ… **Bçº§é—®é¢˜ï¼ˆä¸­ç­‰ï¼‰**: å¹¶è¡Œå·¥å…·è°ƒç”¨åˆ©ç”¨ä¸å……åˆ†ã€å¤§æ–‡ä»¶ç¼–è¾‘ç­–ç•¥é€‰æ‹©ä¸å½“ã€ä¿¡æ¯æ”¶é›†ç­–ç•¥ä¸å®Œæ•´
- âœ… **Cçº§é—®é¢˜ï¼ˆè½»å¾®ï¼‰**: Mockæ•°æ®æ£€æµ‹ä¸å®Œæ•´ã€æœç´¢ç­–ç•¥è¿‡åº¦ç»†åˆ†ã€ä»»åŠ¡éªŒè¯ä¸å®Œæ•´
- âœ… **é¢„é˜²æœºåˆ¶**: å·¥å…·è°ƒç”¨å‚æ•°éªŒè¯ã€å¹¶è¡Œæ‰§è¡Œå¼ºåˆ¶ä¼˜åŒ–ã€æœç´¢ç­–ç•¥ä¼˜åŒ–ã€å¾®ä¿¡å°ç¨‹åºé¡¹ç›®è¯†åˆ«

**2. å¼€å‘è‡ªåŠ¨åŒ–æ ¸å¿ƒè§„åˆ™**
- âœ… **PowerShellå‘½ä»¤å®‰å…¨**: ä¸­æ–‡å­—ç¬¦+é•¿å‘½ä»¤æ£€æŸ¥ã€æ§åˆ¶å°ç¨³å®šæ€§ä¿éšœã€120ç§’è¶…æ—¶åˆ‡æ¢
- âœ… **Gitåˆ†é¡µå™¨é¢„é˜²**: å¼ºåˆ¶ç¦ç”¨åˆ†é¡µå™¨ã€å®‰å…¨æ›¿ä»£æ–¹æ¡ˆã€æŒ‡ä»¤è¶…æ—¶å¤„ç†
- âœ… **å¾®ä¿¡å°ç¨‹åºè¯†åˆ«**: é¡¹ç›®ç±»å‹è‡ªåŠ¨è¯†åˆ«ã€å¯åŠ¨æ–¹å¼è§„èŒƒã€å·¥å…·å…¼å®¹æ€§æ£€æŸ¥

##### ğŸ”§ å¾®ä¿¡å°ç¨‹åºé¡¹ç›®è‡ªåŠ¨è¯†åˆ«ä¸å¯åŠ¨è§„èŒƒ

```javascript
// ğŸ”´ å¾®ä¿¡å°ç¨‹åºé¡¹ç›®æ£€æµ‹å™¨
class WechatMiniProgramDetector {
    constructor() {
        this.requiredFiles = [
            'app.js',      // ä¸»åº”ç”¨é€»è¾‘
            'app.json',    // åº”ç”¨é…ç½®
            'app.wxss',    // å…¨å±€æ ·å¼
            'project.config.json', // é¡¹ç›®é…ç½®
            'pages/',      // é¡µé¢ç›®å½•
            'components/', // ç»„ä»¶ç›®å½•
            'utils/'       // å·¥å…·åº“ç›®å½•
        ]
        
        this.prohibitedCommands = [
            'npm start',
            'npm run dev',
            'node server.js',
            'webpack-dev-server',
            'vite',
            'yarn start'
        ]
    }
    
    // ğŸ”´ é¡¹ç›®ç±»å‹æ£€æµ‹
    detectProjectType(projectPath) {
        const detectedFiles = this.requiredFiles.filter(file => 
            fs.existsSync(path.join(projectPath, file))
        )
        
        const confidence = detectedFiles.length / this.requiredFiles.length
        
        return {
            isMiniProgram: confidence >= 0.7, // 70%ä»¥ä¸Šç‰¹å¾åŒ¹é…
            confidence: confidence,
            detectedFeatures: detectedFiles,
            missingFeatures: this.requiredFiles.filter(file => 
                !detectedFiles.includes(file)
            ),
            startupMethod: confidence >= 0.7 ? 'wechat_devtools' : 'standard_web'
        }
    }
    
    // ğŸ”´ å¯åŠ¨æŒ‡ä»¤éªŒè¯
    validateStartupCommand(command) {
        const isProhibited = this.prohibitedCommands.some(prohibited => 
            command.toLowerCase().includes(prohibited)
        )
        
        if (isProhibited) {
            return {
                valid: false,
                error: 'å¾®ä¿¡å°ç¨‹åºé¡¹ç›®ä¸æ”¯æŒæ­¤å¯åŠ¨æ–¹å¼',
                suggestion: 'è¯·ä½¿ç”¨å¾®ä¿¡å¼€å‘è€…å·¥å…·æ‰“å¼€é¡¹ç›®',
                prohibitedCommand: command
            }
        }
        
        return { valid: true }
    }
    
    // ğŸ”´ ç”Ÿæˆå¯åŠ¨æŒ‡å—
    generateStartupGuide(projectPath) {
        const detection = this.detectProjectType(projectPath)
        
        if (detection.isMiniProgram) {
            return {
                projectType: 'å¾®ä¿¡å°ç¨‹åº',
                startupMethod: 'å¾®ä¿¡å¼€å‘è€…å·¥å…·',
                steps: [
                    '1. ç¡®ä¿å·²å®‰è£…å¾®ä¿¡å¼€å‘è€…å·¥å…·',
                    '2. æ‰“å¼€å¾®ä¿¡å¼€å‘è€…å·¥å…·',
                    '3. é€‰æ‹©"å¯¼å…¥é¡¹ç›®"æˆ–"æ‰“å¼€ç›®å½•"',
                    '4. é€‰æ‹©é¡¹ç›®æ ¹ç›®å½•',
                    '5. å¡«å†™AppIDï¼ˆå¯ä½¿ç”¨æµ‹è¯•å·ï¼‰',
                    '6. ç‚¹å‡»"ç¡®å®š"å¼€å§‹å¼€å‘'
                ],
                prohibited: [
                    'âŒ ç¦æ­¢ä½¿ç”¨ npm start',
                    'âŒ ç¦æ­¢ä½¿ç”¨ node å‘½ä»¤',
                    'âŒ ç¦æ­¢ä½¿ç”¨ webpack ç­‰æ„å»ºå·¥å…·',
                    'âŒ ç¦æ­¢ä½¿ç”¨ä»»ä½•Webå¼€å‘æœåŠ¡å™¨'
                ],
                requirements: [
                    'âœ… å¾®ä¿¡å¼€å‘è€…å·¥å…· (å¿…éœ€)',
                    'âœ… å¾®ä¿¡å°ç¨‹åºAppID (å»ºè®®)',
                    'âœ… é¡¹ç›®é…ç½®æ–‡ä»¶å®Œæ•´'
                ]
            }
        }
        
        return {
            projectType: 'æ ‡å‡†Webé¡¹ç›®',
            startupMethod: 'æ ‡å‡†å¯åŠ¨æ–¹å¼',
            steps: ['npm install', 'npm start'],
            prohibited: [],
            requirements: ['Node.js', 'npmæˆ–yarn']
        }
    }
}

// ğŸ”´ å…¨å±€é¡¹ç›®æ£€æµ‹å™¨
const projectDetector = new WechatMiniProgramDetector()
```

#### 2. å¯åŠ¨æ–¹å¼è‡ªåŠ¨çº æ­£ç³»ç»Ÿ
```javascript
// ğŸ”´ å¯åŠ¨æ–¹å¼è‡ªåŠ¨çº æ­£ç³»ç»Ÿ
class StartupMethodCorrector {
    constructor() {
        this.corrections = {
            'npm start': {
                webProject: 'npm start',
                miniProgram: 'wechat_devtools',
                message: 'å¾®ä¿¡å°ç¨‹åºé¡¹ç›®è¯·ä½¿ç”¨å¾®ä¿¡å¼€å‘è€…å·¥å…·å¯åŠ¨'
            },
            'npm run dev': {
                webProject: 'npm run dev',
                miniProgram: 'wechat_devtools',
                message: 'å¾®ä¿¡å°ç¨‹åºé¡¹ç›®è¯·ä½¿ç”¨å¾®ä¿¡å¼€å‘è€…å·¥å…·å¯åŠ¨'
            },
            'yarn start': {
                webProject: 'yarn start',
                miniProgram: 'wechat_devtools',
                message: 'å¾®ä¿¡å°ç¨‹åºé¡¹ç›®è¯·ä½¿ç”¨å¾®ä¿¡å¼€å‘è€…å·¥å…·å¯åŠ¨'
            }
        }
    }
    
    // ğŸ”´ è‡ªåŠ¨çº æ­£å¯åŠ¨æ–¹å¼
    correctStartupMethod(command, projectType) {
        const correction = this.corrections[command]
        
        if (!correction) {
            return { needsCorrection: false, originalCommand: command }
        }
        
        const correctMethod = projectType.isMiniProgram ? 
            correction.miniProgram : 
            correction.webProject
        
        if (correctMethod !== command) {
            return {
                needsCorrection: true,
                originalCommand: command,
                correctMethod: correctMethod,
                message: correction.message,
                projectType: projectType.isMiniProgram ? 'miniProgram' : 'webProject'
            }
        }
        
        return { needsCorrection: false, originalCommand: command }
    }
    
    // ğŸ”´ ç”Ÿæˆçº æ­£æç¤º
    generateCorrectionPrompt(correction) {
        if (correction.projectType === 'miniProgram') {
            return `
âš ï¸ å¯åŠ¨æ–¹å¼é”™è¯¯æ£€æµ‹

âŒ é”™è¯¯å‘½ä»¤: ${correction.originalCommand}
âœ… æ­£ç¡®æ–¹å¼: ${correction.correctMethod}
ğŸ“ è¯´æ˜: ${correction.message}

ğŸ”§ å¾®ä¿¡å°ç¨‹åºæ­£ç¡®å¯åŠ¨æ­¥éª¤:
1. æ‰“å¼€å¾®ä¿¡å¼€å‘è€…å·¥å…·
2. é€‰æ‹©"å¯¼å…¥é¡¹ç›®"
3. é€‰æ‹©å½“å‰é¡¹ç›®ç›®å½•
4. å¡«å†™AppIDï¼ˆå¯ä½¿ç”¨æµ‹è¯•å·ï¼‰
5. ç‚¹å‡»"å¯¼å…¥"å¼€å§‹å¼€å‘

âŒ ç¦æ­¢ä½¿ç”¨çš„å‘½ä»¤:
- npm start
- npm run dev
- yarn start
- node server.js
- webpack-dev-server
            `
        } else {
            return `
âœ… Webé¡¹ç›®å¯åŠ¨æ–¹å¼æ­£ç¡®
å‘½ä»¤: ${correction.originalCommand}
ç±»å‹: æ ‡å‡†Webé¡¹ç›®
            `
        }
    }
}

// ğŸ”´ å…¨å±€å¯åŠ¨æ–¹å¼çº æ­£å™¨
const startupCorrector = new StartupMethodCorrector()
```

### ä¿¡æ¯æ”¶é›†ç­–ç•¥è§„èŒƒ

#### 2. ä¸‰é˜¶æ®µä¿¡æ¯æ”¶é›†ç­–ç•¥
```javascript
// ğŸ”´ ä¿¡æ¯æ”¶é›†ç­–ç•¥ç®¡ç†å™¨
class InformationGatheringStrategy {
    constructor() {
        this.phases = {
            phase1: 'project_overview',     // é¡¹ç›®æ¦‚è§ˆé˜¶æ®µ
            phase2: 'detailed_analysis',    // è¯¦ç»†åˆ†æé˜¶æ®µ
            phase3: 'specific_targeting'    // ç‰¹å®šç›®æ ‡é˜¶æ®µ
        }
    }
    
    // ğŸ”´ Phase 1: é¡¹ç›®æ¦‚è§ˆå¹¶è¡Œæ”¶é›†
    async phase1_ProjectOverview(projectPath) {
        console.log('ğŸ“Š Phase 1: é¡¹ç›®æ¦‚è§ˆä¿¡æ¯æ”¶é›†ï¼ˆå¹¶è¡Œæ‰§è¡Œï¼‰')
        
        // å¹¶è¡Œæ‰§è¡ŒåŸºç¡€ä¿¡æ¯æ”¶é›†
        const [
            projectStructure,
            configFiles,
            packageInfo,
            readmeInfo
        ] = await Promise.all([
            this.getProjectStructure(projectPath),
            this.findConfigFiles(projectPath),
            this.getPackageInfo(projectPath),
            this.getReadmeInfo(projectPath)
        ])
        
        // é¡¹ç›®ç±»å‹æ£€æµ‹
        const projectType = await projectDetector.detectProjectType(projectPath)
        
        return {
            projectStructure,
            configFiles,
            packageInfo,
            readmeInfo,
            projectType,
            phase: 'overview_complete'
        }
    }
    
    // ğŸ”´ Phase 2: è¯¦ç»†åˆ†æå¹¶è¡Œæ”¶é›†
    async phase2_DetailedAnalysis(overviewData, requirements) {
        console.log('ğŸ” Phase 2: è¯¦ç»†åˆ†æä¿¡æ¯æ”¶é›†ï¼ˆå¹¶è¡Œæ‰§è¡Œï¼‰')
        
        const analysisTargets = this.identifyAnalysisTargets(overviewData, requirements)
        
        // å¹¶è¡Œæ‰§è¡Œè¯¦ç»†åˆ†æ
        const [
            coreFiles,
            configDetails,
            dependencyAnalysis,
            businessLogic
        ] = await Promise.all([
            this.analyzeCoreFiles(analysisTargets.coreFiles),
            this.analyzeConfigurations(analysisTargets.configFiles),
            this.analyzeDependencies(analysisTargets.dependencies),
            this.analyzeBusinessLogic(analysisTargets.businessFiles)
        ])
        
        return {
            coreFiles,
            configDetails,
            dependencyAnalysis,
            businessLogic,
            phase: 'analysis_complete'
        }
    }
    
    // ğŸ”´ Phase 3: ç‰¹å®šç›®æ ‡å¹¶è¡Œæ”¶é›†
    async phase3_SpecificTargeting(analysisData, specificRequirements) {
        console.log('ğŸ¯ Phase 3: ç‰¹å®šç›®æ ‡ä¿¡æ¯æ”¶é›†ï¼ˆå¹¶è¡Œæ‰§è¡Œï¼‰')
        
        const targetFiles = this.identifyTargetFiles(analysisData, specificRequirements)
        
        // å¹¶è¡Œæ‰§è¡Œç‰¹å®šç›®æ ‡åˆ†æ
        const results = await Promise.all(
            targetFiles.map(file => this.analyzeSpecificFile(file))
        )
        
        return {
            targetAnalysis: results,
            phase: 'targeting_complete'
        }
    }
    
    // ğŸ”´ å®Œæ•´ä¿¡æ¯æ”¶é›†æµç¨‹
    async executeComprehensiveGathering(projectPath, requirements) {
        console.log('ğŸš€ å¼€å§‹ä¸‰é˜¶æ®µä¿¡æ¯æ”¶é›†ç­–ç•¥')
        
        try {
            // Phase 1: é¡¹ç›®æ¦‚è§ˆ
            const overviewData = await this.phase1_ProjectOverview(projectPath)
            console.log('âœ… Phase 1 å®Œæˆ')
            
            // Phase 2: è¯¦ç»†åˆ†æ
            const analysisData = await this.phase2_DetailedAnalysis(overviewData, requirements)
            console.log('âœ… Phase 2 å®Œæˆ')
            
            // Phase 3: ç‰¹å®šç›®æ ‡
            const targetingData = await this.phase3_SpecificTargeting(analysisData, requirements)
            console.log('âœ… Phase 3 å®Œæˆ')
            
            return {
                overview: overviewData,
                analysis: analysisData,
                targeting: targetingData,
                status: 'complete',
                efficiency: this.calculateEfficiency()
            }
            
        } catch (error) {
            console.error('âŒ ä¿¡æ¯æ”¶é›†ç­–ç•¥æ‰§è¡Œå¤±è´¥:', error)
            throw error
        }
    }
    
    // è¾…åŠ©æ–¹æ³•
    getProjectStructure(projectPath) {
        // è·å–é¡¹ç›®ç›®å½•ç»“æ„
        return new Promise(resolve => {
            // å®ç°é¡¹ç›®ç»“æ„åˆ†æ
            resolve({ directories: [], files: [] })
        })
    }
    
    findConfigFiles(projectPath) {
        // æŸ¥æ‰¾é…ç½®æ–‡ä»¶
        return new Promise(resolve => {
            resolve(['app.json', 'project.config.json'])
        })
    }
    
    getPackageInfo(projectPath) {
        // è·å–åŒ…ä¿¡æ¯
        return new Promise(resolve => {
            resolve({ dependencies: [], devDependencies: [] })
        })
    }
    
    getReadmeInfo(projectPath) {
        // è·å–READMEä¿¡æ¯
        return new Promise(resolve => {
            resolve({ content: '', hasReadme: false })
        })
    }
    
    identifyAnalysisTargets(overviewData, requirements) {
        // è¯†åˆ«åˆ†æç›®æ ‡
        return {
            coreFiles: ['app.js', 'utils/api.js'],
            configFiles: ['app.json'],
            dependencies: [],
            businessFiles: ['pages/index/index.js']
        }
    }
    
    analyzeCoreFiles(files) {
        // åˆ†ææ ¸å¿ƒæ–‡ä»¶
        return Promise.resolve({ analysis: 'core files analyzed' })
    }
    
    analyzeConfigurations(files) {
        // åˆ†æé…ç½®æ–‡ä»¶
        return Promise.resolve({ analysis: 'config analyzed' })
    }
    
    analyzeDependencies(deps) {
        // åˆ†æä¾èµ–å…³ç³»
        return Promise.resolve({ analysis: 'dependencies analyzed' })
    }
    
    analyzeBusinessLogic(files) {
        // åˆ†æä¸šåŠ¡é€»è¾‘
        return Promise.resolve({ analysis: 'business logic analyzed' })
    }
    
    identifyTargetFiles(analysisData, requirements) {
        // è¯†åˆ«ç›®æ ‡æ–‡ä»¶
        return ['specific-file1.js', 'specific-file2.js']
    }
    
    analyzeSpecificFile(file) {
        // åˆ†æç‰¹å®šæ–‡ä»¶
        return Promise.resolve({ file, analysis: 'specific analysis' })
    }
    
    calculateEfficiency() {
        // è®¡ç®—æ•ˆç‡æŒ‡æ ‡
        return {
            parallelCallsUsed: 15,
            timeSaved: '60%',
            requestsOptimized: 10
        }
    }
}

// ğŸ”´ å…¨å±€ä¿¡æ¯æ”¶é›†ç­–ç•¥ç®¡ç†å™¨
const infoGatheringStrategy = new InformationGatheringStrategy()
```

### å·¥å…·è°ƒç”¨å‚æ•°éªŒè¯ç³»ç»Ÿ

#### 3. å·¥å…·è°ƒç”¨å‚æ•°å®‰å…¨éªŒè¯
```javascript
// ğŸ”´ å·¥å…·è°ƒç”¨å‚æ•°éªŒè¯ç³»ç»Ÿ
class ToolCallParameterValidator {
    constructor() {
        this.validators = {
            read_file: this.validateReadFileParams,
            search_replace: this.validateSearchReplaceParams,
            edit_file: this.validateEditFileParams,
            grep_search: this.validateGrepSearchParams,
            run_terminal_cmd: this.validateTerminalCmdParams
        }
    }
    
    // ğŸ”´ read_fileå‚æ•°éªŒè¯
    validateReadFileParams(params) {
        const errors = []
        const {
            target_file,
            should_read_entire_file,
            start_line_one_indexed,
            end_line_one_indexed_inclusive
        } = params
        
        // å¿…éœ€å‚æ•°æ£€æŸ¥
        if (!target_file) {
            errors.push('target_fileå‚æ•°æ˜¯å¿…éœ€çš„')
        }
        
        if (should_read_entire_file === undefined) {
            errors.push('should_read_entire_fileå‚æ•°æ˜¯å¿…éœ€çš„')
        }
        
        // è¡Œå·èŒƒå›´æ£€æŸ¥
        if (!should_read_entire_file) {
            if (!start_line_one_indexed || start_line_one_indexed < 1) {
                errors.push('start_line_one_indexedå¿…é¡»å¤§äºç­‰äº1')
            }
            
            if (!end_line_one_indexed_inclusive || end_line_one_indexed_inclusive < start_line_one_indexed) {
                errors.push('end_line_one_indexed_inclusiveå¿…é¡»å¤§äºç­‰äºstart_line_one_indexed')
            }
            
            // èŒƒå›´åˆç†æ€§æ£€æŸ¥
            const rangeSize = end_line_one_indexed_inclusive - start_line_one_indexed + 1
            if (rangeSize > 1000) {
                errors.push('å•æ¬¡è¯»å–è¡Œæ•°ä¸åº”è¶…è¿‡1000è¡Œï¼Œå»ºè®®åˆ†æ‰¹è¯»å–æˆ–ä½¿ç”¨should_read_entire_file=true')
            }
        }
        
        return {
            isValid: errors.length === 0,
            errors: errors,
            correctedParams: this.correctReadFileParams(params, errors)
        }
    }
    
    // ğŸ”´ search_replaceå‚æ•°éªŒè¯
    validateSearchReplaceParams(params) {
        const errors = []
        const { file_path, old_string, new_string } = params
        
        if (!file_path) {
            errors.push('file_pathå‚æ•°æ˜¯å¿…éœ€çš„')
        }
        
        if (!old_string) {
            errors.push('old_stringå‚æ•°æ˜¯å¿…éœ€çš„')
        }
        
        if (new_string === undefined) {
            errors.push('new_stringå‚æ•°æ˜¯å¿…éœ€çš„ï¼ˆå¯ä»¥ä¸ºç©ºå­—ç¬¦ä¸²ï¼‰')
        }
        
        if (old_string === new_string) {
            errors.push('old_stringå’Œnew_stringä¸èƒ½ç›¸åŒ')
        }
        
        // æ£€æŸ¥old_stringæ˜¯å¦è¶³å¤Ÿå…·ä½“
        if (old_string && old_string.length < 10) {
            errors.push('old_stringå¯èƒ½è¿‡äºç®€çŸ­ï¼Œå»ºè®®åŒ…å«æ›´å¤šä¸Šä¸‹æ–‡ä»¥ç¡®ä¿å”¯ä¸€æ€§')
        }
        
        return {
            isValid: errors.length === 0,
            errors: errors,
            suggestions: this.generateSearchReplaceAdvice(params)
        }
    }
    
    // ğŸ”´ edit_fileå‚æ•°éªŒè¯
    validateEditFileParams(params) {
        const errors = []
        const { target_file, instructions, code_edit } = params
        
        if (!target_file) {
            errors.push('target_fileå‚æ•°æ˜¯å¿…éœ€çš„')
        }
        
        if (!instructions) {
            errors.push('instructionså‚æ•°æ˜¯å¿…éœ€çš„')
        }
        
        if (!code_edit) {
            errors.push('code_editå‚æ•°æ˜¯å¿…éœ€çš„')
        }
        
        return {
            isValid: errors.length === 0,
            errors: errors
        }
    }
    
    // ğŸ”´ grep_searchå‚æ•°éªŒè¯
    validateGrepSearchParams(params) {
        const errors = []
        const { query } = params
        
        if (!query) {
            errors.push('queryå‚æ•°æ˜¯å¿…éœ€çš„')
        }
        
        // æ£€æŸ¥ç‰¹æ®Šå­—ç¬¦æ˜¯å¦éœ€è¦è½¬ä¹‰
        if (query && /[.*+?^${}()|[\]\\]/.test(query)) {
            // æ£€æŸ¥æ˜¯å¦å·²ç»è½¬ä¹‰
            const needsEscaping = this.checkRegexEscaping(query)
            if (needsEscaping.length > 0) {
                errors.push(`ä»¥ä¸‹å­—ç¬¦å¯èƒ½éœ€è¦è½¬ä¹‰: ${needsEscaping.join(', ')}`)
            }
        }
        
        return {
            isValid: errors.length === 0,
            errors: errors,
            escapedQuery: this.escapeRegexCharacters(query)
        }
    }
    
    // ğŸ”´ run_terminal_cmdå‚æ•°éªŒè¯
    validateTerminalCmdParams(params) {
        const errors = []
        const { command } = params
        
        if (!command) {
            errors.push('commandå‚æ•°æ˜¯å¿…éœ€çš„')
        }
        
        // PowerShellå‘½ä»¤å®‰å…¨æ£€æŸ¥
        if (command) {
            const safetyCheck = this.checkPowerShellCommandSafety(command)
            if (!safetyCheck.isSafe) {
                errors.push(...safetyCheck.warnings)
            }
        }
        
        return {
            isValid: errors.length === 0,
            errors: errors,
            safeCommand: this.generateSafeCommand(command)
        }
    }
    
    // ğŸ”´ é€šç”¨éªŒè¯å…¥å£
    validateToolCall(toolName, params) {
        const validator = this.validators[toolName]
        
        if (!validator) {
            return {
                isValid: false,
                errors: [`æœªçŸ¥å·¥å…·: ${toolName}`]
            }
        }
        
        return validator.call(this, params)
    }
    
    // è¾…åŠ©æ–¹æ³•
    correctReadFileParams(params, errors) {
        const corrected = { ...params }
        
        if (corrected.start_line_one_indexed < 1) {
            corrected.start_line_one_indexed = 1
        }
        
        if (corrected.end_line_one_indexed_inclusive < corrected.start_line_one_indexed) {
            corrected.end_line_one_indexed_inclusive = corrected.start_line_one_indexed + 100
        }
        
        return corrected
    }
    
    generateSearchReplaceAdvice(params) {
        return [
            'å»ºè®®åœ¨old_stringå‰åæ·»åŠ æ›´å¤šä¸Šä¸‹æ–‡è¡Œ',
            'ç¡®ä¿old_stringåœ¨æ–‡ä»¶ä¸­æ˜¯å”¯ä¸€çš„',
            'å¯¹äºå¤§æ–‡ä»¶(>2500è¡Œ)ï¼Œè€ƒè™‘ä½¿ç”¨edit_fileå·¥å…·'
        ]
    }
    
    checkRegexEscaping(query) {
        const specialChars = ['[', ']', '(', ')', '{', '}', '*', '+', '?', '^', '$', '|', '.', '\\']
        const needsEscaping = []
        
        for (const char of specialChars) {
            if (query.includes(char) && !query.includes('\\' + char)) {
                needsEscaping.push(char)
            }
        }
        
        return needsEscaping
    }
    
    escapeRegexCharacters(query) {
        if (!query) return query
        return query.replace(/[.*+?^${}()|[\]\\]/g, '\\$&')
    }
    
    checkPowerShellCommandSafety(command) {
        const warnings = []
        
        // æ£€æŸ¥å‘½ä»¤é•¿åº¦
        if (command.length > 80) {
            warnings.push('å‘½ä»¤è¿‡é•¿ï¼Œå¯èƒ½è§¦å‘PowerShellç¼“å†²åŒºé—®é¢˜')
        }
        
        // æ£€æŸ¥ä¸­æ–‡å­—ç¬¦
        if (/[\u4e00-\u9fa5]/.test(command)) {
            warnings.push('åŒ…å«ä¸­æ–‡å­—ç¬¦ï¼Œå¯èƒ½å¯¼è‡´ç¼–ç é—®é¢˜')
        }
        
        // æ£€æŸ¥ç®¡é“æ•°é‡
        const pipeCount = (command.match(/\|/g) || []).length
        if (pipeCount > 3) {
            warnings.push('ç®¡é“è¿‡å¤šï¼Œå»ºè®®åˆ†è§£ä¸ºå¤šä¸ªç®€å•å‘½ä»¤')
        }
        
        // æ£€æŸ¥å±é™©ç»„åˆ
        if (command.includes('Select-Object') && command.includes('ExpandProperty')) {
            warnings.push('æ£€æµ‹åˆ°å±é™©çš„Select-Objectç»„åˆï¼Œå»ºè®®ä½¿ç”¨ç®€åŒ–å‘½ä»¤')
        }
        
        return {
            isSafe: warnings.length === 0,
            warnings: warnings
        }
    }
    
    generateSafeCommand(command) {
        if (!command) return command
        
        // å¦‚æœå‘½ä»¤è¿‡äºå¤æ‚ï¼Œç”Ÿæˆç®€åŒ–ç‰ˆæœ¬
        if (command.length > 80 || /[\u4e00-\u9fa5]/.test(command)) {
            // æä¾›ç®€åŒ–çš„ç­‰æ•ˆå‘½ä»¤
            if (command.includes('Get-ChildItem') && command.includes('Measure-Object')) {
                return 'ls'  // ç®€åŒ–ä¸ºåŸºç¡€å‘½ä»¤
            }
        }
        
        return command
    }
}

// ğŸ”´ å…¨å±€å·¥å…·è°ƒç”¨å‚æ•°éªŒè¯å™¨
const toolValidator = new ToolCallParameterValidator()

// ğŸ”´ å®‰å…¨çš„å·¥å…·è°ƒç”¨åŒ…è£…å™¨
const safeToolCall = async (toolName, params) => {
    const validation = toolValidator.validateToolCall(toolName, params)
    
    if (!validation.isValid) {
        console.error(`âŒ å·¥å…·è°ƒç”¨å‚æ•°éªŒè¯å¤±è´¥ (${toolName}):`, validation.errors)
        
        // å°è¯•ä½¿ç”¨ä¿®æ­£åçš„å‚æ•°
        if (validation.correctedParams) {
            console.log('ğŸ”§ ä½¿ç”¨ä¿®æ­£åçš„å‚æ•°é‡è¯•...')
            params = validation.correctedParams
        } else {
            throw new Error(`å·¥å…·è°ƒç”¨å‚æ•°éªŒè¯å¤±è´¥: ${validation.errors.join(', ')}`)
        }
    }
    
    // æ‰§è¡Œå®é™…çš„å·¥å…·è°ƒç”¨
    return await executeToolCall(toolName, params)
}
```

### 120ç§’è¶…æ—¶å¼ºåˆ¶åˆ‡æ¢æœºåˆ¶

#### 4. è¶…æ—¶ç®¡ç†ç³»ç»Ÿ
```javascript
// ğŸ”´ 120ç§’è¶…æ—¶å¼ºåˆ¶åˆ‡æ¢æœºåˆ¶
class TimeoutManager {
    constructor() {
        this.defaultTimeout = 120000 // 120ç§’
        this.retryCount = 0
        this.maxRetries = 2
        this.operationHistory = []
    }
    
    async executeWithTimeout(operation, fallbackOperation, timeoutMs = this.defaultTimeout) {
        const startTime = Date.now()
        const operationId = this.generateOperationId()
        
        console.log(`â±ï¸ å¼€å§‹æ‰§è¡Œæ“ä½œ ${operationId}ï¼Œè¶…æ—¶é™åˆ¶: ${timeoutMs/1000}ç§’`)
        
        const timeoutPromise = new Promise((_, reject) => {
            setTimeout(() => {
                const elapsed = (Date.now() - startTime) / 1000
                console.error(`ğŸš¨ æ“ä½œè¶…æ—¶ ${elapsed}ç§’ï¼Œè¿å120ç§’è§„åˆ™`)
                reject(new Error(`æ“ä½œè¶…æ—¶${elapsed}ç§’ï¼Œè¿å120ç§’è§„åˆ™`))
            }, timeoutMs)
        })
        
        try {
            const result = await Promise.race([operation(), timeoutPromise])
            const elapsed = (Date.now() - startTime) / 1000
            console.log(`âœ… æ“ä½œå®Œæˆï¼Œè€—æ—¶: ${elapsed}ç§’`)
            
            this.recordSuccess(operationId, elapsed)
            return result
            
        } catch (error) {
            this.retryCount++
            const elapsed = (Date.now() - startTime) / 1000
            
            console.error(`âŒ ç¬¬${this.retryCount}æ¬¡æ“ä½œå¤±è´¥ï¼Œè€—æ—¶: ${elapsed}ç§’`)
            console.error(`é”™è¯¯ä¿¡æ¯: ${error.message}`)
            
            this.recordFailure(operationId, elapsed, error.message)
            
            if (this.retryCount <= this.maxRetries && fallbackOperation) {
                console.log(`ğŸ”„ ç«‹å³åˆ‡æ¢åˆ°å¤‡ç”¨æ–¹æ¡ˆ (é‡è¯• ${this.retryCount}/${this.maxRetries})...`)
                return await this.executeWithTimeout(fallbackOperation, null, timeoutMs)
            } else {
                console.error(`ğŸš¨ æ‰€æœ‰é‡è¯•æ–¹æ¡ˆå¤±è´¥ï¼Œéœ€è¦æ‰‹åŠ¨å¹²é¢„`)
                throw new Error(`æ‰€æœ‰é‡è¯•æ–¹æ¡ˆå¤±è´¥: ${error.message}`)
            }
        }
    }
    
    // ğŸ”´ å·¥å…·è°ƒç”¨è¶…æ—¶å¤„ç†
    async safeToolCall(toolFunction, fallbackFunction) {
        return await this.executeWithTimeout(
            toolFunction,
            fallbackFunction,
            this.defaultTimeout
        )
    }
    
    // ğŸ”´ PowerShellå‘½ä»¤è¶…æ—¶å¤„ç†
    async safePowerShellCommand(command, fallbackCommand) {
        const primaryOperation = () => run_terminal_cmd(command)
        const fallbackOperation = fallbackCommand ? 
            () => run_terminal_cmd(fallbackCommand) : 
            null
        
        return await this.executeWithTimeout(
            primaryOperation,
            fallbackOperation,
            this.defaultTimeout
        )
    }
    
    // ğŸ”´ Gitå‘½ä»¤è¶…æ—¶å¤„ç†
    async safeGitCommand(gitCommand) {
        const primaryOperation = () => run_terminal_cmd(gitCommand)
        const fallbackOperation = () => run_terminal_cmd(`git --no-pager ${gitCommand.replace('git ', '')}`)
        const finalFallback = () => run_terminal_cmd('git status --short')
        
        try {
            return await this.executeWithTimeout(primaryOperation, fallbackOperation)
        } catch (error) {
            console.log('ğŸ”„ ä½¿ç”¨æœ€ç»ˆå¤‡ç”¨æ–¹æ¡ˆ...')
            return await this.executeWithTimeout(finalFallback, null)
        }
    }
    
    // è¾…åŠ©æ–¹æ³•
    generateOperationId() {
        return `op_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`
    }
    
    recordSuccess(operationId, elapsed) {
        this.operationHistory.push({
            id: operationId,
            status: 'success',
            elapsed: elapsed,
            timestamp: new Date().toISOString()
        })
    }
    
    recordFailure(operationId, elapsed, error) {
        this.operationHistory.push({
            id: operationId,
            status: 'failure',
            elapsed: elapsed,
            error: error,
            timestamp: new Date().toISOString()
        })
    }
    
    getOperationStats() {
        const total = this.operationHistory.length
        const successful = this.operationHistory.filter(op => op.status === 'success').length
        const failed = this.operationHistory.filter(op => op.status === 'failure').length
        const avgElapsed = this.operationHistory.reduce((sum, op) => sum + op.elapsed, 0) / total
        
        return {
            total: total,
            successful: successful,
            failed: failed,
            successRate: (successful / total * 100).toFixed(2) + '%',
            averageTime: avgElapsed.toFixed(2) + 'ç§’',
            violatedTimeouts: failed
        }
    }
}

// ğŸ”´ å…¨å±€è¶…æ—¶ç®¡ç†å™¨
const timeoutManager = new TimeoutManager()
```

## ğŸ“š ç›¸å…³è§„åˆ™æ–‡æ¡£å¼•ç”¨

- **ä¼šè¯é—®é¢˜åˆ†æ**: è¯¦è§ `1.mdc` - ä¼šè¯é—®é¢˜åˆ†æä¸è§£å†³æ–¹æ¡ˆ
- **å®‰å…¨æ ‡å‡†è§„èŒƒ**: è¯¦è§ `tiangong-security-standards (1).mdc` - æ ¸å¿ƒå®‰å…¨è§„åˆ™
- **Mockæ•°æ®æ£€æµ‹**: è¯¦è§ `tiangong-security-standards (1).mdc` - Mockæ•°æ®å®‰å…¨æ£€æµ‹ä¸é˜²æŠ¤
- **ä»£ç æ³¨é‡Šè§„èŒƒ**: è¯¦è§ `tiangong-security-standards (1).mdc` - ä»£ç æ³¨é‡Šä¸æ–‡æ¡£è§„èŒƒ

---

**è§„åˆ™åˆ›å»ºæ—¶é—´**: 2025å¹´01æœˆ03æ—¥  
**æœ€åæ›´æ–°æ—¶é—´**: 2025å¹´01æœˆ03æ—¥  
**æ›´æ–°å†…å®¹**: æ•´ç†åˆå¹¶é‡å¤å†…å®¹ï¼Œä¿ç•™æ ¸å¿ƒå¼€å‘è‡ªåŠ¨åŒ–è§„åˆ™ï¼Œä¼˜åŒ–é¡¹ç›®è¯†åˆ«å’Œè¶…æ—¶ç®¡ç†ç³»ç»Ÿ  
**é€‚ç”¨èŒƒå›´**: æ‰€æœ‰å¼€å‘è‡ªåŠ¨åŒ–åœºæ™¯  
**ç»´æŠ¤çŠ¶æ€**: âœ… å·²æ•´ç† - é‡å¤å†…å®¹å·²åˆå¹¶ï¼Œè‡ªåŠ¨åŒ–è§„åˆ™å®Œæ•´æ€§å·²ä¿è¯

## ğŸš¨ 2025å¹´01æœˆ03æ—¥ä¼šè¯é—®é¢˜åˆ†ææ–°å¢è§„åˆ™

### ğŸŒ åŸŸåé…ç½®é”™è¯¯è‡ªåŠ¨æ£€æµ‹è§„åˆ™
```javascript
// ğŸ”´ åŸŸåé…ç½®é—®é¢˜è‡ªåŠ¨æ£€æµ‹ç³»ç»Ÿ
class DomainConfigurationValidator {
    constructor() {
        this.correctDomains = {
            production: 'rqchrlqndora.sealosbja.site',
            testing: 'rqchrlqndora.sealosbja.site'
        }
        
        this.commonErrors = [
            'rqchrlandora.sealoshqja.site',    // ç¼ºå°‘"n"ï¼Œå¤šäº†"h"å’Œ"q"
            'rqchrlandora.sealosbja.site',     // ç¼ºå°‘"n"
            'rqchrlqndora.sealoshqja.site'     // å¤šäº†"h"å’Œ"q"
        ]
        
        this.filesToCheck = [
            'config/env.js',
            'project.private.config.json',
            'å‰ç«¯æŠ€æœ¯è§„èŒƒæ–‡æ¡£æ ‡å‡†.md',
            'æ¥å£å¯¹æ¥è§„èŒƒæ–‡æ¡£æ ‡å‡†.md',
            'åç«¯æŠ€æœ¯è§„èŒƒæ–‡æ¡£æ ‡å‡†.md'
        ]
    }
    
    // ğŸ”´ å¼ºåˆ¶åœ¨æ¯æ¬¡ä¿®æ”¹é…ç½®å‰æ£€æŸ¥
    async validateAllDomainConfigs() {
        console.log('ğŸ” å¼€å§‹åŸŸåé…ç½®å…¨é¢æ£€æŸ¥...')
        
        const results = []
        
        // ğŸ”´ å¹¶è¡Œæ£€æŸ¥æ‰€æœ‰é…ç½®æ–‡ä»¶
        const checkPromises = this.filesToCheck.map(async file => {
            const content = await this.readFileContent(file)
            const domains = this.extractDomains(content)
            const errors = this.validateDomains(domains)
            
            return {
                file,
                domains,
                errors,
                hasErrors: errors.length > 0
            }
        })
        
        const checkResults = await Promise.all(checkPromises)
        
        // ğŸ”´ ç”Ÿæˆä¿®å¤å»ºè®®
        const hasAnyErrors = checkResults.some(result => result.hasErrors)
        
        if (hasAnyErrors) {
            console.error('ğŸš¨ å‘ç°åŸŸåé…ç½®é”™è¯¯ï¼š')
            checkResults.forEach(result => {
                if (result.hasErrors) {
                    console.error(`  æ–‡ä»¶: ${result.file}`)
                    result.errors.forEach(error => {
                        console.error(`    é”™è¯¯: ${error.message}`)
                        console.error(`    å»ºè®®: ${error.suggestion}`)
                    })
                }
            })
            
            return {
                hasErrors: true,
                checkResults,
                batchFixSuggestion: this.generateBatchFixSuggestion(checkResults)
            }
        }
        
        console.log('âœ… æ‰€æœ‰åŸŸåé…ç½®æ£€æŸ¥é€šè¿‡')
        return {
            hasErrors: false,
            checkResults
        }
    }
    
    // ğŸ”´ ç”Ÿæˆæ‰¹é‡ä¿®å¤å»ºè®®
    generateBatchFixSuggestion(checkResults) {
        const filesToFix = checkResults.filter(result => result.hasErrors)
        
        return {
            description: 'æ‰¹é‡ä¿®å¤åŸŸåé…ç½®é”™è¯¯',
            files: filesToFix.map(result => result.file),
            operations: filesToFix.flatMap(result => 
                result.errors.map(error => ({
                    file: result.file,
                    type: 'replace',
                    from: error.incorrectDomain,
                    to: error.correctDomain
                }))
            ),
            estimatedTimeSaving: filesToFix.length * 2000 // 2ç§’æ¯ä¸ªæ–‡ä»¶
        }
    }
}
```

### ğŸ”§ APIè·¯å¾„é”™è¯¯è‡ªåŠ¨æ£€æµ‹è§„åˆ™
```javascript
// ğŸ”´ APIè·¯å¾„é”™è¯¯è‡ªåŠ¨æ£€æµ‹ç³»ç»Ÿ
class APIPathValidator {
    constructor() {
        this.correctPaths = {
            'auth': {
                'verify': '/api/auth/verify-token',     // ä¸æ˜¯ /api/auth/verify
                'login': '/api/auth/login',
                'refresh': '/api/auth/refresh',
                'logout': '/api/auth/logout'
            },
            'user': {
                'info': '/api/user/info',
                'update': '/api/user/update',
                'points': '/api/user/points'
            },
            'lottery': {
                'config': '/api/lottery/config',
                'draw': '/api/lottery/draw',
                'records': '/api/lottery/records'
            }
        }
        
        this.commonErrors = [
            { incorrect: '/api/auth/verify', correct: '/api/auth/verify-token' },
            { incorrect: '/api/user/userinfo', correct: '/api/user/info' },
            { incorrect: '/api/lottery/getconfig', correct: '/api/lottery/config' }
        ]
    }
    
    // ğŸ”´ æ£€æŸ¥APIè·¯å¾„æ˜¯å¦æ­£ç¡®
    validateAPIPath(path) {
        const errors = []
        
        // æ£€æŸ¥æ˜¯å¦æ˜¯å·²çŸ¥çš„é”™è¯¯è·¯å¾„
        const knownError = this.commonErrors.find(error => error.incorrect === path)
        if (knownError) {
            errors.push({
                type: 'INCORRECT_API_PATH',
                message: `APIè·¯å¾„é”™è¯¯: ${path}`,
                suggestion: `æ­£ç¡®è·¯å¾„: ${knownError.correct}`,
                severity: 'HIGH'
            })
        }
        
        // æ£€æŸ¥è·¯å¾„æ ¼å¼
        if (!path.startsWith('/api/')) {
            errors.push({
                type: 'MISSING_API_PREFIX',
                message: `APIè·¯å¾„ç¼ºå°‘å‰ç¼€: ${path}`,
                suggestion: `åº”è¯¥ä»¥/api/å¼€å¤´`,
                severity: 'MEDIUM'
            })
        }
        
        return errors
    }
    
    // ğŸ”´ è‡ªåŠ¨æ‰«ææ‰€æœ‰APIè°ƒç”¨
    async scanAllAPIUsages() {
        console.log('ğŸ” å¼€å§‹APIè·¯å¾„å…¨é¢æ‰«æ...')
        
        const filesToScan = [
            'utils/api.js',
            'pages/*/index.js',
            'components/*/index.js'
        ]
        
        const results = []
        
        // å¹¶è¡Œæ‰«ææ‰€æœ‰æ–‡ä»¶
        const scanPromises = filesToScan.map(async pattern => {
            const files = await this.findFiles(pattern)
            const fileResults = await Promise.all(
                files.map(file => this.scanFileForAPIPaths(file))
            )
            return fileResults.flat()
        })
        
        const scanResults = await Promise.all(scanPromises)
        const allResults = scanResults.flat()
        
        // è¿‡æ»¤å‡ºæœ‰é”™è¯¯çš„ç»“æœ
        const errorsFound = allResults.filter(result => result.errors.length > 0)
        
        if (errorsFound.length > 0) {
            console.error('ğŸš¨ å‘ç°APIè·¯å¾„é”™è¯¯ï¼š')
            errorsFound.forEach(result => {
                console.error(`  æ–‡ä»¶: ${result.file}`)
                result.errors.forEach(error => {
                    console.error(`    ${error.message}`)
                    console.error(`    å»ºè®®: ${error.suggestion}`)
                })
            })
        }
        
        return {
            totalFiles: allResults.length,
            errorFiles: errorsFound.length,
            results: allResults,
            batchFixSuggestion: errorsFound.length > 0 ? 
                this.generateBatchAPIFixSuggestion(errorsFound) : null
        }
    }
}
```

### âš¡ å¹¶è¡Œå·¥å…·è°ƒç”¨å¼ºåˆ¶ä¼˜åŒ–è§„åˆ™
```javascript
// ğŸ”´ å¹¶è¡Œå·¥å…·è°ƒç”¨å¼ºåˆ¶ä¼˜åŒ–ç³»ç»Ÿ
class ParallelToolCallForcer {
    constructor() {
        this.parallelableTools = [
            'read_file',
            'grep_search', 
            'list_dir',
            'file_search',
            'codebase_search'
        ]
        
        this.executionStats = {
            totalCalls: 0,
            parallelCalls: 0,
            serialCalls: 0,
            timeSaved: 0,
            opportunities: 0
        }
    }
    
    // ğŸ”´ å¼ºåˆ¶æ£€æŸ¥æ˜¯å¦å¯ä»¥å¹¶è¡Œæ‰§è¡Œ
    checkParallelOpportunity(plannedCalls) {
        const parallelable = plannedCalls.filter(call => 
            this.parallelableTools.includes(call.tool) && 
            !call.dependsOnPrevious
        )
        
        if (parallelable.length > 1) {
            const timeSavingPotential = (parallelable.length - 1) * 3000 // 3ç§’æ¯ä¸ªè°ƒç”¨
            
            console.warn(`âš ï¸ å¹¶è¡Œæ‰§è¡Œæœºä¼šæ£€æµ‹åˆ°ï¼š`)
            console.warn(`  å¯å¹¶è¡Œè°ƒç”¨: ${parallelable.length}ä¸ª`)
            console.warn(`  é¢„è®¡èŠ‚çœæ—¶é—´: ${timeSavingPotential}ms`)
            console.warn(`  å»ºè®®: ä½¿ç”¨Promise.all()å¹¶è¡Œæ‰§è¡Œ`)
            
            this.executionStats.opportunities++
            
            return {
                canParallelize: true,
                calls: parallelable,
                timeSavingPotential,
                recommendation: this.generateParallelRecommendation(parallelable)
            }
        }
        
        return { canParallelize: false }
    }
    
    // ğŸ”´ ç”Ÿæˆå¹¶è¡Œæ‰§è¡Œå»ºè®®
    generateParallelRecommendation(calls) {
        const callDescriptions = calls.map(call => 
            `${call.tool}(${call.target || call.query || 'unknown'})`
        ).join(', ')
        
        return {
            description: `å¹¶è¡Œæ‰§è¡Œ${calls.length}ä¸ªå·¥å…·è°ƒç”¨`,
            calls: callDescriptions,
            estimatedTime: Math.max(...calls.map(call => call.estimatedTime || 3000)),
            serialTime: calls.reduce((sum, call) => sum + (call.estimatedTime || 3000), 0),
            timeSaved: calls.reduce((sum, call) => sum + (call.estimatedTime || 3000), 0) - Math.max(...calls.map(call => call.estimatedTime || 3000)),
            
            implementation: `
// ğŸ”´ æ¨èçš„å¹¶è¡Œæ‰§è¡Œä»£ç 
const parallelCalls = [
${calls.map(call => `  ${call.tool}(${JSON.stringify(call.params || {})})`).join(',\n')}
]

const results = await Promise.all(parallelCalls)
console.log('âœ… å¹¶è¡Œæ‰§è¡Œå®Œæˆï¼ŒèŠ‚çœæ—¶é—´:', timeSaved + 'ms')
            `
        }
    }
    
    // ğŸ”´ è®°å½•æ‰§è¡Œç»Ÿè®¡
    recordExecution(callType, count = 1) {
        this.executionStats.totalCalls += count
        
        if (callType === 'parallel') {
            this.executionStats.parallelCalls += count
            this.executionStats.timeSaved += (count - 1) * 3000
        } else {
            this.executionStats.serialCalls += count
        }
        
        this.updateEfficiencyScore()
    }
    
    // ğŸ”´ æ›´æ–°æ•ˆç‡è¯„åˆ†
    updateEfficiencyScore() {
        const parallelEfficiency = this.executionStats.totalCalls > 0 ? 
            (this.executionStats.parallelCalls / this.executionStats.totalCalls) * 100 : 0
            
        console.log(`ğŸ“Š å¹¶è¡Œæ‰§è¡Œæ•ˆç‡: ${Math.round(parallelEfficiency)}%`)
        
        if (parallelEfficiency < 50) {
            console.warn(`âš ï¸ å¹¶è¡Œæ•ˆç‡è¿‡ä½ï¼Œå»ºè®®å¢åŠ å¹¶è¡Œå·¥å…·è°ƒç”¨`)
        }
        
        return parallelEfficiency
    }
}
```

### ğŸ”„ é‡å¤é—®é¢˜é¢„é˜²è§„åˆ™
```javascript
// ğŸ”´ é‡å¤é—®é¢˜é¢„é˜²ç³»ç»Ÿ
class DuplicationPreventer {
    constructor() {
        this.processedIssues = new Set()
        this.issuePatterns = {
            'DOMAIN_CONFIG': {
                pattern: /åŸŸå.*é…ç½®.*é”™è¯¯/,
                relatedFiles: ['config/env.js', 'project.private.config.json', '*.md'],
                batchStrategy: 'replace_all_occurrences'
            },
            'API_PATH': {
                pattern: /API.*è·¯å¾„.*é”™è¯¯/,
                relatedFiles: ['utils/api.js', 'pages/*/index.js'],
                batchStrategy: 'targeted_replacement'
            },
            'METHOD_CALL': {
                pattern: /æ–¹æ³•.*è°ƒç”¨.*é”™è¯¯/,
                relatedFiles: ['pages/*/index.js', 'components/*/index.js'],
                batchStrategy: 'import_and_call_fix'
            }
        }
    }
    
    // ğŸ”´ æ£€æŸ¥æ˜¯å¦æ˜¯é‡å¤é—®é¢˜
    checkDuplication(issue) {
        const issueKey = this.generateIssueKey(issue)
        
        if (this.processedIssues.has(issueKey)) {
            return {
                isDuplicate: true,
                message: `é‡å¤é—®é¢˜æ£€æµ‹: ${issue.description}`,
                recommendation: 'å»ºè®®ä½¿ç”¨æ‰¹å¤„ç†ç­–ç•¥ä¸€æ¬¡æ€§è§£å†³æ‰€æœ‰ç›¸å…³é—®é¢˜'
            }
        }
        
        // æ£€æŸ¥æ˜¯å¦æ˜¯å·²çŸ¥æ¨¡å¼
        for (const [patternType, config] of Object.entries(this.issuePatterns)) {
            if (config.pattern.test(issue.description)) {
                return {
                    isDuplicate: false,
                    patternType,
                    batchStrategy: config.batchStrategy,
                    relatedFiles: config.relatedFiles,
                    recommendation: `æ£€æµ‹åˆ°${patternType}é—®é¢˜ï¼Œå»ºè®®æ‰¹é‡å¤„ç†${config.relatedFiles.length}ä¸ªç›¸å…³æ–‡ä»¶`
                }
            }
        }
        
        return { isDuplicate: false }
    }
    
    // ğŸ”´ ç”Ÿæˆæ‰¹å¤„ç†è®¡åˆ’
    generateBatchPlan(issue, patternType) {
        const config = this.issuePatterns[patternType]
        
        return {
            type: 'BATCH_PROCESSING',
            patternType,
            strategy: config.batchStrategy,
            files: config.relatedFiles,
            operations: this.generateBatchOperations(issue, config),
            estimatedTime: config.relatedFiles.length * 2000, // 2ç§’æ¯ä¸ªæ–‡ä»¶
            parallelizable: true
        }
    }
    
    // ğŸ”´ æ‰§è¡Œæ‰¹å¤„ç†
    async executeBatchPlan(plan) {
        console.log(`ğŸ”„ å¼€å§‹æ‰¹å¤„ç†: ${plan.patternType}`)
        
        const results = []
        
        // å¹¶è¡Œå¤„ç†æ‰€æœ‰æ–‡ä»¶
        const processPromises = plan.files.map(async filePattern => {
            const files = await this.findFiles(filePattern)
            const fileResults = await Promise.all(
                files.map(file => this.applyBatchOperations(file, plan.operations))
            )
            return fileResults.flat()
        })
        
        const allResults = await Promise.all(processPromises)
        const flatResults = allResults.flat()
        
        // ç»Ÿè®¡ç»“æœ
        const successCount = flatResults.filter(r => r.success).length
        const errorCount = flatResults.filter(r => !r.success).length
        
        console.log(`âœ… æ‰¹å¤„ç†å®Œæˆ: ${successCount}ä¸ªæˆåŠŸï¼Œ${errorCount}ä¸ªå¤±è´¥`)
        
        return {
            planType: plan.patternType,
            totalFiles: flatResults.length,
            successCount,
            errorCount,
            results: flatResults,
            timeSaved: plan.estimatedTime * 0.7 // ä¼°ç®—èŠ‚çœ70%æ—¶é—´
        }
    }
}
```

### ğŸ¯ ä»»åŠ¡ä¼˜å…ˆçº§ç®¡ç†è§„åˆ™
```javascript
// ğŸ”´ ä»»åŠ¡ä¼˜å…ˆçº§ç®¡ç†ç³»ç»Ÿ
class TaskPriorityManager {
    constructor() {
        this.priorityLevels = {
            'CRITICAL': { weight: 10, maxWaitTime: 0 },      // ç«‹å³å¤„ç†
            'HIGH': { weight: 8, maxWaitTime: 300000 },      // 5åˆ†é’Ÿå†…å¤„ç†
            'MEDIUM': { weight: 5, maxWaitTime: 900000 },    // 15åˆ†é’Ÿå†…å¤„ç†
            'LOW': { weight: 2, maxWaitTime: 1800000 }       // 30åˆ†é’Ÿå†…å¤„ç†
        }
        
        this.taskQueue = []
        this.processingQueue = []
        this.completedTasks = []
    }
    
    // ğŸ”´ æ·»åŠ ä»»åŠ¡å¹¶è‡ªåŠ¨æ’åº
    addTask(task) {
        const taskWithPriority = {
            ...task,
            id: this.generateTaskId(),
            createdAt: Date.now(),
            priority: this.calculatePriority(task),
            weight: this.priorityLevels[task.severity || 'MEDIUM'].weight
        }
        
        this.taskQueue.push(taskWithPriority)
        
        // æŒ‰ä¼˜å…ˆçº§æ’åº
        this.taskQueue.sort((a, b) => {
            if (a.priority !== b.priority) {
                return b.weight - a.weight // é«˜ä¼˜å…ˆçº§åœ¨å‰
            }
            return a.createdAt - b.createdAt // åŒä¼˜å…ˆçº§æŒ‰æ—¶é—´æ’åº
        })
        
        console.log(`ğŸ“‹ ä»»åŠ¡å·²æ·»åŠ : ${task.description} (ä¼˜å…ˆçº§: ${taskWithPriority.priority})`)
        this.printTaskQueue()
        
        return taskWithPriority.id
    }
    
    // ğŸ”´ è®¡ç®—ä»»åŠ¡ä¼˜å…ˆçº§
    calculatePriority(task) {
        // åŸºäºé—®é¢˜ç±»å‹å’Œå½±å“èŒƒå›´è®¡ç®—ä¼˜å…ˆçº§
        const severityMap = {
            'DOMAIN_CONFIG_ERROR': 'CRITICAL',    // åŸŸåé”™è¯¯å½±å“æ‰€æœ‰åŠŸèƒ½
            'API_PATH_ERROR': 'HIGH',            // APIé”™è¯¯å½±å“å…·ä½“åŠŸèƒ½
            'METHOD_CALL_ERROR': 'HIGH',         // æ–¹æ³•è°ƒç”¨é”™è¯¯å½±å“å…·ä½“åŠŸèƒ½
            'NETWORK_CONFIG': 'MEDIUM',          // ç½‘ç»œé…ç½®å½±å“ç”¨æˆ·ä½“éªŒ
            'DOCUMENTATION': 'LOW'               // æ–‡æ¡£é—®é¢˜å½±å“ç»´æŠ¤
        }
        
        const impactMap = {
            'SYSTEM_WIDE': 'CRITICAL',           // ç³»ç»Ÿçº§å½±å“
            'FEATURE_BREAKING': 'HIGH',          // åŠŸèƒ½çº§å½±å“
            'USER_EXPERIENCE': 'MEDIUM',         // ç”¨æˆ·ä½“éªŒå½±å“
            'MAINTENANCE': 'LOW'                 // ç»´æŠ¤çº§å½±å“
        }
        
        const calculatedSeverity = severityMap[task.type] || 'MEDIUM'
        const calculatedImpact = impactMap[task.impact] || 'MEDIUM'
        
        // å–æœ€é«˜ä¼˜å…ˆçº§
        const priorities = ['CRITICAL', 'HIGH', 'MEDIUM', 'LOW']
        const severityIndex = priorities.indexOf(calculatedSeverity)
        const impactIndex = priorities.indexOf(calculatedImpact)
        
        return priorities[Math.min(severityIndex, impactIndex)]
    }
    
    // ğŸ”´ è·å–ä¸‹ä¸€ä¸ªè¦å¤„ç†çš„ä»»åŠ¡
    getNextTask() {
        if (this.taskQueue.length === 0) {
            return null
        }
        
        const nextTask = this.taskQueue.shift()
        this.processingQueue.push(nextTask)
        
        console.log(`ğŸ¯ å¼€å§‹å¤„ç†ä»»åŠ¡: ${nextTask.description}`)
        return nextTask
    }
    
    // ğŸ”´ å®Œæˆä»»åŠ¡
    completeTask(taskId, result) {
        const taskIndex = this.processingQueue.findIndex(t => t.id === taskId)
        
        if (taskIndex === -1) {
            console.error(`âŒ ä»»åŠ¡æœªæ‰¾åˆ°: ${taskId}`)
            return false
        }
        
        const task = this.processingQueue.splice(taskIndex, 1)[0]
        task.completedAt = Date.now()
        task.processingTime = task.completedAt - task.createdAt
        task.result = result
        
        this.completedTasks.push(task)
        
        console.log(`âœ… ä»»åŠ¡å®Œæˆ: ${task.description} (è€—æ—¶: ${task.processingTime}ms)`)
        
        // æ£€æŸ¥æ˜¯å¦æ‰€æœ‰ä»»åŠ¡å®Œæˆ
        if (this.taskQueue.length === 0 && this.processingQueue.length === 0) {
            console.log('ğŸ‰ æ‰€æœ‰ä»»åŠ¡å·²å®Œæˆï¼')
            this.generateCompletionReport()
        }
        
        return true
    }
    
    // ğŸ”´ ç”Ÿæˆå®ŒæˆæŠ¥å‘Š
    generateCompletionReport() {
        const totalTasks = this.completedTasks.length
        const totalTime = this.completedTasks.reduce((sum, task) => sum + task.processingTime, 0)
        const avgTime = totalTime / totalTasks
        
        const priorityStats = this.completedTasks.reduce((stats, task) => {
            stats[task.priority] = (stats[task.priority] || 0) + 1
            return stats
        }, {})
        
        console.log(`ğŸ“Š ä»»åŠ¡å®ŒæˆæŠ¥å‘Š:`)
        console.log(`  æ€»ä»»åŠ¡æ•°: ${totalTasks}`)
        console.log(`  æ€»è€—æ—¶: ${totalTime}ms`)
        console.log(`  å¹³å‡è€—æ—¶: ${Math.round(avgTime)}ms`)
        console.log(`  ä¼˜å…ˆçº§åˆ†å¸ƒ:`, priorityStats)
        
        return {
            totalTasks,
            totalTime,
            avgTime,
            priorityStats,
            completedTasks: this.completedTasks
        }
    }
}
```

---

**æ–°å¢è§„åˆ™åˆ›å»ºæ—¶é—´**: 2025å¹´01æœˆ03æ—¥  
**åŸºäºé—®é¢˜**: å¤©å·¥é¡¹ç›®åŸŸåé…ç½®é”™è¯¯ã€APIè°ƒç”¨é”™è¯¯ã€å¹¶è¡Œæ‰§è¡Œä¸è¶³ç­‰é—®é¢˜  
**é¢„æœŸæ•ˆæœ**: é¢„é˜²é‡å¤é—®é¢˜ï¼Œæå‡60%ä»¥ä¸Šå¼€å‘æ•ˆç‡  
**é€‚ç”¨åœºæ™¯**: æ‰€æœ‰æ¶‰åŠé…ç½®ä¿®æ”¹ã€APIè°ƒç”¨ã€æ‰¹é‡æ“ä½œçš„å¼€å‘ä¼šè¯




# ğŸ”Œ æ¥å£å¯¹æ¥è§„èŒƒæ–‡æ¡£ - ç¼–å†™æ ‡å‡†ä¸å‡†åˆ™

> **å‰åç«¯æ¥å£å¯¹æ¥å®Œæ•´è§„èŒƒ** - ä¸‰ç«¯åä½œçš„æ ‡å‡†åŒ–æ¥å£æ–‡æ¡£

## ğŸ“‹ ä¸€ã€æ–‡æ¡£å®šä½ä¸æ ‡å‡†

### 1.1 æ–‡æ¡£å®šä½
- **å¤šé‡å—ä¼—**ï¼šå‰ç«¯å¼€å‘ã€åç«¯å¼€å‘ã€æµ‹è¯•å·¥ç¨‹å¸ˆ
- **æ ¸å¿ƒèŒè´£**ï¼šå®šä¹‰å‰åç«¯æ•°æ®äº¤äº’æ ‡å‡†å’Œåè®®
- **æŠ€æœ¯è¾¹ç•Œ**ï¼šä¸“æ³¨æ¥å£å±‚é¢ï¼Œè¿æ¥å‰ç«¯ã€åç«¯ã€æ•°æ®åº“ä¸‰ç«¯
- **å†…å®¹æ·±åº¦**ï¼šæä¾›å¯ç›´æ¥ä½¿ç”¨çš„æ¥å£è§„èŒƒå’Œç¤ºä¾‹

### 1.2 æ–‡æ¡£ç»“æ„æ ‡å‡†
```
# å‰åç«¯æ¥å£å¯¹æ¥è§„èŒƒ
â”œâ”€â”€ ğŸ”Œ APIæ¥å£å®šä¹‰è§„èŒƒ
â”œâ”€â”€ ğŸ“Š æ•°æ®æ ¼å¼è§„èŒƒ
â”œâ”€â”€ ğŸ” è®¤è¯æˆæƒè§„èŒƒ
â”œâ”€â”€ âŒ é”™è¯¯ç å®šä¹‰è§„èŒƒ
â”œâ”€â”€ ğŸ“¡ WebSocketé€šä¿¡è§„èŒƒ
â”œâ”€â”€ ğŸ“ æ–‡ä»¶ä¸Šä¼ è§„èŒƒ
â”œâ”€â”€ ğŸ§ª æ¥å£æµ‹è¯•è§„èŒƒ
â””â”€â”€ ğŸ“– æ¥å£æ–‡æ¡£ç»´æŠ¤è§„èŒƒ
``` 

## ğŸ”Œ äºŒã€APIæ¥å£å®šä¹‰è§„èŒƒ

### 2.1 RESTful APIè®¾è®¡æ ‡å‡†
```javascript
// ğŸ”´ API URLè®¾è®¡è§„èŒƒ
const API_URL_STANDARDS = {
  // åŸºç¡€ç»“æ„ï¼š{domain}/api/{version}/{resource}
  basePattern: 'https://domain.com/api/v1/resource',
  
  // èµ„æºå‘½åï¼šä½¿ç”¨å¤æ•°å½¢å¼ï¼Œkebab-caseå‘½å
  resourceNaming: {
    users: '/api/v1/users',
    lotteryRecords: '/api/v1/lottery-records',
    exchangeRecords: '/api/v1/exchange-records'
  },
  
  // HTTPæ–¹æ³•ä½¿ç”¨è§„èŒƒ
  httpMethods: {
    GET: 'è·å–èµ„æº',
    POST: 'åˆ›å»ºèµ„æº',
    PUT: 'å®Œæ•´æ›´æ–°èµ„æº',
    PATCH: 'éƒ¨åˆ†æ›´æ–°èµ„æº',
    DELETE: 'åˆ é™¤èµ„æº'
  }
}

// ğŸ”´ ç»Ÿä¸€å“åº”æ ¼å¼æ ‡å‡†
const RESPONSE_FORMAT = {
  // æˆåŠŸå“åº”æ ¼å¼
  success: {
    code: 0,                    // ä¸šåŠ¡çŠ¶æ€ç ï¼Œ0è¡¨ç¤ºæˆåŠŸ
    message: 'success',         // å“åº”æ¶ˆæ¯
    data: {},                   // å“åº”æ•°æ®
    timestamp: '2024-12-19T10:30:00Z'  // æ—¶é—´æˆ³
  },
  
  // é”™è¯¯å“åº”æ ¼å¼
  error: {
    code: 400,                  // é”™è¯¯ç 
    message: 'error message',   // é”™è¯¯æè¿°
    data: null,                 // é”™è¯¯æ—¶dataä¸ºnull
    timestamp: '2024-12-19T10:30:00Z'
  },
  
  // åˆ†é¡µå“åº”æ ¼å¼
  pagination: {
    code: 0,
    message: 'success',
    data: {
      list: [],                 // æ•°æ®åˆ—è¡¨
      total: 100,               // æ€»æ•°é‡
      page: 1,                  // å½“å‰é¡µç 
      limit: 20,                // æ¯é¡µæ•°é‡
      totalPages: 5,            // æ€»é¡µæ•°
      hasMore: true             // æ˜¯å¦æœ‰æ›´å¤šæ•°æ®
    },
    timestamp: '2024-12-19T10:30:00Z'
  }
}
```

### 2.2 æ ¸å¿ƒæ¥å£å®šä¹‰
```javascript
// ğŸ”´ ç”¨æˆ·è®¤è¯æ¨¡å—æ¥å£
const AUTH_APIs = {
  // å‘é€çŸ­ä¿¡éªŒè¯ç 
  sendCode: {
    method: 'POST',
    url: '/api/v1/auth/send-code',
    description: 'å‘é€æ‰‹æœºéªŒè¯ç ',
    requestBody: {
      mobile: 'string',         // æ‰‹æœºå·ï¼Œå¿…éœ€ï¼Œæ ¼å¼ï¼š1[3-9]xxxxxxxxx
    },
    responseExample: {
      code: 0,
      message: 'éªŒè¯ç å‘é€æˆåŠŸ',
      data: {
        expireTime: 300         // éªŒè¯ç æœ‰æ•ˆæœŸï¼ˆç§’ï¼‰
      }
    },
    errorCodes: [400, 429, 500]
  },
  
  // ç”¨æˆ·ç™»å½•
  login: {
    method: 'POST',
    url: '/api/v1/auth/login',
    description: 'æ‰‹æœºå·+éªŒè¯ç ç™»å½•',
    requestBody: {
      mobile: 'string',         // æ‰‹æœºå·ï¼Œå¿…éœ€
      code: 'string'            // éªŒè¯ç ï¼Œå¿…éœ€ï¼Œ6ä½æ•°å­—
    },
    responseExample: {
      code: 0,
      message: 'ç™»å½•æˆåŠŸ',
      data: {
        accessToken: 'eyJ...',  // è®¿é—®ä»¤ç‰Œ
        refreshToken: 'eyJ...', // åˆ·æ–°ä»¤ç‰Œ
        expiresIn: 7200,        // ä»¤ç‰Œæœ‰æ•ˆæœŸï¼ˆç§’ï¼‰
        userInfo: {             // ç”¨æˆ·ä¿¡æ¯
          userId: 123,
          mobile: '138****8000',
          nickname: 'ç”¨æˆ·æ˜µç§°',
          avatar: 'https://...',
          totalPoints: 1500,
          isMerchant: false
        }
      }
    }
  }
}

// ğŸ”´ æŠ½å¥–æ¨¡å—æ¥å£ï¼ˆåŸºäºå¤©å·¥é¡¹ç›®ï¼‰
const LOTTERY_APIs = {
  // è·å–æŠ½å¥–é…ç½®
  getConfig: {
    method: 'GET',
    url: '/api/lottery/config',
    description: 'è·å–æŠ½å¥–è½¬ç›˜é…ç½®',
    headers: {
      'Authorization': 'Bearer {accessToken}'
    },
    responseExample: {
      code: 0,
      message: 'è·å–æˆåŠŸ',
      data: {
        prizes: [
          {
            prize_id: 1,
            prize_name: "å…«å…«æŠ˜åˆ¸",
            angle: 0,              // ğŸ”´ Canvasè½¬ç›˜è§’åº¦(0-315,æ­¥é•¿45)
            color: "#FF6B35",      // ğŸ”´ æ‰‡å½¢é¢œè‰²(åå…­è¿›åˆ¶)
            probability: 0.05,     // ğŸ”´ ä¸­å¥–æ¦‚ç‡(0-1)
            prize_type: "coupon",
            prize_value: 0.88
          },
          {
            prize_id: 2,
            prize_name: "ä¹å…«æŠ˜åˆ¸",
            angle: 45,
            color: "#4ECDC4",
            probability: 0.10,
            prize_type: "coupon",
            prize_value: 0.98
          },
          {
            prize_id: 3,
            prize_name: "ç”œå“1ä»½",
            angle: 90,
            color: "#45B7D1",
            probability: 0.30,
            prize_type: "physical",
            prize_value: 15.00
          },
          {
            prize_id: 4,
            prize_name: "é’èœ1ä»½",
            angle: 135,
            color: "#F39C12",
            probability: 0.30,
            prize_type: "physical",
            prize_value: 12.00
          },
          {
            prize_id: 5,
            prize_name: "è™¾1ä»½",
            angle: 180,
            color: "#E74C3C",
            probability: 0.05,
            prize_type: "physical",
            prize_value: 25.00
          },
          {
            prize_id: 6,
            prize_name: "èŠ±ç”²1ä»½",
            angle: 225,
            color: "#9B59B6",
            probability: 0.20,
            prize_type: "physical",
            prize_value: 18.00
          },
          {
            prize_id: 7,
            prize_name: "é±¿é±¼1ä»½",
            angle: 270,
            color: "#1ABC9C",
            probability: 0.05,
            prize_type: "physical",
            prize_value: 22.00
          },
          {
            prize_id: 8,
            prize_name: "ç”Ÿè…Œæ‹¼ç›˜158",
            angle: 315,
            color: "#34495E",
            probability: 0.00,
            prize_type: "physical",
            prize_value: 158.00
          }
        ],
        cost_points: 100,          // ğŸ”´ å•æ¬¡æŠ½å¥–æ¶ˆè€—ç§¯åˆ†
        daily_limit: 10            // ğŸ”´ æ¯æ—¥æŠ½å¥–æ¬¡æ•°é™åˆ¶
      }
    }
  },
  
  // æ‰§è¡ŒæŠ½å¥–
  draw: {
    method: 'POST',
    url: '/api/lottery/draw',
    description: 'æ‰§è¡ŒæŠ½å¥–æ“ä½œ',
    headers: {
      'Authorization': 'Bearer {accessToken}'
    },
    requestBody: {
      draw_type: 'string',      // æŠ½å¥–ç±»å‹: single, triple, quintuple, decuple
      count: 'number'           // æŠ½å¥–æ¬¡æ•°: 1, 3, 5, 10
    },
    responseExample: {
      code: 0,
      message: 'æŠ½å¥–æˆåŠŸ',
      data: {
        results: [
          {
            prize_id: 1,
            prize_name: "å…«å…«æŠ˜åˆ¸",
            angle: 42.5,           // ğŸ”´ æœ€ç»ˆåœæ­¢è§’åº¦
            is_near_miss: false    // ğŸ”´ æ˜¯å¦å·®ç‚¹ä¸­å¥–
          }
        ],
        remaining_points: 1400,    // ğŸ”´ å‰©ä½™ç§¯åˆ†
        today_draw_count: 3        // ğŸ”´ ä»Šæ—¥æŠ½å¥–æ¬¡æ•°
      }
    }
  }
}

// ğŸ”´ å•†å“å…‘æ¢æ¨¡å—æ¥å£
const EXCHANGE_APIs = {
  // è·å–å•†å“åˆ—è¡¨
  getProducts: {
    method: 'GET',
    url: '/api/exchange/products',
    description: 'è·å–å¯å…‘æ¢å•†å“åˆ—è¡¨',
    headers: {
      'Authorization': 'Bearer {accessToken}'
    },
    queryParams: {
      category: 'string',       // å¯é€‰ï¼Œå•†å“åˆ†ç±»
      page: 'number',           // å¯é€‰ï¼Œé¡µç ï¼Œé»˜è®¤1
      limit: 'number'           // å¯é€‰ï¼Œæ¯é¡µæ•°é‡ï¼Œé»˜è®¤20
    },
    responseExample: {
      code: 0,
      message: 'è·å–æˆåŠŸ',
      data: {
        products: [
          {
            commodity_id: 1,
            name: "å…è´¹é¥®å“åˆ¸",
            exchange_points: 500,    // ğŸ”´ å…‘æ¢æ‰€éœ€ç§¯åˆ†
            stock: 100,             // ğŸ”´ åº“å­˜æ•°é‡
            category: "voucher",     // ğŸ”´ å•†å“åˆ†ç±»
            is_hot: true,           // ğŸ”´ æ˜¯å¦çƒ­é—¨
            image_url: "https://...",
            description: "ä»»æ„é¥®å“å…è´¹å…‘æ¢"
          }
        ],
        total: 50,
        has_more: true
      }
    }
  },
  
  // å•†å“å…‘æ¢
  redeem: {
    method: 'POST',
    url: '/api/exchange/redeem',
    description: 'å…‘æ¢å•†å“',
    headers: {
      'Authorization': 'Bearer {accessToken}'
    },
    requestBody: {
      commodity_id: 'number',   // å•†å“IDï¼Œå¿…éœ€
      quantity: 'number'        // å…‘æ¢æ•°é‡ï¼Œå¿…éœ€ï¼Œé»˜è®¤1
    },
    responseExample: {
      code: 0,
      message: 'å…‘æ¢æˆåŠŸ',
      data: {
        order_id: "EX20241219001",
        commodity_name: "å…è´¹é¥®å“åˆ¸",
        exchange_points: 500,
        quantity: 1,
        total_points: 500,
        remaining_points: 1000,
        exchange_code: "ABC123456",  // ğŸ”´ å…‘æ¢ç 
        expire_time: "2024-12-26T23:59:59Z"
      }
    }
  }
}

// ğŸ”´ å›¾ç‰‡ä¸Šä¼ æ¨¡å—æ¥å£
const PHOTO_APIs = {
  // å›¾ç‰‡ä¸Šä¼ 
  upload: {
    method: 'POST',
    url: '/api/photo/upload',
    description: 'ä¸Šä¼ æ¶ˆè´¹å°ç¥¨å›¾ç‰‡',
    headers: {
      'Authorization': 'Bearer {accessToken}',
      'Content-Type': 'multipart/form-data'
    },
    requestBody: {
      file: 'File',             // å›¾ç‰‡æ–‡ä»¶ï¼Œå¿…éœ€
      amount: 'number'          // æ¶ˆè´¹é‡‘é¢ï¼Œå¿…éœ€
    },
    responseExample: {
      code: 0,
      message: 'ä¸Šä¼ æˆåŠŸ',
      data: {
        upload_id: "UP123456789",
        image_url: "https://sealos.../image.jpg",
        amount: 58.50,
        expected_points: 585,     // é¢„æœŸç§¯åˆ†(1å…ƒ=10ç§¯åˆ†)
        status: "pending"         // å®¡æ ¸çŠ¶æ€
      }
    }
  },
  
  // ä¸Šä¼ è®°å½•
  getRecords: {
    method: 'GET',
    url: '/api/photo/records',
    description: 'è·å–ä¸Šä¼ è®°å½•',
    headers: {
      'Authorization': 'Bearer {accessToken}'
    },
    queryParams: {
      status: 'string',         // å¯é€‰ï¼Œå®¡æ ¸çŠ¶æ€: pending, approved, rejected
      page: 'number',
      limit: 'number'
    },
    responseExample: {
      code: 0,
      message: 'è·å–æˆåŠŸ',
      data: {
        records: [
          {
            upload_id: "UP123456789",
            image_url: "https://...",
            amount: 58.50,
            points_awarded: 585,
            review_status: "approved",
            review_reason: "å®¡æ ¸é€šè¿‡",
            created_at: "2024-12-19T14:30:00Z",
            reviewed_at: "2024-12-19T15:00:00Z"
          }
        ],
        total: 20,
        has_more: false
      }
    }
  }
}

// ğŸ”´ å•†å®¶ç®¡ç†æ¨¡å—æ¥å£
const MERCHANT_APIs = {
  // å¾…å®¡æ ¸åˆ—è¡¨
  getPendingReviews: {
    method: 'GET',
    url: '/api/merchant/pending-reviews',
    description: 'è·å–å¾…å®¡æ ¸ä¸Šä¼ åˆ—è¡¨',
    headers: {
      'Authorization': 'Bearer {accessToken}'
    },
    queryParams: {
      page: 'number',
      limit: 'number'
    },
    responseExample: {
      code: 0,
      message: 'è·å–æˆåŠŸ',
      data: {
        reviews: [
          {
            upload_id: "UP123456789",      // ğŸ”´ ä¸Šä¼ ID
            user_phone: "138****8000",     // ğŸ”´ ç”¨æˆ·æ‰‹æœºå·(è„±æ•)
            image_url: "å›¾ç‰‡URL",          // ğŸ”´ å›¾ç‰‡åœ°å€
            amount: 58.50,                 // ğŸ”´ æ¶ˆè´¹é‡‘é¢
            expected_points: 585,          // ğŸ”´ å»ºè®®ç§¯åˆ†
            upload_time: "2024-12-19T14:30:00Z",
            status: "pending"              // ğŸ”´ å®¡æ ¸çŠ¶æ€
          }
        ],
        total: 50,
        has_more: true
      }
    }
  },
  
  // æ‰§è¡Œå®¡æ ¸
  review: {
    method: 'POST',
    url: '/api/merchant/review',
    description: 'å®¡æ ¸ä¸Šä¼ å†…å®¹',
    headers: {
      'Authorization': 'Bearer {accessToken}'
    },
    requestBody: {
      upload_id: 'string',      // ä¸Šä¼ IDï¼Œå¿…éœ€
      action: 'string',         // å®¡æ ¸åŠ¨ä½œ: approve, reject
      points: 'number',         // å¥–åŠ±ç§¯åˆ†ï¼Œapproveæ—¶å¿…éœ€
      reason: 'string'          // å®¡æ ¸åŸå› ï¼Œå¯é€‰
    },
    responseExample: {
      code: 0,
      message: 'å®¡æ ¸æˆåŠŸ',
      data: {
        upload_id: "UP123456789",
        action: "approve",
        points_awarded: 585,
        reason: "å®¡æ ¸é€šè¿‡"
      }
    }
  }
}

// ğŸ”´ ç”¨æˆ·ä¸­å¿ƒæ¨¡å—æ¥å£
const USER_APIs = {
  // è·å–ç”¨æˆ·ä¿¡æ¯
  getProfile: {
    method: 'GET',
    url: '/api/user/profile',
    description: 'è·å–ç”¨æˆ·ä¸ªäººä¿¡æ¯',
    headers: {
      'Authorization': 'Bearer {accessToken}'
    },
    responseExample: {
      code: 0,
      message: 'è·å–æˆåŠŸ',
      data: {
        user_id: 123,
        mobile: "138****8000",
        nickname: "ç”¨æˆ·æ˜µç§°",
        avatar: "https://...",
        total_points: 1500,
        is_merchant: false,
        created_at: "2024-01-01T00:00:00Z"
      }
    }
  },
  
  // ç§¯åˆ†å˜åŠ¨è®°å½•
  getPointsHistory: {
    method: 'GET',
    url: '/api/user/points-history',
    description: 'è·å–ç§¯åˆ†å˜åŠ¨è®°å½•',
    headers: {
      'Authorization': 'Bearer {accessToken}'
    },
    queryParams: {
      type: 'string',           // å¯é€‰ï¼Œå˜åŠ¨ç±»å‹: earn, spend, admin
      page: 'number',
      limit: 'number'
    },
    responseExample: {
      code: 0,
      message: 'è·å–æˆåŠŸ',
      data: {
        history: [
          {
            history_id: 1,
            points_change: 585,
            change_type: "earn",
            change_reason: "ä¸Šä¼ å°ç¥¨å¥–åŠ±",
            balance_before: 1000,
            balance_after: 1585,
            created_at: "2024-12-19T15:00:00Z"
          }
        ],
        total: 100,
        has_more: true
      }
    }
  }
}
```

## ğŸ“Š ä¸‰ã€æ•°æ®æ ¼å¼è§„èŒƒ

### 3.1 å‰åç«¯å­—æ®µæ˜ å°„æ ‡å‡†
```javascript
// ğŸ”´ å­—æ®µå‘½åæ˜ å°„è§„åˆ™
const FIELD_MAPPING = {
  // å‰ç«¯ä½¿ç”¨ camelCaseï¼Œåç«¯æ•°æ®åº“ä½¿ç”¨ snake_case
  frontend: 'camelCase',
  backend: 'snake_case',
  
  // æ ¸å¿ƒä¸šåŠ¡å­—æ®µæ˜ å°„è¡¨
  userFields: {
    // å‰ç«¯å­—æ®µå -> åç«¯æ•°æ®åº“å­—æ®µå
    'userId': 'user_id',
    'mobile': 'mobile',
    'nickname': 'nickname',
    'avatar': 'avatar',
    'totalPoints': 'total_points',
    'isMerchant': 'is_merchant',
    'wxOpenid': 'wx_openid',
    'createdAt': 'created_at',
    'updatedAt': 'updated_at'
  },
  
  productFields: {
    'commodityId': 'commodity_id',
    'name': 'name',
    'exchangePoints': 'exchange_points',
    'stock': 'stock',
    'category': 'category',
    'isHot': 'is_hot',
    'status': 'status'
  },
  
  lotteryFields: {
    'prizeId': 'prize_id',
    'prizeName': 'prize_name',
    'prizeType': 'prize_type',
    'prizeValue': 'prize_value',
    'probability': 'probability',
    'angle': 'angle',
    'color': 'color'
  }
}

// ğŸ”´ æ•°æ®ç±»å‹è½¬æ¢è§„èŒƒ
const DATA_TYPE_CONVERSION = {
  // æ•°æ®åº“ -> å‰ç«¯
  dbToFrontend: {
    'TINYINT(1)': 'boolean',    // MySQLå¸ƒå°”å€¼è½¬JSå¸ƒå°”å€¼
    'DECIMAL(10,2)': 'number',  // MySQLé‡‘é¢è½¬JSæ•°å­—
    'TIMESTAMP': 'string',      // MySQLæ—¶é—´è½¬ISOå­—ç¬¦ä¸²
    'JSON': 'object',           // MySQL JSONè½¬JSå¯¹è±¡
    'ENUM': 'string'            // MySQLæšä¸¾è½¬JSå­—ç¬¦ä¸²
  },
  
  // å‰ç«¯ -> æ•°æ®åº“
  frontendToDb: {
    'boolean': 'TINYINT(1)',
    'number': 'INT/DECIMAL',
    'string': 'VARCHAR/TEXT',
    'object': 'JSON',
    'Date': 'TIMESTAMP'
  }
}
```

### 3.2 æ•°æ®éªŒè¯è§„èŒƒ
```javascript
// ğŸ”´ è¯·æ±‚å‚æ•°éªŒè¯æ ‡å‡†
const VALIDATION_RULES = {
  // ç”¨æˆ·ç›¸å…³éªŒè¯
  user: {
    mobile: {
      type: 'string',
      pattern: /^1[3-9]\d{9}$/,
      required: true,
      message: 'æ‰‹æœºå·æ ¼å¼ä¸æ­£ç¡®'
    },
    nickname: {
      type: 'string',
      minLength: 1,
      maxLength: 50,
      required: false
    },
    points: {
      type: 'number',
      min: 0,
      required: true,
      message: 'ç§¯åˆ†å¿…é¡»ä¸ºéè´Ÿæ•´æ•°'
    }
  },
  
  // åˆ†é¡µå‚æ•°éªŒè¯
  pagination: {
    page: {
      type: 'number',
      min: 1,
      default: 1
    },
    limit: {
      type: 'number',
      min: 1,
      max: 100,
      default: 20
    }
  },
  
  // æ–‡ä»¶ä¸Šä¼ éªŒè¯
  file: {
    type: {
      type: 'string',
      enum: ['image/jpeg', 'image/png', 'image/gif'],
      message: 'åªæ”¯æŒJPGã€PNGã€GIFæ ¼å¼å›¾ç‰‡'
    },
    size: {
      type: 'number',
      max: 5 * 1024 * 1024,  // 5MB
      message: 'æ–‡ä»¶å¤§å°ä¸èƒ½è¶…è¿‡5MB'
    }
  }
}
```

## ğŸ” å››ã€è®¤è¯æˆæƒè§„èŒƒ

### 4.1 JWT Tokenæ ‡å‡†
```javascript
// ğŸ”´ JWT Tokenç»“æ„è§„èŒƒ
const JWT_STANDARDS = {
  // Tokenæ ¼å¼ï¼šHeader.Payload.Signature
  header: {
    alg: 'HS256',              // åŠ å¯†ç®—æ³•
    typ: 'JWT'                 // Tokenç±»å‹
  },
  
  // Payloadè½½è·æ ‡å‡†
  payload: {
    // æ ‡å‡†å£°æ˜
    iss: 'restaurant-lottery',  // ç­¾å‘è€…
    aud: 'miniprogram',        // å—ä¼—
    exp: 1640995200,           // è¿‡æœŸæ—¶é—´æˆ³
    iat: 1640908800,           // ç­¾å‘æ—¶é—´æˆ³
    
    // è‡ªå®šä¹‰å£°æ˜
    userId: 123,               // ç”¨æˆ·ID
    mobile: '138****8000',     // è„±æ•æ‰‹æœºå·
    isMerchant: false,         // å•†å®¶æ ‡è¯†
    permissions: ['user']       // æƒé™åˆ—è¡¨
  },
  
  // Tokenä½¿ç”¨è§„èŒƒ
  usage: {
    accessToken: {
      purpose: 'æ¥å£è®¿é—®è®¤è¯',
      expiresIn: '2h',         // 2å°æ—¶è¿‡æœŸ
      usage: 'Bearer {token}'
    },
    refreshToken: {
      purpose: 'åˆ·æ–°è®¿é—®ä»¤ç‰Œ',
      expiresIn: '7d',         // 7å¤©è¿‡æœŸ
      usage: 'ä»…ç”¨äºåˆ·æ–°æ¥å£'
    }
  }
}

// ğŸ”´ æƒé™éªŒè¯ä¸­é—´ä»¶æ ‡å‡†
const PERMISSION_MIDDLEWARE = {
  // æ™®é€šç”¨æˆ·æƒé™éªŒè¯
  requireAuth: {
    description: 'éœ€è¦ç™»å½•è®¤è¯',
    implementation: 'éªŒè¯Authorizationå¤´ä¸­çš„Bearer Token'
  },
  
  // å•†å®¶æƒé™éªŒè¯
  requireMerchant: {
    description: 'éœ€è¦å•†å®¶æƒé™',
    implementation: 'éªŒè¯Tokenä¸­çš„isMerchantå­—æ®µ'
  },
  
  // ç®¡ç†å‘˜æƒé™éªŒè¯
  requireAdmin: {
    description: 'éœ€è¦ç®¡ç†å‘˜æƒé™',
    implementation: 'éªŒè¯Tokenä¸­çš„permissionsæ•°ç»„'
  }
}
```

### 4.2 æ¥å£æƒé™çŸ©é˜µ
```javascript
// ğŸ”´ APIæƒé™æ§åˆ¶çŸ©é˜µ
const API_PERMISSIONS = {
  // å…¬å¼€æ¥å£ï¼ˆæ— éœ€è®¤è¯ï¼‰
  public: [
    'POST /api/v1/auth/send-code',
    'POST /api/v1/auth/login',
    'GET /api/v1/health'
  ],
  
  // ç”¨æˆ·æ¥å£ï¼ˆéœ€è¦ç™»å½•ï¼‰
  user: [
    'GET /api/v1/user/profile',
    'PUT /api/v1/user/profile',
    'GET /api/v1/lottery/config',
    'POST /api/v1/lottery/draw',
    'GET /api/v1/exchange/products',
    'POST /api/v1/exchange/redeem'
  ],
  
  // å•†å®¶æ¥å£ï¼ˆéœ€è¦å•†å®¶æƒé™ï¼‰
  merchant: [
    'GET /api/v1/merchant/pending-reviews',
    'POST /api/v1/merchant/review',
    'GET /api/v1/merchant/statistics'
  ],
  
  // ç®¡ç†å‘˜æ¥å£ï¼ˆéœ€è¦ç®¡ç†å‘˜æƒé™ï¼‰
  admin: [
    'GET /api/v1/admin/users',
    'PUT /api/v1/admin/users/:id',
    'GET /api/v1/admin/system-stats'
  ]
}
```

## âŒ äº”ã€é”™è¯¯ç å®šä¹‰è§„èŒƒ

### 5.1 ç»Ÿä¸€é”™è¯¯ç ä½“ç³»
```javascript
// ğŸ”´ é”™è¯¯ç åˆ†ç±»æ ‡å‡†
const ERROR_CODE_SYSTEM = {
  // æˆåŠŸç 
  SUCCESS: 0,
  
  // å®¢æˆ·ç«¯é”™è¯¯ (400-499)
  CLIENT_ERROR: {
    INVALID_PARAMS: 400,       // å‚æ•°é”™è¯¯
    UNAUTHORIZED: 401,         // æœªæˆæƒ
    FORBIDDEN: 403,            // æƒé™ä¸è¶³
    NOT_FOUND: 404,           // èµ„æºä¸å­˜åœ¨
    METHOD_NOT_ALLOWED: 405,   // æ–¹æ³•ä¸å…è®¸
    RATE_LIMITED: 429          // è¯·æ±‚é¢‘ç‡é™åˆ¶
  },
  
  // æœåŠ¡å™¨é”™è¯¯ (500-599)
  SERVER_ERROR: {
    INTERNAL_ERROR: 500,       // å†…éƒ¨æœåŠ¡å™¨é”™è¯¯
    BAD_GATEWAY: 502,         // ç½‘å…³é”™è¯¯
    SERVICE_UNAVAILABLE: 503,  // æœåŠ¡ä¸å¯ç”¨
    GATEWAY_TIMEOUT: 504       // ç½‘å…³è¶…æ—¶
  },
  
  // ä¸šåŠ¡é”™è¯¯ (1000-9999)
  BUSINESS_ERROR: {
    // ç”¨æˆ·ç›¸å…³ (1000-1099)
    USER_NOT_FOUND: 1001,      // ç”¨æˆ·ä¸å­˜åœ¨
    USER_ALREADY_EXISTS: 1002, // ç”¨æˆ·å·²å­˜åœ¨
    INSUFFICIENT_POINTS: 1003, // ç§¯åˆ†ä¸è¶³
    
    // æŠ½å¥–ç›¸å…³ (1100-1199)
    LOTTERY_DISABLED: 1101,    // æŠ½å¥–åŠŸèƒ½å·²å…³é—­
    DAILY_LIMIT_EXCEEDED: 1102,// æ¯æ—¥æŠ½å¥–æ¬¡æ•°ç”¨å°½
    INVALID_PRIZE: 1103,       // æ— æ•ˆå¥–å“
    
    // å•†å“ç›¸å…³ (1200-1299)
    PRODUCT_NOT_FOUND: 1201,   // å•†å“ä¸å­˜åœ¨
    INSUFFICIENT_STOCK: 1202,  // åº“å­˜ä¸è¶³
    PRODUCT_DISABLED: 1203,    // å•†å“å·²ä¸‹æ¶
    
    // ä¸Šä¼ ç›¸å…³ (1300-1399)
    UPLOAD_FAILED: 1301,       // ä¸Šä¼ å¤±è´¥
    INVALID_FILE_TYPE: 1302,   // æ–‡ä»¶ç±»å‹ä¸æ”¯æŒ
    FILE_TOO_LARGE: 1303       // æ–‡ä»¶è¿‡å¤§
  }
}

// ğŸ”´ é”™è¯¯ä¿¡æ¯æ˜ å°„è¡¨
const ERROR_MESSAGES = {
  // ä¸­æ–‡é”™è¯¯ä¿¡æ¯
  zh: {
    0: 'æ“ä½œæˆåŠŸ',
    400: 'è¯·æ±‚å‚æ•°é”™è¯¯',
    401: 'æœªæˆæƒè®¿é—®',
    403: 'æƒé™ä¸è¶³',
    404: 'èµ„æºä¸å­˜åœ¨',
    500: 'æœåŠ¡å™¨å†…éƒ¨é”™è¯¯',
    1001: 'ç”¨æˆ·ä¸å­˜åœ¨',
    1002: 'ç”¨æˆ·å·²å­˜åœ¨',
    1003: 'ç§¯åˆ†ä¸è¶³',
    1101: 'æŠ½å¥–åŠŸèƒ½æš‚æ—¶å…³é—­',
    1102: 'ä»Šæ—¥æŠ½å¥–æ¬¡æ•°å·²ç”¨å®Œ',
    1201: 'å•†å“ä¸å­˜åœ¨æˆ–å·²ä¸‹æ¶',
    1202: 'å•†å“åº“å­˜ä¸è¶³'
  },
  
  // è‹±æ–‡é”™è¯¯ä¿¡æ¯
  en: {
    0: 'Success',
    400: 'Bad Request',
    401: 'Unauthorized',
    403: 'Forbidden',
    404: 'Not Found',
    500: 'Internal Server Error',
    1001: 'User not found',
    1002: 'User already exists',
    1003: 'Insufficient points'
  }
}
```

### 5.2 é”™è¯¯å¤„ç†æœ€ä½³å®è·µ
```javascript
// ğŸ”´ å‰ç«¯é”™è¯¯å¤„ç†æ ‡å‡†
const FRONTEND_ERROR_HANDLING = {
  // APIé”™è¯¯ç»Ÿä¸€å¤„ç†
  handleApiError(error) {
    const { code, message } = error
    
    switch (code) {
      case 401:
        // Tokenè¿‡æœŸï¼Œè·³è½¬ç™»å½•
        wx.reLaunch({ url: '/pages/auth/auth' })
        break
      case 403:
        // æƒé™ä¸è¶³
        wx.showModal({
          title: 'æƒé™ä¸è¶³',
          content: message,
          showCancel: false
        })
        break
      case 1003:
        // ç§¯åˆ†ä¸è¶³
        wx.showModal({
          title: 'ç§¯åˆ†ä¸è¶³',
          content: 'æ‚¨çš„ç§¯åˆ†ä¸å¤Ÿï¼Œå¿«å»ä¸Šä¼ å›¾ç‰‡èµšç§¯åˆ†å§ï¼',
          confirmText: 'å»ä¸Šä¼ ',
          success: (res) => {
            if (res.confirm) {
              wx.navigateTo({ url: '/pages/camera/camera' })
            }
          }
        })
        break
      default:
        // é€šç”¨é”™è¯¯æç¤º
        wx.showToast({
          title: message || 'æ“ä½œå¤±è´¥ï¼Œè¯·é‡è¯•',
          icon: 'none'
        })
    }
  }
}
```

## ğŸ“¡ å…­ã€WebSocketé€šä¿¡è§„èŒƒ

### 6.1 è¿æ¥å»ºç«‹æ ‡å‡†
```javascript
// ğŸ”´ WebSocketè¿æ¥è§„èŒƒ
const WEBSOCKET_STANDARDS = {
  // è¿æ¥URLæ ¼å¼
  connectionUrl: 'wss://domain.com/ws?token={accessToken}&clientType=miniprogram',
  
  // è¿æ¥å‚æ•°
  connectionParams: {
    token: 'string',           // JWTè®¿é—®ä»¤ç‰Œ
    clientType: 'string',      // å®¢æˆ·ç«¯ç±»å‹ï¼šminiprogram/web/admin
    version: 'string'          // åè®®ç‰ˆæœ¬ï¼šv1
  },
  
  // è¿æ¥çŠ¶æ€
  connectionStates: {
    CONNECTING: 0,             // è¿æ¥ä¸­
    OPEN: 1,                   // å·²è¿æ¥
    CLOSING: 2,                // å…³é—­ä¸­
    CLOSED: 3                  // å·²å…³é—­
  }
}

// ğŸ”´ æ¶ˆæ¯æ ¼å¼æ ‡å‡†
const WEBSOCKET_MESSAGE_FORMAT = {
  // å®¢æˆ·ç«¯å‘é€æ¶ˆæ¯æ ¼å¼
  clientMessage: {
    type: 'string',            // æ¶ˆæ¯ç±»å‹
    id: 'string',              // æ¶ˆæ¯IDï¼ˆç”¨äºå“åº”åŒ¹é…ï¼‰
    data: 'object',            // æ¶ˆæ¯æ•°æ®
    timestamp: 'number'        // æ—¶é—´æˆ³
  },
  
  // æœåŠ¡ç«¯å“åº”æ¶ˆæ¯æ ¼å¼
  serverMessage: {
    type: 'string',            // æ¶ˆæ¯ç±»å‹
    id: 'string',              // å¯¹åº”çš„è¯·æ±‚æ¶ˆæ¯ID
    code: 'number',            // çŠ¶æ€ç 
    message: 'string',         // æ¶ˆæ¯æè¿°
    data: 'object',            // å“åº”æ•°æ®
    timestamp: 'number'        // æ—¶é—´æˆ³
  }
}
```

### 6.2 æ¶ˆæ¯ç±»å‹å®šä¹‰
```javascript
// ğŸ”´ WebSocketæ¶ˆæ¯ç±»å‹
const WS_MESSAGE_TYPES = {
  // è¿æ¥ç®¡ç†
  PING: 'ping',                // å¿ƒè·³æ£€æµ‹
  PONG: 'pong',               // å¿ƒè·³å“åº”
  
  // å®æ—¶é€šçŸ¥
  STOCK_UPDATE: 'stock_update',      // åº“å­˜æ›´æ–°é€šçŸ¥
  POINTS_CHANGE: 'points_change',    // ç§¯åˆ†å˜åŠ¨é€šçŸ¥
  REVIEW_STATUS: 'review_status',    // å®¡æ ¸çŠ¶æ€å˜æ›´
  SYSTEM_NOTICE: 'system_notice',    // ç³»ç»Ÿé€šçŸ¥
  
  // å®æ—¶æ•°æ®åŒæ­¥
  LOTTERY_CONFIG_UPDATE: 'lottery_config_update',  // æŠ½å¥–é…ç½®æ›´æ–°
  PRODUCT_STATUS_UPDATE: 'product_status_update'   // å•†å“çŠ¶æ€æ›´æ–°
}

// æ¶ˆæ¯ç¤ºä¾‹
const WS_MESSAGE_EXAMPLES = {
  // åº“å­˜æ›´æ–°é€šçŸ¥
  stockUpdate: {
    type: 'stock_update',
    data: {
      commodityId: 123,
      stock: 50,              // æœ€æ–°åº“å­˜
      status: 'active'        // å•†å“çŠ¶æ€
    },
    timestamp: 1640995200000
  },
  
  // ç§¯åˆ†å˜åŠ¨é€šçŸ¥
  pointsChange: {
    type: 'points_change',
    data: {
      userId: 456,
      change: 100,            // ç§¯åˆ†å˜åŠ¨é‡
      balance: 1500,          // å˜åŠ¨åä½™é¢
      reason: 'ä¸Šä¼ å›¾ç‰‡å¥–åŠ±'    // å˜åŠ¨åŸå› 
    },
    timestamp: 1640995200000
  }
}
```

## ğŸ“ ä¸ƒã€æ–‡ä»¶ä¸Šä¼ è§„èŒƒ

### 7.1 ä¸Šä¼ æ¥å£æ ‡å‡†
```javascript
// ğŸ”´ æ–‡ä»¶ä¸Šä¼ æ¥å£è§„èŒƒ
const FILE_UPLOAD_API = {
  // ä¸Šä¼ æ¥å£å®šä¹‰
  upload: {
    method: 'POST',
    url: '/api/v1/upload/image',
    description: 'ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶',
    headers: {
      'Authorization': 'Bearer {accessToken}',
      'Content-Type': 'multipart/form-data'
    },
    requestBody: {
      file: 'File',            // æ–‡ä»¶å¯¹è±¡ï¼Œå¿…éœ€
      category: 'string',      // æ–‡ä»¶åˆ†ç±»ï¼šavatar/receipt/product
      description: 'string'    // æ–‡ä»¶æè¿°ï¼Œå¯é€‰
    },
    responseExample: {
      code: 0,
      message: 'ä¸Šä¼ æˆåŠŸ',
      data: {
        uploadId: 'UP123456789',     // ä¸Šä¼ è®°å½•ID
        fileUrl: 'https://cdn.example.com/images/abc123.jpg',
        fileSize: 1024576,           // æ–‡ä»¶å¤§å°ï¼ˆå­—èŠ‚ï¼‰
        fileType: 'image/jpeg',      // æ–‡ä»¶ç±»å‹
        width: 1920,                 // å›¾ç‰‡å®½åº¦
        height: 1080,                // å›¾ç‰‡é«˜åº¦
        uploadTime: '2024-12-19T10:30:00Z'
      }
    }
  },
  
  // ä¸Šä¼ é™åˆ¶
  limitations: {
    maxFileSize: 5 * 1024 * 1024,    // æœ€å¤§5MB
    supportedTypes: [
      'image/jpeg',
      'image/png', 
      'image/gif'
    ],
    maxDimension: 4096,              // æœ€å¤§å°ºå¯¸4096px
    minDimension: 100,               // æœ€å°å°ºå¯¸100px
    dailyUploadLimit: 50             // æ¯æ—¥ä¸Šä¼ é™åˆ¶50å¼ 
  }
}
```

### 7.2 æ–‡ä»¶å¤„ç†æµç¨‹
```javascript
// ğŸ”´ æ–‡ä»¶ä¸Šä¼ å¤„ç†æµç¨‹
const FILE_UPLOAD_PROCESS = {
  // å‰ç«¯å¤„ç†æµç¨‹
  frontend: [
    '1. ç”¨æˆ·é€‰æ‹©å›¾ç‰‡',
    '2. å‰ç«¯å‹ç¼©å¤„ç†',
    '3. ä¸Šä¼ å‰éªŒè¯ï¼ˆæ ¼å¼ã€å¤§å°ï¼‰',
    '4. è°ƒç”¨ä¸Šä¼ æ¥å£',
    '5. æ˜¾ç¤ºä¸Šä¼ è¿›åº¦',
    '6. å¤„ç†ä¸Šä¼ ç»“æœ'
  ],
  
  // åç«¯å¤„ç†æµç¨‹
  backend: [
    '1. æ¥æ”¶æ–‡ä»¶æ•°æ®',
    '2. éªŒè¯æ–‡ä»¶æ ¼å¼å’Œå¤§å°',
    '3. å›¾ç‰‡è´¨é‡æ£€æµ‹ï¼ˆå¯é€‰ï¼‰',
    '4. ä¸Šä¼ åˆ°å¯¹è±¡å­˜å‚¨',
    '5. ç”Ÿæˆç¼©ç•¥å›¾ï¼ˆå¯é€‰ï¼‰',
    '6. ä¿å­˜ä¸Šä¼ è®°å½•',
    '7. è¿”å›æ–‡ä»¶ä¿¡æ¯'
  ],
  
  // é”™è¯¯å¤„ç†
  errorHandling: {
    'file too large': 'æ–‡ä»¶è¿‡å¤§ï¼Œè¯·é€‰æ‹©å°äº5MBçš„å›¾ç‰‡',
    'invalid file type': 'ä¸æ”¯æŒçš„æ–‡ä»¶æ ¼å¼ï¼Œè¯·é€‰æ‹©JPGã€PNGæˆ–GIFæ ¼å¼',
    'upload failed': 'ä¸Šä¼ å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥åé‡è¯•',
    'storage error': 'å­˜å‚¨æœåŠ¡å¼‚å¸¸ï¼Œè¯·ç¨åé‡è¯•'
  }
}
```

## ğŸ§ª å…«ã€æ¥å£æµ‹è¯•è§„èŒƒ

### 8.1 æµ‹è¯•ç”¨ä¾‹æ ‡å‡†
```javascript
// ğŸ”´ æ¥å£æµ‹è¯•ç”¨ä¾‹æ¨¡æ¿
const API_TEST_TEMPLATE = {
  // æµ‹è¯•ç”¨ä¾‹åŸºæœ¬ä¿¡æ¯
  testCase: {
    id: 'AUTH_LOGIN_001',
    name: 'ç”¨æˆ·ç™»å½•-æ­£å¸¸åœºæ™¯',
    description: 'ä½¿ç”¨æ­£ç¡®çš„æ‰‹æœºå·å’ŒéªŒè¯ç è¿›è¡Œç™»å½•',
    priority: 'high',
    category: 'auth'
  },
  
  // æµ‹è¯•æ­¥éª¤
  testSteps: [
    {
      step: 1,
      action: 'å‘é€POSTè¯·æ±‚åˆ° /api/v1/auth/login',
      data: {
        mobile: '13800138000',
        code: '123456'
      },
      expectedResult: {
        statusCode: 200,
        responseBody: {
          code: 0,
          message: 'ç™»å½•æˆåŠŸ',
          data: {
            accessToken: 'string',
            refreshToken: 'string',
            userInfo: 'object'
          }
        }
      }
    }
  ],
  
  // æ–­è¨€æ£€æŸ¥ç‚¹
  assertions: [
    'Response status code is 200',
    'Response body contains access token',
    'User info is not empty',
    'Token expires time is valid'
  ]
}

// ğŸ”´ è¾¹ç•Œæµ‹è¯•åœºæ™¯
const BOUNDARY_TEST_SCENARIOS = {
  // å‚æ•°éªŒè¯æµ‹è¯•
  parameterValidation: [
    'ç©ºå‚æ•°æµ‹è¯•',
    'æ— æ•ˆæ ¼å¼æµ‹è¯•',
    'è¶…é•¿å‚æ•°æµ‹è¯•',
    'ç‰¹æ®Šå­—ç¬¦æµ‹è¯•',
    'SQLæ³¨å…¥æµ‹è¯•'
  ],
  
  // æƒé™æµ‹è¯•
  permissionTest: [
    'æœªç™»å½•è®¿é—®æµ‹è¯•',
    'è¿‡æœŸTokenæµ‹è¯•',
    'æ— æ•ˆTokenæµ‹è¯•',
    'æƒé™ä¸è¶³æµ‹è¯•'
  ],
  
  // æ€§èƒ½æµ‹è¯•
  performanceTest: [
    'å•æ¥å£å‹åŠ›æµ‹è¯•',
    'å¹¶å‘è®¿é—®æµ‹è¯•',
    'å¤§æ•°æ®é‡æµ‹è¯•',
    'å“åº”æ—¶é—´æµ‹è¯•'
  ]
}
```

### 8.2 è‡ªåŠ¨åŒ–æµ‹è¯•é…ç½®
```javascript
// ğŸ”´ æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•é…ç½®
const AUTOMATION_TEST_CONFIG = {
  // æµ‹è¯•ç¯å¢ƒé…ç½®
  environments: {
    development: {
      baseUrl: 'http://localhost:3000/api/v1',
      timeout: 5000
    },
    testing: {
      baseUrl: 'https://test-api.example.com/api/v1',
      timeout: 10000
    },
    production: {
      baseUrl: 'https://api.example.com/api/v1',
      timeout: 15000
    }
  },
  
  // æµ‹è¯•æ•°æ®ç®¡ç†
  testData: {
    validUser: {
      mobile: '13800138001',
      code: '123456'
    },
    invalidUser: {
      mobile: '12345678901',
      code: '000000'
    },
    testProducts: [
      { id: 1, name: 'æµ‹è¯•å•†å“1', points: 100 },
      { id: 2, name: 'æµ‹è¯•å•†å“2', points: 200 }
    ]
  },
  
  // æŠ¥å‘Šé…ç½®
  reporting: {
    format: ['html', 'json', 'junit'],
    outputDir: './test-reports',
    includeScreenshots: true,
    emailNotification: true
  }
}
```

## ğŸ“– ä¹ã€æ¥å£æ–‡æ¡£ç»´æŠ¤è§„èŒƒ

### 9.1 æ–‡æ¡£ç‰ˆæœ¬ç®¡ç†
```javascript
// ğŸ”´ APIç‰ˆæœ¬ç®¡ç†ç­–ç•¥
const API_VERSION_STRATEGY = {
  // ç‰ˆæœ¬å·æ ¼å¼ï¼šv{major}.{minor}.{patch}
  versionFormat: 'v1.2.3',
  
  // ç‰ˆæœ¬å…¼å®¹æ€§è§„åˆ™
  compatibility: {
    major: 'ä¸å…¼å®¹å˜æ›´ï¼Œéœ€è¦å®¢æˆ·ç«¯é€‚é…',
    minor: 'å‘ä¸‹å…¼å®¹çš„æ–°å¢åŠŸèƒ½',
    patch: 'å‘ä¸‹å…¼å®¹çš„é—®é¢˜ä¿®å¤'
  },
  
  // ç‰ˆæœ¬ç”Ÿå‘½å‘¨æœŸ
  lifecycle: {
    development: 'å¼€å‘ä¸­ï¼Œæ¥å£å¯èƒ½é¢‘ç¹å˜æ›´',
    stable: 'ç¨³å®šç‰ˆæœ¬ï¼Œä¿è¯å‘ä¸‹å…¼å®¹',
    deprecated: 'å·²åºŸå¼ƒï¼Œå»ºè®®è¿ç§»åˆ°æ–°ç‰ˆæœ¬',
    retired: 'å·²åœç”¨ï¼Œä¸å†æä¾›æœåŠ¡'
  },
  
  // ç‰ˆæœ¬æ”¯æŒç­–ç•¥
  supportPolicy: {
    currentVersion: 'å®Œæ•´åŠŸèƒ½æ”¯æŒ',
    previousVersion: '6ä¸ªæœˆç»´æŠ¤æœŸ',
    olderVersions: 'ä»…å®‰å…¨æ›´æ–°'
  }
}
```

### 9.2 æ–‡æ¡£è´¨é‡æ ‡å‡†
```javascript
// ğŸ”´ æ¥å£æ–‡æ¡£è´¨é‡æ£€æŸ¥æ¸…å•
const DOC_QUALITY_CHECKLIST = {
  // å†…å®¹å®Œæ•´æ€§
  completeness: [
    'âœ… æ‰€æœ‰æ¥å£éƒ½æœ‰å®Œæ•´æè¿°',
    'âœ… è¯·æ±‚å‚æ•°ç±»å‹å’Œæ ¼å¼æ˜ç¡®',
    'âœ… å“åº”æ ¼å¼å’Œå­—æ®µè¯´æ˜å®Œæ•´',
    'âœ… é”™è¯¯ç å’Œé”™è¯¯ä¿¡æ¯é½å…¨',
    'âœ… æä¾›å®Œæ•´çš„è¯·æ±‚å“åº”ç¤ºä¾‹'
  ],
  
  // å‡†ç¡®æ€§
  accuracy: [
    'âœ… æ¥å£åœ°å€å’Œå‚æ•°ä¸å®é™…å®ç°ä¸€è‡´',
    'âœ… ç¤ºä¾‹æ•°æ®æ ¼å¼æ­£ç¡®',
    'âœ… é”™è¯¯ç ä¸åç«¯å®ç°åŒ¹é…',
    'âœ… å­—æ®µç±»å‹å®šä¹‰å‡†ç¡®'
  ],
  
  // å¯ç”¨æ€§
  usability: [
    'âœ… æ–‡æ¡£ç»“æ„æ¸…æ™°ï¼Œæ˜“äºæŸ¥æ‰¾',
    'âœ… æä¾›å¿«é€Ÿå¼€å§‹æŒ‡å—',
    'âœ… åŒ…å«å¸¸è§é—®é¢˜è§£ç­”',
    'âœ… æä¾›è°ƒè¯•å·¥å…·å’Œæµ‹è¯•ç¯å¢ƒ'
  ],
  
  // ç»´æŠ¤æ€§
  maintainability: [
    'âœ… å»ºç«‹æ–‡æ¡£æ›´æ–°æœºåˆ¶',
    'âœ… ç‰ˆæœ¬å˜æ›´è®°å½•å®Œæ•´',
    'âœ… è´£ä»»äººæ˜ç¡®',
    'âœ… å®šæœŸå®¡æ ¸å’Œæ›´æ–°'
  ]
}
```

---

## ğŸ¯ æ€»ç»“ï¼šæ¥å£å¯¹æ¥è§„èŒƒä»·å€¼

### âœ… æ ¸å¿ƒä»·å€¼
1. **åä½œæ•ˆç‡**ï¼šç»Ÿä¸€çš„æ¥å£è§„èŒƒå¤§å¹…æå‡å‰åç«¯åä½œæ•ˆç‡
2. **å¼€å‘è´¨é‡**ï¼šæ ‡å‡†åŒ–çš„æ•°æ®æ ¼å¼å‡å°‘é›†æˆé—®é¢˜
3. **ç»´æŠ¤æˆæœ¬**ï¼šæ¸…æ™°çš„æ–‡æ¡£é™ä½åæœŸç»´æŠ¤æˆæœ¬
4. **ç”¨æˆ·ä½“éªŒ**ï¼šè§„èŒƒçš„é”™è¯¯å¤„ç†æå‡ç”¨æˆ·ä½“éªŒ

### ğŸ¯ å®æ–½å»ºè®®
1. **å¥‘çº¦å…ˆè¡Œ**ï¼šæ¥å£è®¾è®¡ä¼˜å…ˆäºåŠŸèƒ½å®ç°
2. **è‡ªåŠ¨åŒ–æµ‹è¯•**ï¼šå»ºç«‹å®Œå–„çš„æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•ä½“ç³»
3. **æŒç»­é›†æˆ**ï¼šæ¥å£å˜æ›´è‡ªåŠ¨è§¦å‘æ–‡æ¡£æ›´æ–°å’Œæµ‹è¯•
4. **ç‰ˆæœ¬ç®¡ç†**ï¼šä¸¥æ ¼æŒ‰ç…§ç‰ˆæœ¬ç®¡ç†ç­–ç•¥æ‰§è¡Œæ¥å£å‡çº§

### ğŸ“Š æˆåŠŸæŒ‡æ ‡
- **æ¥å£ç¨³å®šæ€§**ï¼šæ¥å£å˜æ›´å¯¼è‡´çš„bugæ•°é‡ < 5%
- **æ–‡æ¡£å‡†ç¡®æ€§**ï¼šæ–‡æ¡£ä¸å®é™…å®ç°ä¸€è‡´æ€§ > 95%
- **é›†æˆæ•ˆç‡**ï¼šå‰åç«¯é›†æˆæ—¶é—´ç¼©çŸ­ 50%
- **æµ‹è¯•è¦†ç›–ç‡**ï¼šæ ¸å¿ƒæ¥å£æµ‹è¯•è¦†ç›–ç‡ > 90%

**æ–‡æ¡£å®šä½**ï¼šå‰åç«¯åä½œæ ‡å‡†æ¥å£è§„èŒƒ  
**è¦†ç›–èŒƒå›´**ï¼šAPIæ¥å£è®¾è®¡ã€æ•°æ®æ ¼å¼ã€é€šä¿¡åè®®å…¨æµç¨‹  
**æ›´æ–°ç­–ç•¥**ï¼šä¸æ¥å£å®ç°åŒæ­¥æ›´æ–°ï¼Œä¿æŒæ–‡æ¡£çš„æ—¶æ•ˆæ€§å’Œå‡†ç¡®æ€§ 